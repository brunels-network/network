{"version":3,"sources":["components/Overlay.js","components/Popover.js","components/ShipSelector.js","model/People.js","model/Person.js","model/Businesses.js","model/Business.js","model/Positions.js","model/Position.js","model/Affiliations.js","model/Affiliation.js","model/Sources.js","model/Source.js","model/Projects.js","model/Project.js","model/ScoringFunctions.js","model/SizingFunctions.js","components/SourceOverlay.js","components/ForceGraph.js","components/d3/ForceGraph.d3.js","components/d3/force_spiral.js","components/ForceGraph.module.css","images/uob_logo.png","images/bi_logo.png","components/LabelButton.js","components/HowDoIOverlay.js","../src sync /^/.//.*$","components/AboutOverlay.js","model/Connections.js","model/Connection.js","model/Notes.js","model/Note.js","model/Biographies.js","components/ImageCarousel.js","images/RHowlett_IKB.jpg","images/A_Specimen_by_William_Caslon.jpg","components/MainMenu.js","components/SearchBar.js","components/ShipOverlay.js","components/SlidingPanel.js","components/WarningOverlay.js","components/TextButton.module.css","components/BigBox.module.css","components/VBox.module.css","components/HBox.module.css","components/Popover.module.css","components/ShipSelector.module.css","components/LabelButton.module.css","components/HowDoIOverlay.module.css","SocialApp.module.css","SocialApp.test.js","components/AboutOverlay.module.css","components/AboutOverlay.test.js","components/BioOverlay.module.css","components/BioOverlay.test.js","components/ImageCarousel.test.js","components/MainMenu.module.css","SocialApp.js","components/Overlay.module.css","components/Overlay.test.js","components/OverlayWrapper.js","components/SourceOverlay.module.css","images/320px-SS_Great_Britain_diagram.jpg","images/320px-SS_Great_Britain_transverse_section.jpg","images/800px-Gutenberg_Bible.jpg","images/Brunel_letter_GWR.jpg","images/Great_Western_maiden_voyage.jpg","images/IllustriteZeitung_SS_GreatBritain.png","images/Sumerian_26th_c_Adab.jpg","images/The_Steamer_Great_Western_small.jpg","images/bg-128-168.jpg","images/people/Bryan_Donkin.jpg","images/people/Christopher_Claxton.jpg","images/people/Edward_Chappell.jpg","images/people/John_Grantham.jpg","images/people/Robert_Bright.jpg","images/people/Samuel_Hall.jpg","images/people/William_Fairbairn.jpg","images/people/William_Symonds.jpg","images/ships/Great_Britain.jpg","images/ships/Great_Eastern.jpg","images/ships/Great_Western.jpg","images/ssgb_logo.png","components/Popover.test.js","components/SearchBar.module.css","components/ShipOverlay.module.css","components/ShipSelector.test.js","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/SourceOverlay.test.js","components/TextButton.test.js","components/ToggleButton.js","components/ToggleButton.module.css","components/WarningOverlay.module.css","gb_text.md","ge_text.md","gw_text.md","help_text.md","model/Affiliations.test.js","model/Businesses.test.js","model/DateRange.test.js","model/People.test.js","model/Positions.test.js","model/Projects.test.js","model/RoughDate.test.js","model/Source.test.js","model/Errors.js","model/DateRange.js","components/BigBox.js","components/TextButton.js","model/Social.js","components/VBox.js","components/HBox.js","components/ImageCarousel.module.css","images sync /^/.//.*$","components/__snapshots__/Overlay.test.js.snap","components/__snapshots__/SearchOverlay.test.js.snap","components/__snapshots__/ShipSelector.test.js.snap","components/BioOverlay.js","model/RoughDate.js","model/get_id.js"],"names":["Overlay","props","useState","React","open","setOpen","style","styles","overlay","useBackground","overlayNoBackground","data-testid","className","onClick","toggleOverlay","e","stopPropagation","children","defaultProps","Popover","node","name","label","social","readMoreButton","emitReadMore","clearPopup","id","centerButton","emitSetCenter","isAnchor","bio","getBiographies","getByID","replace","trim","split","left","top","innerWidth","window","innerHeight","x","y","popOver","width","popoverWidth","header","closeButton","background","border","ShipButton","ship","getName","ship_button","func","emitSetShip","selected","ship_button_selected","emitShowShip","href","ShipSelector","projects","ssGW","getByName","ssGB","ssGE","state","ships","current","this","setState","buttons","forEach","push","key","s","slotSetShip","container","content","Component","_generate_person_uid","uid","uuidv4","substring","length","People","registry","_names","_isAPeopleObject","load","hook","_getHook","_updateHooks","names","Object","keys","sort","output","get","setSelected","setHighlighted","item","Person","_isAPersonObject","person","canAdd","existing","error","console","merge","getID","clone","KeyError","MissingError","toLowerCase","results","indexOf","isNonContributingEngineer","people","connections","nConnections","funcs","i","items","timeline","getTimeLine","anchor","nodes","getNode","is_anchor","data","array","element","add","value","c","lodash","cloneDeep","unDry","v","Dry","registerClass","val","def","_filterWindow","values","ret","dates","intersect","_filterProject","project","titles","firstnames","surnames","suffixes","positions","affiliations","sources","highlighted","alive","gender","notes","orig_name","weight","group","match_and","ids","seen","index","source","nsources","source_id","includes","nprojects","new_projects","_isADateRangeObject","DateRange","getAlive","is_highlighted","is_selected","ValueError","join","parts","part","getTitle","getFirstName","getSurname","getSuffix","n","projectID","scores","getStart","getEnd","start","end","project_id","projectKey","position","getCanonical","positionGroups","title","initials","getInitials","shape","getWeight","type","getHighlighted","getSelected","getProjectID","is_nc_engineer","is_engineer","isEngineer","_generate_business_uid","Businesses","_isABusinessesObject","Business","_isABusinessObject","business","businesses","_generate_position_uid","Positions","_isAPositionsObject","Position","_isAPositionObject","_isApositionObject","canonical","makeCanonical","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","Affiliation","_isAAffiliationObject","affiliation","_generate_source_uid","Sources","_isASourcesObject","Source","_isASourceObject","description","getDescription","log","date","force","RoughDate","_isARoughDateObject","isNull","getDate","ne","remove_page_numbers","_generate_project_uid","Projects","_isAProjectsObject","Project","_isAProjectObject","url","duration","getDuration","hasBounds","getEarliestStart","toDate","getLatestEnd","start_time","toMoment","end_time","score_by_influence","edges","getAnchor","anchor_id","get_id","getConnections","score","edge_count","areConnected","sort_index","score_by_connections","size_by_influence","min_size","max_size","size","size_by_connections","SourceOverlay","onChange","bind","isVisible","currentImage","elemCodes","imageElements","sourceIDs","map","filename","imageFilenames","src","require","alt","imageID","showArrows","sourceID","bioButton","toggleBioOverlay","textColor","hoverColor","fontSize","padding","fontFamily","nameHeader","body","sourceName","biography","divider","imageSection","slidesPerPage","arrows","arrowLeft","icon","faAngleDoubleLeft","arrowLeftDisabled","faAngleLeft","arrowRight","faAngleDoubleRight","arrowRightDisabled","faAngleRight","addArrowClickHandler","ForceGraph","popup","updateSize","emitPopup","componentDidUpdate","containerRef","createRef","graph","ForceGraphD3","addEventListener","removeEventListener","draw","containerRect","getBoundingClientRect","height","update","drawFromScratch","ref","left_logo","uob_logo_image","right_logo","bi_logo_image","_null_function","constrain","w","r","isNaN","getTextSize","d","context","_canvas","document","createElement","getContext","font","text","use_initials","measureText","parent","updateLink","updateNodeText","updateNode","updateGraph","drag","signalClicked","indirectConnectionsVisible","hideUnconnectedNodes","slice","_size_changed","_graph_changed","_is_running","_is_drawn","find","gotConnections","h","new_graph","getGraph","l","edge","found_source","found_target","target","target_id","old_graph","_graph","new_node","found","m","old_node","vx","vy","Math","random","size_changed","prototype","hasOwnProperty","call","simulation","_simulation","d3","on","fx","fy","restart","fixed","_mainGroup","select","selectAll","enter","append","attr","radius","min","node_selected","node_business_highlighted","node_business","node_nc_engineer_highlighted","node_nc_engineer","node_engineer_highlighted","node_engineer","node_highlighted","node_text_select","node_text_highlight","node_text","link","any_highlighted","link_highlight","linkInvisible","stop","alpha","alphaTarget","alphaDecay","force_spiral","strength","_link","undefined","dx","dy","dr","sqrt","_node","_label","textSize","delta","remove","mainGroup","svg_view","spiralSimulation","_constant","_return_index","j","strengths","indexes","points_x","points_y","initialize","Array","floor","max_index","max","angle","min_x","max_x","min_y","max_y","asin","cos","sin","center_x","center_y","scale_x","scale_y","_","arguments","module","exports","LabelButton","button","HowDoIOverlay","markdown","getHelpText","close","image","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","AboutOverlay","textContainer","intro","aboutText","introBody","sectionHeader","_generate_connection_uid","Connections","_connections","_isAConnectionsObject","Connection","_isAConnectionObject","connection","connection_id","id0","getNode0ID","id1","getNode1ID","conns","nnodes","_add","item0","item1","areNodesVisible","toEdge","_mergeSources","other","n0","n1","shared","correspondances","node0","getNode0","node1","getNode1","nProjects","correspondences","weights","getNode0Name","getNode1Name","color","getColorFromType","_generate_note_uid","Notes","_isANotesObject","Note","_isANoteObject","note","getText","Biographies","bios","_isABiographiesObject","ImageCarousel","saveSvgAsPng","MenuLabel","menu_label","MenuButton","menu_button","MainMenu","wrapperRef","setWrapperRef","handleClickOutside","event","contains","unconnectedNodesText","unconnectedNodesVisible","ncEngineersText","ncEngineersVisible","panel","emitToggleSpiralOrder","spiralOrder","emitToggleNodeSize","sizeText","emitToggleFilter","filterText","emitToggleUnconnectedNodesVisible","emitToggleNCEngineersVisible","emitToggleSearch","searchText","emitResetFilters","moment","format","getElementById","scale","encoderOptions","backgroundColor","SearchBar","emitUpdate","preventDefault","search_text","clear_button","link_button","clearButton","searchHighlightAvailable","highlight","searchHighlightToggled","link_style","linkButton","linkButtonHighlighted","emitSearchHighlightToggled","form","onSubmit","onSubmitHandler","input","onChangeHandler","placeholder","ShipOverlay","getProjectText","getImage","SlidingPanel","isOpen","defaultSize","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","maxWidth","maxHeight","SlideFromBottom","bottomContainer","topContainer","SlideFromTop","leftContainer","SlideFromLeft","in","timeout","classNames","unmountOnExit","WarningOverlay","afterEach","cleanup","describe","test","render","expect","firstChild","toBeTruthy","analysisButton","screen","queryByText","closest","analyisPanel","queryByTestId","toBeNull","fireEvent","click","textContent","toMatch","gbButton","resetButton","reload","location","defineProperty","configurable","jest","fn","toHaveBeenCalledTimes","closeFn","closebutton","toHaveBeenCalled","queryAllByText","toggleOverlayFn","toggleSourceOverlayFn","testString","parse","graphData","getPeople","toggleSourceOverlay","sourceButtonText","queryAllByTestId","sourceButton","getByAltText","SocialApp","Social","highlighted_item","selected_item","filterUnconnectedNodes","filterNCEngineers","commercialFiltered","engineersFiltered","nodeSize","commercialNodeFilter","engineerNodeFilter","connectedNodes","selectedShip","selectedShipID","isOverlayOpen","searchIncludeBios","searchHighlightLinks","menuVisible","warningVisible","imageData","setImage","getProjects","fetch","gw_text","then","setProjectText","gb_text","ge_text","help_text","setHelpText","toggleFilter","spiralOrders","freeze","Influence","nodeSizes","setSizingFunction","findInvestorsAndEngineers","setScoringFunction","socialGraph","setAnchor","setOverlay","closeOverlay","setFilter","setDefaultImage","searchWasItem","selectSearchMatching","resetAllFilters","filterNonContributingEngineers","slotToggleFilterCommercial","slotToggleFilterEngineer","cachedSearch","clearSelections","clearHighlights","performSearch","setWindow","entity","getPositions","namedPosition","positionID","order","setSpiralOrder","setNodeSize","overlayItem","include_bios","highlight_links","toggled","menu","slotShowMenu","search","slotUpdateSearch","slotSearchHighlightToggled","help","slotClicked","slotSetAnchor","slotReadMore","spiral_button","toggleSpiralOrder","slotShowShip","size_button","toggleNodeSize","filter_text","filter_button","toggleEngCommFilter","unconnected_button","slotToggleUnconnectedNodes","noncontrib_button","slotToggleNonContributingEngineers","toggle_search","slotSearchBiosToggled","search_button","left_side","right_side","mainmenu","slotCloseMenu","searchHighlight","searchBios","slotClearFilters","emitToggleFilterCommercial","emitToggleFilterEngineering","emitSearchBiosToggled","warning_popover","slotCloseWarning","ui_main","fullscreen","it","asFragment","toMatchSnapshot","OverlayWrapper","socialSources","getSources","isSourceOverlayOpen","isBioOverlayOpen","shipID","getIDs","toggleFn","clearPopupsFn","togglePopover","clearPopups","toBeFalsy","shipFilterFn","shipFilter","getByText","toBeInTheDocument","testFn","ToggleButton","emitToggled","untoggled","name1","p1","name2","p2","toStrictEqual","p","stringify","a","hasStart","hasEnd","getStartDate","getEndDate","b","eq","toString","union","url1","url2","getURL","getEarliest","getLatest","m1","toDateRange","m2","args","DuplicateError","_clean","both","isInstant","getStartString","getEndString","toSimpleString","my_start","other_start","gt","my_end","other_end","lt","getDelta","tmp","BigBox","bigbox","TextButton","_push","list","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","scoring_function","sizing_function","filter_unconnected","filter_nc_engineers","images","default_image","project_text","_rebuilding","_isASocialObject","getHook","biographies","clearCache","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","fitted","_fitWindow","filtered","getNodeFilters","filterUnconnected","getEdgeFilters","f","_getType","getBusinesses","result","highlightConnections","highlight_connections","clear_previous","getAffiliations","projectFilter","got_anchor","isString","isArray","category","getNodes","concat","getEdges","counts","add_count","count","getScoringFunction","getSizingFunction","added","getNotes","_wrap","child","VBox","vbox","HBox","hbox","BioOverlay","getConnectionsInvolving","getAffiliationSources","getCorrespondanceSources","source_parts","source_item","source_name","bio_heading","source_heading","_toDate","_isAMomentObject","isValid","_get_min","d1","d2","_get_max","raw","toISOString","isFuzzy","getMonth","getFullYear","isExact","s1","s2","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString"],"mappings":"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","file":"static/js/3.01a0054f.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./Overlay.module.css\";\n\n// Based on https://stackoverflow.com/a/55003301\nfunction Overlay(props) {\n  const { useState } = React;\n  const [open, setOpen] = useState(true);\n  if (open) {\n    let style = styles.overlay;\n\n    if (!props.useBackground) {\n      style = styles.overlayNoBackground;\n    }\n\n    return (\n      <div\n        data-testid=\"overlay\"\n        className={style}\n        onClick={() => {\n          props.toggleOverlay();\n          setOpen(false);\n        }}\n      >\n        <div\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {props.children}\n        </div>\n      </div>\n    );\n  }\n  return null;\n}\n\nOverlay.defaultProps = {\n  useBackground: true,\n};\n\nexport default Overlay;\n\nOverlay.propTypes = {\n  toggleOverlay: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n  useBackground: PropTypes.bool,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport TextButton from \"./TextButton\";\n\nimport VBox from \"./VBox\";\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./Popover.module.css\";\n\n\nfunction _truncate(str) {\n  const array = str.trim().split(\".\");\n  return array[0] + \"...\";\n}\n\n\nfunction Popover(props) {\n  const node = props.node;\n\n  const name = node.label;\n  const social = props.social;\n\n  let readMoreButton = null;\n\n  if (props.emitReadMore) {\n    readMoreButton = (\n      <TextButton\n        onClick={() => {\n          props.clearPopup();\n          props.emitReadMore(node.id);\n        }}\n      >\n        Read more\n      </TextButton>\n    );\n  }\n\n  let centerButton = null;\n\n  if (props.emitSetCenter) {\n    if (social.isAnchor(node.id)) {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(null);\n          }}\n        >\n          Clear center\n        </TextButton>\n      );\n    }\n    else {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(node.id);\n          }}\n        >\n          Make center\n        </TextButton>\n      );\n    }\n  }\n\n  // Get biography for node\n  let bio = social.getBiographies().getByID(node.id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  } else {\n    bio = bio.replace(name + \".  \", \"\");\n    bio = _truncate(bio);\n  }\n\n  // Get the location of the click within the viewport so we can open the popover\n  // in the correct location\n  const innerWidth = window.innerWidth; // px\n  const innerHeight = window.innerHeight; // px\n\n  const popoverHeight = 170;\n  const popoverWidth = 200;\n\n  let left;\n  if (node.x > innerWidth - popoverWidth) {\n    left = node.x - popoverWidth;\n  } else {\n    left = node.x;\n  }\n\n  if (left < 10) {\n    left = 10;\n  }\n\n  left = left + \"px\";\n\n  let top;\n  if (node.y > innerHeight - popoverHeight) {\n    top = node.y - popoverHeight + 50;\n\n    if (top < 50) { top = 50; }\n  } else {\n    top = node.y;\n  }\n\n  if (innerHeight < 350) {\n    top = 20;\n  }\n  else if (top > innerHeight - 50 - popoverHeight) {\n    top = innerHeight - 50 - popoverHeight;\n  }\n\n  top = top + \"px\";\n\n  return (\n    <div\n      className={styles.popOver}\n      style={{\n        top: top, left: left,\n        width: popoverWidth + \"px\"\n        }}\n    >\n      <VBox>\n        <HBox>\n          <BigBox><div className={styles.header}>{name}</div></BigBox>\n          <div className={styles.closeButton}>\n            <button onClick={props.clearPopup}\n                    style={{ background: \"none\", border: \"none\" }}>\n              x\n            </button>\n          </div>\n        </HBox>\n        <BigBox>\n          <div className={styles.bio}>{bio}</div>\n        </BigBox>\n        <HBox>\n          {readMoreButton}\n          <div>&nbsp;</div>\n          {centerButton}\n        </HBox>\n      </VBox>\n    </div>\n  );\n}\n\nPopover.propTypes = {\n  social: PropTypes.object.isRequired,\n  node: PropTypes.object.isRequired,\n  clearPopup: PropTypes.func.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default Popover;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\n\nimport styles from \"./ShipSelector.module.css\";\nimport { startsWith } from \"lodash\";\n\nfunction ShipButton(props) {\n  let name = props.ship.getName();\n\n  name = name.replace(\"SS \", \"\");\n\n  let style = styles.ship_button;\n  let func = props.emitSetShip;\n\n  if (props.selected) {\n    style = styles.ship_button_selected;\n    func = props.emitShowShip;\n  }\n\n  return (\n    <button\n      className={style}\n      href=\"#\"\n      onClick={()=>{func(props.ship)}}\n    >\n      {name}\n    </button>);\n}\n\nclass ShipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const projects = this.props.projects;\n\n    /// There are three ships, get their IDs and put in chronological order\n    const ssGW = projects.getByName(\"SS Great Western\");\n    const ssGB = projects.getByName(\"SS Great Britain\");\n    const ssGE = projects.getByName(\"SS Great Eastern\");\n\n    this.state = {\n      ships: [ssGW, ssGB, ssGE ],\n      current: ssGW,\n    }\n\n    // We want the graph to start with the GW selected\n    this.props.emitSetShip(ssGW);\n  }\n\n  slotSetShip(ship) {\n    this.setState({ current: ship });\n    this.props.emitSetShip(ship);\n  }\n\n  render() {\n\n    let buttons = [];\n\n    this.state.ships.forEach((ship) => {\n      buttons.push(\n        <ShipButton\n          key={ship}\n          ship={ship}\n          emitSetShip={(s) => { this.slotSetShip(s) }}\n          emitShowShip={this.props.emitShowShip}\n          selected={ship === this.state.current}\n        />);\n    });\n\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.content}>\n          <HBox>\n            {buttons}\n          </HBox>\n        </div>\n      </div>\n    );\n  }\n}\n\nShipButton.propTypes = {\n  ship: PropTypes.object.isRequired,\n  selected: PropTypes.bool.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nShipSelector.propTypes = {\n  projects: PropTypes.object.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nexport default ShipSelector;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Person from \"./Person\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_person_uid() {\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length - 7);\n}\n\nclass People {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Person || item._isAPersonObject;\n  }\n\n  add(person) {\n    if (!this.canAdd(person)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(person.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    } else {\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Person || name._isAPersonObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Person matches '${name}. Available People are '${keys}'`);\n  }\n\n  filterNonContributingEngineers() {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (!person.isNonContributingEngineer()){\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let person = this.state.registry[key];\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        for (let i = 0; i < funcs.length; ++i) {\n          person = funcs[i](person);\n          if (!person) {\n            break;\n          }\n        }\n\n        if (person) {\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (person) {\n        let timeline = person.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    if (anchor && anchor.getID) {\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        let node = null;\n        if (key === anchor) {\n          node = person.getNode({ is_anchor: true });\n        } else {\n          node = person.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  get(id) {\n    let person = this.state.registry[id];\n\n    if (!person) {\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPeople.unDry = function (value) {\n  let people = new People();\n  people.state = value;\n  people._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n};\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport positionGroups from \"../data/positionGroups.json\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props) {\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      highlighted: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n      weight: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item) {\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group, match_and=true) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    if (match_and) {\n      return Object.keys(seen).length === Object.keys(group).length;\n    }\n    else {\n      return Object.keys(seen).length > 0;\n    }\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let sources = _filterProject(this.state.sources, project);\n    let weight = _filterProject(this.state.weight, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n      weight !== this.state.weight || sources !== this.state.sources) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person.state.sources = sources;\n      person.state.weight = weight;\n      person.state.projects = new_projects;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window) {\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n      this.state.is_highlighted = false;\n      this.state.is_selected = false;\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\") {\n        throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive() {\n    return this.state.alive;\n  }\n\n  getFirstName() {\n    if (this.state.firstnames) {\n      return this.state.firstnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getTitle() {\n    if (this.state.titles) {\n      return this.state.titles.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSurname() {\n    if (this.state.surnames) {\n      return this.state.surnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSuffix() {\n    if (this.state.suffixes) {\n      return this.state.suffixes.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getName() {\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part) {\n      parts.push(part);\n    }\n\n    if (parts.length > 0) {\n      return parts.join(\" \");\n    } else {\n      return \"null\";\n    }\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.firstnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    this.state.surnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getPositions() {\n    // Returns the positions object for each project\n    return this.state.positions;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getBorn() {\n    if (this.state.alive) {\n      return this.state.alive.getStart();\n    } else {\n      return null;\n    }\n  }\n\n  getDied() {\n    if (this.state.alive) {\n      return this.state.alive.getEnd();\n    } else {\n      return null;\n    }\n  }\n\n  getTimeLine() {\n    const alive = this.getAlive();\n\n    if (!alive) {\n      return null;\n    } else {\n      return {\n        start: alive.getStart(),\n        end: alive.getEnd(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    }\n  }\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // return the first project weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n\n    return this.state.weight[project_id];\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getProjectWeight(projectKey) {\n    const weight = this.state.weight[projectKey];\n\n    if (!weight) {\n      console.error(\"No weight for \" + this.getName() + this.getID() + \" for project with key \" + projectKey);\n      return 1;\n    }\n\n    return weight;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // return the first project weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n\n    return this.state.weight[project_id];\n  }\n\n  isEngineer(project_id = null) {\n    if (project_id === null) {\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical().toLowerCase()\n                           .replace(/\\s/g, \"\")\n                           .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n      if (positionGroups[\"engineering\"][\"members\"].includes(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  isNonContributingEngineer(project_id = null) {\n    if (project_id === null) {\n      // return this status with the first project\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical();\n      if (name.includes(\"non-cont\")) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"circle\",\n      weight: this.getWeight(),\n      type: \"person\",\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      project: this.getProjectID(),\n      is_nc_engineer: this.isNonContributingEngineer(),\n      is_engineer: this.isEngineer(),\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPerson.unDry = function (value) {\n  return new Person(value);\n};\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Business from \"./Business\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_business_uid() {\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length - 7);\n}\n\nclass Businesses {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Business || item._isABusinessObject;\n  }\n\n  add(business) {\n    if (!this.canAdd(business)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(business.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    } else {\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Business || name._isABusinessObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Business matches '${name}. Available Businesses are '${keys}'`);\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let business = this.state.registry[key];\n        registry[key] = business;\n        names[business.getName()] = key;\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        for (let i = 0; i < funcs.length; ++i) {\n          business = funcs[i](business);\n          if (!business) {\n            break;\n          }\n        }\n\n        if (business) {\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (business) {\n        let timeline = business.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        let node = null;\n        if (key === anchor) {\n          node = business.getNode({ is_anchor: true });\n        } else {\n          node = business.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let business = this.state.registry[id];\n\n    if (!business) {\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusinesses.unDry = function (value) {\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n};\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      positions: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n      weight: {},\n      is_highlighted: false,\n      is_selected: false,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item) {\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let weight = _filterProject(this.state.weight, project);\n    let sources = _filterProject(this.state.sources, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n        weight !== this.state.weight || sources !== this.state.sources) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business.state.sources = sources;\n      business.state.weight = weight;\n      business.state.projects = new_projects;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterProject(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.positions = setState(state.positions, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // use the first project's weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n    return this.state.weight[project_id];\n  }\n\n  toString() {\n    return `Business(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.name.split(\" \").forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getPositions() {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"square\",\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      weight: this.getWeight(),\n      type: \"business\",\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusiness.unDry = function (value) {\n  return new Business(value);\n};\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Position from \"./Position\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_position_uid() {\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length - 7);\n}\n\nclass Positions {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  items() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Position || item._isAPositionObject;\n  }\n\n  add(position) {\n    if (!this.canAdd(position)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(position.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    } else {\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No position with name ${name}`);\n    }\n  }\n\n  getNameByID(id) {\n    return this.get(id).getName();\n  }\n\n  find(name) {\n    if (name instanceof Position || name._isApositionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n  }\n\n  get(id) {\n    let position = this.state.registry[id];\n\n    if (!position) {\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPositions.unDry = function (value) {\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n};\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw new ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Position(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getCanonical() {\n    return this.state.canonical;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPosition.unDry = function (value) {\n  return new Position(value);\n};\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Affiliation from \"./Affiliation\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_affiliation_uid() {\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length - 7);\n}\n\nclass Affiliations {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Affiliation || item._isAAffiliationObject;\n  }\n\n  add(affiliation) {\n    if (!this.canAdd(affiliation)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(affiliation.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    } else {\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Affiliation || name._isAAffiliationObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No affiliation matches '${name}. Available Affiliations are '${keys}'`);\n  }\n\n  get(id) {\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation) {\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliations.unDry = function (value) {\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n};\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item) {\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliation.unDry = function (value) {\n  return new Affiliation(value);\n};\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Source from \"./Source\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_source_uid() {\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length - 7);\n}\n\nclass Sources {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Source || item._isASourceObject;\n  }\n\n  add(source) {\n    if (!this.canAdd(source)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(source.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    } else {\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      console.error(`No source with name ${name}`);\n    }\n  }\n\n  search(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description) {\n        description = \"\";\n      }\n\n      try {\n        if (item.getName().toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        } else if (description.toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  find(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No source matches '${name}. Available sources are '${keys}'`);\n  }\n\n  get(id) {\n    let source = this.state.registry[id];\n\n    if (!source) {\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSources.unDry = function (value) {\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n};\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item) {\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getDate() {\n    return this.state.date;\n  }\n\n  updateDate(date, force = false) {\n    if (!(date instanceof RoughDate || date._isARoughDateObject)) {\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()) {\n      return false;\n    }\n\n    if (this.getDate().isNull()) {\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)) {\n      if (force) {\n        this.state.date = this.getDate().merge(date);\n        return true;\n      } else {\n        console.log(`Disagreement of date for ${this}: ${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Source(${this.getName()})`;\n  }\n\n  getName(remove_page_numbers = false) {\n    if (remove_page_numbers) {\n      let name = this.state.name;\n\n      if (name.includes(\"-\")) {\n        name = name.split(\"-\")[0];\n      }\n\n      if (name.includes(\",\")) {\n        name = name.split(\",\")[0];\n      }\n\n      return name;\n    }\n    else {\n      return this.state.name;\n    }\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSource.unDry = function (value) {\n  return new Source(value);\n};\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Project from \"./Project\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_project_uid() {\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length - 7);\n}\n\nclass Projects {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  projects() {\n    return this._names;\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Project || item._isAProjectObject;\n  }\n\n  add(project) {\n    if (!this.canAdd(project)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(project.getName());\n    } catch (error) {\n      console.error(\"Cannot get project\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    } else {\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Project || name._isAProjectObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No project matches '${name}. Available projects are '${keys}'`);\n  }\n\n  get(id) {\n    let project = this.state.registry[id];\n\n    if (!project) {\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let project = this.state.registry[key];\n      if (project) {\n        let timeline = project.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProjects.unDry = function (value) {\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n};\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      description: null,\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item) {\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({ value: state.duration });\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Project(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getURL() {\n    return this.state.url;\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  getTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start: duration.getEarliestStart().toDate(),\n        end: duration.getLatestEnd().toDate(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getNewTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start_time: duration.getEarliestStart().toMoment(),\n        end_time: duration.getLatestEnd().toMoment(),\n        project_id: this.getID(),\n        title: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProject.unDry = function (value) {\n  return new Project(value);\n};\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","import get_id from \"./get_id\";\n\n/** Score by the influence of each node */\nfunction score_by_influence(nodes, edges, social) {\n  let scores = [];\n\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.weight + node.edge_count / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\n/** Score by the number of connections only */\nfunction score_by_connections(nodes, edges, social) {\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  let scores = [];\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.edge_count + node.weight / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  // sort the scores such that the most connected nodes are first\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\nexport {\n  score_by_connections as default,\n  score_by_connections,\n  score_by_influence\n};\n","\n/** Size each node by the influence of each node. Calculates the\n *  weight for a node and returns it\n */\nfunction size_by_influence(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.weight;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\n/** Size each node by the number of connections only */\nfunction size_by_connections(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.edge_count;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\nexport {\n  size_by_connections as default,\n  size_by_connections,\n  size_by_influence\n};\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Carousel from \"@brainhubeu/react-carousel\";\n\nimport styles from \"./SourceOverlay.module.css\";\nimport \"@brainhubeu/react-carousel/lib/style.css\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleLeft, faAngleDoubleLeft, faAngleDoubleRight, faAngleRight } from \"@fortawesome/free-solid-svg-icons\";\n\nimport TextButton from \"./TextButton\";\n\nimport imageFilenames from \"../data/sourceImageFilenames.json\";\n\nclass SourceOverlay extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n\n    this.state = { isVisible: false, currentImage: 0, elemCodes: [], imageElements: [] };\n\n    this.state.imageElements = this.props.sourceIDs.map((id) => {\n      const filename = imageFilenames[id][\"filename\"];\n\n      this.state.elemCodes.push(id);\n\n      return <img data-testid=\"sourceImage\" key={id} src={require(`../images/${filename}`)} alt=\"Manuscript\" />;\n    });\n  }\n\n  onChange(imageID) {\n    this.setState({ currentImage: imageID });\n  }\n\n  render() {\n    const sources = this.props.sources;\n    const person = this.props.person;\n\n    let showArrows = this.state.elemCodes.length > 1 ? true : false;\n\n    const sourceID = this.state.elemCodes[this.state.currentImage];\n    const source = sources.get(sourceID);\n\n    const bioButton = (\n      <TextButton\n        onClick={this.props.toggleBioOverlay}\n        textColor=\"black\"\n        hoverColor=\"#808080\"\n        fontSize=\"1.8vh\"\n        padding=\"2px 2px 2px 2px\"\n        fontFamily=\"Playfair Display Medium\"\n      >\n        Open biography\n      </TextButton>\n    );\n\n    return (\n      <div data-testid=\"sourceOverlay\" className={styles.container}>\n        <div className={styles.closeButton}>\n          <button onClick={this.props.toggleOverlay} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n            x\n          </button>\n        </div>\n        <div className={styles.nameHeader}>{person.getName()}</div>\n\n        <div className={styles.body}>\n          <div className={styles.sourceName}>{source.getName()}</div>\n          <div>{source.getDescription()}</div>\n        </div>\n        <div className={styles.biography}>{bioButton}</div>\n        <div className={styles.divider} />\n        <div className={styles.imageSection}>\n          <Carousel\n            value={this.state.currentImage}\n            onChange={this.onChange}\n            slidesPerPage={1}\n            arrows={showArrows}\n            arrowLeft={<FontAwesomeIcon icon={faAngleDoubleLeft} />}\n            arrowLeftDisabled={<FontAwesomeIcon icon={faAngleLeft} />}\n            arrowRight={<FontAwesomeIcon icon={faAngleDoubleRight} />}\n            arrowRightDisabled={<FontAwesomeIcon icon={faAngleRight} />}\n            addArrowClickHandler\n          >\n            {this.state.imageElements}\n          </Carousel>\n        </div>\n      </div>\n    );\n  }\n}\n\nSourceOverlay.propTypes = {\n  sources: PropTypes.object.isRequired,\n  sourceIDs: PropTypes.array.isRequired,\n  toggleOverlay: PropTypes.func.isRequired,\n  toggleBioOverlay: PropTypes.func.isRequired,\n  person: PropTypes.object.isRequired,\n};\n\nexport default SourceOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport Popover from \"./Popover\";\nimport ForceGraphD3 from \"./d3/ForceGraph.d3.js\";\n\nimport styles from \"./ForceGraph.module.css\";\n\n\nclass ForceGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      popup: null,\n    };\n\n    this.updateSize = this.updateSize.bind(this);\n    this.emitPopup = this.emitPopup.bind(this);\n    this.clearPopup = this.clearPopup.bind(this);\n    this.componentDidUpdate = this.componentDidUpdate.bind(this);\n\n    this.containerRef = React.createRef();\n\n    this.graph = new ForceGraphD3(this, props);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  componentDidUpdate() {\n    this.graph.emitPopup = this.emitPopup;\n    this.graph.clearPopup = this.clearPopup;\n    this.graph.draw();\n  }\n\n  updateSize() {\n    const containerRect = this.containerRef.current.getBoundingClientRect();\n\n    if (this.containerRef && this.graph) {\n      let width = containerRect.width;\n      let height = containerRect.height;\n\n      this.graph.update({\n        width: width,\n        height: height\n      });\n      this.graph.drawFromScratch();\n    }\n  }\n\n  emitPopup(node) {\n    this.setState({ popup: node });\n  }\n\n  clearPopup() {\n    this.setState({ popup: null });\n  }\n\n  render() {\n    this.graph.update(this.props);\n\n    let popup = null;\n\n    if (this.state.popup) {\n      let node = this.state.popup;\n\n      popup = <Popover\n        node={node}\n        social={this.props.social}\n        clearPopup={this.clearPopup}\n        emitSetCenter={this.props.emitSetCenter}\n        emitReadMore={this.props.emitReadMore}\n      />;\n    }\n\n    return (\n      <div ref={this.containerRef} className={styles.container}>\n        <div className={styles.left_logo}>\n          <img src={require(\"../images/uob_logo.png\")}\n            alt=\"University of Bristol Logo\"\n            className={styles.uob_logo_image}\n          />\n        </div>\n        <div className={styles.right_logo}>\n          <img src={require(\"../images/bi_logo.png\")}\n            alt=\"Bristol Institute Logo\"\n            className={styles.bi_logo_image}\n          />\n        </div>\n        <div className={this.graph.className()}>\n          {popup}\n        </div>\n      </div>\n    );\n  }\n}\n\nForceGraph.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default ForceGraph;\n","\nimport * as d3 from \"d3\";\n\nimport React from \"react\";\n\nimport lodash from \"lodash\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\n\nimport force_spiral from \"./force_spiral.js\";\n\nimport styles from \"../ForceGraph.module.css\";\n\nfunction _null_function() {}\n\nfunction constrain(x, w, r = 20) {\n  if (isNaN(x)) {\n    return 0.5 * w;\n  }\n  else {\n    if (x < r) { return r; }\n    else if (x > w - r) { return w - r }\n    else { return x; }\n  }\n}\n\nfunction getTextSize(d) {\n  let canvas = getTextSize._canvas || (getTextSize._canvas = document.createElement(\"canvas\"));\n  let context = canvas.getContext(\"2d\");\n\n  let height = 12;\n\n  if (d.selected) {\n    context.font = \"12pt Domine\";\n  } else {\n    context.font = \"8pt Domine\";\n    height = 8;\n  }\n\n  let text = d.label;\n\n  if (d.use_initials) {\n    text = d.initials;\n  }\n\n  let metrics = context.measureText(text);\n\n  return [metrics.width, height];\n}\n\n/* eslint-disable react/no-direct-mutation-state */\nclass ForceGraphD3 extends React.Component {\n  constructor(parent, props) {\n    super(props);\n    this.updateLink = this.updateLink.bind(this);\n    this.updateNodeText = this.updateNodeText.bind(this);\n    this.updateNode = this.updateNode.bind(this);\n    this.draw = this.draw.bind(this);\n    this.drawFromScratch = this.drawFromScratch.bind(this);\n    this.update = this.update.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n\n    this.drag = this.drag.bind(this);\n    this.parent = parent;\n\n    // Generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {\n      width: null,\n      height: null,\n      social: null,\n      signalClicked: _null_function,\n      indirectConnectionsVisible: false,\n      hideUnconnectedNodes: false,\n      uid: uid.slice(uid.length - 8),\n    };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n    this._is_drawn = false;\n\n    this.update(props);\n  }\n\n  getNodeBio(id) {\n    return this.state.social.getBiographies().getByID(id);\n  }\n\n  getNodeConnections(id) {\n    return this.state.social.getConnections().find(id);\n  }\n\n  gotConnections(id) {\n    return this.state.social.getConnections().gotConnections(id);\n  }\n\n  updateGraph(social) {\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h) {\n      return;\n    }\n\n    let new_graph = null;\n\n    if (social) {\n      new_graph = social.getGraph();\n    }\n\n    // The social object will cache the 'getGraph' result, meaning\n    // that any change in this object signals that the graph needs\n    // to be redrawn\n    if (new_graph !== this.state.graph) {\n      //save the cached graph\n      this.state.graph = new_graph;\n\n      // This view needs to clone its own copy of the graph, as\n      // D3 will update the graph object. We need to clone in case\n      // two ForceGraph.d3 views are viewing the same Social graph\n      new_graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in new_graph.edges) {\n        let edge = new_graph.edges[l];\n\n        let found_source = false;\n        let found_target = false;\n\n        for (let n in new_graph.nodes) {\n          let node = new_graph.nodes[n];\n          if (edge.source === node.id) {\n            edge.source = node;\n            edge.source_id = node.id;\n            found_source = true;\n          } else if (edge.target === node.id) {\n            edge.target = node;\n            edge.target_id = node.id;\n            found_target = true;\n          }\n\n          if (found_source && found_target) { break; }\n        }\n      }\n\n      // does this node already have coordinates? If not then they\n      // will need to be random\n      let old_graph = this._graph;\n\n      if (!old_graph) {\n        old_graph = { nodes: [] };\n      }\n\n      for (let n in new_graph.nodes) {\n        let new_node = new_graph.nodes[n];\n        let found = false;\n\n        for (let m in old_graph.nodes) {\n          let old_node = old_graph.nodes[m];\n          if (old_node.id === new_node.id) {\n            new_node.x = old_node.x;\n            new_node.y = old_node.y;\n            new_node.vx = old_node.vx;\n            new_node.vy = old_node.vy;\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          new_node.x = w * Math.random();\n          new_node.y = h * Math.random();\n          new_node.vx = 0.0;\n          new_node.vy = 0.0;\n        }\n      }\n\n      this._graph = new_graph;\n      this._graph_changed = true;\n    }\n  }\n\n  update(props) {\n    let size_changed = false;\n\n    if (props.indirectConnectionsVisible !== this.state.indirectConnectionsVisible) {\n      this.state.indirectConnectionsVisible = props.indirectConnectionsVisible;\n      this._graph_changed = true;\n    }\n\n    let hasWidth = Object.prototype.hasOwnProperty.call(props, \"width\");\n\n    if (hasWidth) {\n      if (this.state.width !== props.width) {\n        this.state.width = props.width;\n        // this.setState({ width: props.width });\n        size_changed = true;\n      }\n    }\n\n    let hasHeight = Object.prototype.hasOwnProperty.call(props, \"height\");\n\n    if (hasHeight) {\n      if (this.state.height !== props.height) {\n        this.state.height = props.height;\n        // this.setState({ height: props.height });\n        size_changed = true;\n      }\n    }\n\n    if (size_changed) {\n      this._size_changed = true;\n    }\n\n    let hasSignalClicked = Object.prototype.hasOwnProperty.call(props, \"signalClicked\");\n\n    if (hasSignalClicked) {\n      if (this.state.signalClicked) {\n        this.state.signalClicked = props.signalClicked;\n      } else {\n        this.state.signalClicked = _null_function;\n      }\n    }\n\n    let hasSocial = Object.prototype.hasOwnProperty.call(props, \"social\");\n\n    if (hasSocial) {\n      this.updateGraph(props.social);\n    }\n  }\n\n  className() {\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  drag() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        d.fx = d.x;\n        d.fy = d.y;\n      })\n      .on(\"drag\", (d) => {\n        if (!this._is_running) simulation.restart();\n\n        let w = this.state.width;\n        let h = this.state.height;\n\n        d.fx = constrain(d3.event.x, w, d.r);\n        d.fy = constrain(d3.event.y, h, d.r);\n      })\n      .on(\"end\", (d) => {\n        if (!d.fixed) {\n          d.fx = null;\n          d.fy = null;\n        }\n      });\n  }\n\n  updateNode(data) {\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"circle\")\n      )\n      // Here size is the weight given to that entity\n      .attr(\"r\", (d) => {\n        d.radius = Math.min(30, 5 + (0.5 * (d.size * d.size)));\n\n        if (d.size < 1.5) {\n          //d.radius = 3;\n        }\n        else if (d.size < 2.0) {\n          //d.radius = 6 + d.size;\n        } else {\n          //d.radius = 12 + 2 * d.size;\n        }\n        return d.radius;\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node ${styles.node_selected} selected`;\n        }\n        else if (d.type === \"business\") {\n          if (d.highlighted) {\n            return `node ${styles.node_business_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_business}`;\n          }\n        }\n        else if (d.is_nc_engineer) {\n          if (d.highlighted) {\n            return `node ${styles.node_nc_engineer_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_nc_engineer}`;\n          }\n        }\n        else if (d.is_engineer) {\n          if (d.highlighted) {\n            return `node ${styles.node_engineer_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_engineer}`;\n          }\n        }\n        else {\n          if (d.highlighted) {\n            return `node ${styles.node_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node}`;\n          }\n        }\n      })\n      .attr(\"id\", (d) => { return d.id; })\n      .on(\"mousedown\", () => d3.event.stopPropagation())\n      .on(\"click\", (d) => {\n        d3.event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      });\n    //.call(this.drag());\n\n    return node;\n  }\n\n  updateNodeText(data) {\n    let text = this._mainGroup.select(\".node_text-group\").selectAll(\".node_text\");\n\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    let use_initials = true;\n\n    //console.log(`${this.state.width} : ${data.length}`);\n\n    if (data.length < 10) {\n      use_initials = false;\n    }\n    else if (data.length < 25 && this.state.width > 500) {\n      use_initials = false;\n    }\n    else if (data.length < 40 && this.state.width > 768) {\n      use_initials = false;\n    }\n    else if (data.length < 45 && this.state.width > 1000) {\n      use_initials = false;\n    }\n    else if (data.length < 50 && this.state.width > 1200) {\n      use_initials = false;\n    }\n\n    text = text\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"text\"),\n      )\n      .text((d) => {\n        d.use_initials = false;\n\n        if (d.highlighted || d.selected) {\n          return d.label;\n        }\n        else {\n          if (use_initials) {\n            d.use_initials = true;\n            return d.initials;\n          }\n          else {\n            return d.label;\n          }\n        }\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node_text ${styles.node_text_select} selected`;\n        }\n        else if (d.highlighted) {\n          return `node_text ${styles.node_text_highlight} highlighted`;\n        }\n        else {\n          return `node_text ${styles.node_text}`;\n        }\n      })\n      .attr(\"dx\", (d) => {\n        return d.radius + \"px\";\n      })\n      .attr(\"dy\", (d) => {\n        return -1 * (3 + sizeScale * d.radius) + \"px\";\n      })\n      .attr(\"textSize\", (d) => {\n        return getTextSize(d);\n      })\n      .on(\"mousedown\", () => d3.event.stopPropagation())\n      .on(\"click\", (d) => {\n        d3.event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      })\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"id\", (d) => { return d.id; });\n    //.call(this.drag());\n\n    return text;\n  }\n\n  updateLink(data) {\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    let any_highlighted = false;\n\n    data.forEach((item) => {\n      if (item.highlighted) {\n        any_highlighted = true;\n      }\n    });\n\n    link = link\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"path\"),\n      )\n      .attr(\"class\", (d) => {\n        if (d.highlighted) {\n          return `link ${styles.link_highlight} highlighted`;\n        }\n        else {\n          if (any_highlighted) {\n            return `link ${styles.linkInvisible}`;\n          }\n          else {\n            return `link ${styles.link}`;\n          }\n        }\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"source_id\", (d) => {\n        return d.source_id;\n      })\n      .attr(\"target_id\", (d) => {\n        return d.target_id;\n      });\n\n    return link;\n  }\n\n  spiralSimulation() {\n    if (this._simulation) {\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let graph = this._graph;\n\n    let simulation = d3\n      .forceSimulation(graph.nodes)\n      .alpha(1.0)\n      .alphaTarget(0)\n      .alphaDecay(0.075)\n      .force(\"spiral\",\n        force_spiral(w, h)\n          .strength(0.3)\n          .index((d) => {\n            return d.sort_index;\n          })\n      )\n      /*.force(\n        \"collide\",\n        d3\n        .forceCollide()\n        .strength(5.0)\n        .radius((d) => d.radius)\n        .iterations(20)\n      )*/\n      // This function with help from https://stackoverflow.com/a/13456081\n      .on(\"tick\", () => {\n\n        this._link.attr(\"d\", (d) => {\n          if (d.target.x === undefined || d.source.x === undefined) {\n            return null;\n          }\n\n          // The smaller the curve factor the greater the curve\n          const curveFactor = 2;\n          const dx = d.target.x - d.source.x;\n          const dy = d.target.y - d.source.x;\n          const dr = curveFactor * Math.sqrt(dx * dx + dy * dy);\n\n          return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;\n        });\n\n        this._node\n          .attr(\"cx\", (d) => {\n            return (d.x = constrain(d.x, w, d.r));\n          })\n          .attr(\"cy\", (d) => {\n            return (d.y = constrain(d.y, h, d.r));\n          });\n\n        this._label\n          .attr(\"x\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let width = d.textSize[0];\n            let delta = 0.5 * width;\n\n            if (d.x + delta > window.innerWidth) {\n              return window.innerWidth - width - 20;\n            }\n            else if (d.x - delta < 5) {\n              return 5;\n            }\n            else {\n              return d.x - d.radius - delta;\n            }\n          })\n          .attr(\"y\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let height = d.textSize[1];\n\n            return d.y + (0.55 * (height + d.radius));\n          });\n\n      })\n      .on(\"end\", () => {\n        console.log(\"END\");\n      });\n\n    this._is_running = true;\n\n    // Save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  restartSimulation() {\n    if (this._simulation) {\n      this._simulation.restart();\n      this._is_running = true;\n    }\n  }\n\n  stopSimulation() {\n    this._simulation.stop();\n    this._is_running = false;\n  }\n\n  isRunning() {\n    return this._is_running;\n  }\n\n  updateLinks(indirectConnectionsVisible) {\n    if (this._graph.edges) {\n      this.setState({\n        indirectConnectionsVisible: indirectConnectionsVisible,\n      });\n      this.updateLink(this._graph.edges);\n    }\n  }\n\n  drawFromScratch() {\n    let graph = this._graph;\n\n    if (!graph) {\n      if (this.state.social) {\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph) {\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container) {\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    if (!width || !height) {\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container\n      .append(\"svg\")\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .attr(\"id\", \"svg-viz\")\n      .attr(\"align\", \"center\")\n      .attr(\"class\", styles.svg_view)\n      .on(\"click\", () => {\n        this.clearPopup();\n        this.state.signalClicked(null);\n      });\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this.spiralSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this.updateLink(graph.edges);\n    this._node = this.updateNode(graph.nodes);\n    this._label = this.updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw() {\n    if (!this._is_drawn) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    if (this._size_changed) {\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      this._size_changed = false;\n      this._label = this.updateNodeText(this._graph.nodes);\n    }\n\n    if (this._graph_changed) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n    }\n  }\n}\n\nForceGraphD3.propTypes = {\n}\n\nexport default ForceGraphD3;","/** Internal function used to return a function that\n *  returns a constant value\n **/\nfunction _constant(x) {\n  return function () {\n    return x;\n  };\n}\n\n/** Internal function used to return a function that counts up from\n *  0 every time it is called\n */\nfunction _return_index() {\n  let i = 0;\n  return function () {\n    let j = i;\n    i += 1;\n    return j;\n  }\n}\n\n/** Force function that pulls nodes towards a spiral design that\n *  is centered in a canvas of specified width and height. You can\n *  specify the strength of this force, and also the index that\n *  maps a node to a point in the spiral. The center point of the\n *  spiral is index 0, with subsequent points counting up uniformly\n *  from there. The spiral is resized automatically to ensure that\n *  all points are contained on the canvas.\n */\nexport default function force_spiral(width, height) {\n  let nodes = null;\n  let index = _return_index();\n  let strength = _constant(0.1);\n  let strengths = null;\n  let indexes = null;\n  let points_x = null;\n  let points_y = null;\n\n  if (height == null) height = 600;\n  if (width == null) width = 600;\n\n  /** Calculate the force on the nodes and update the velocities.\n   *  This uses the spiral points pre-calculated in 'initialise'.\n   *  Each node looks up its spiral point based on the index\n   *  assigned to each node\n   */\n  function force(alpha) {\n    if (!nodes) return;\n\n    for (let i = 0, n = nodes.length; i < n; ++i) {\n      let node = nodes[i];\n      let index = indexes[i];\n      node.vx += (points_x[index] - node.x) * strengths[i] * alpha;\n      node.vy += (points_y[index] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  /** Initialise the spiral. This pre-fectches all of the strengths\n   *  for the nodes and places them into an array.\n   *\n   *  This then pre-fetches all of the node indexes, and, using the\n   *  maximum index, works out and pre-calculates the points of a\n   *  spiral with enough points to satisfy all indexes, and that\n   *  ensures that they all fit onto the screen.\n   *\n   *  These points are placed into the points_x and points_y arrays.\n   */\n  function initialize() {\n    if (!nodes) return;\n\n    let n = nodes.length;\n\n    // collect the strengths and indexes\n    strengths = new Array(n);\n    indexes = new Array(n);\n\n    for (let i = 0; i < n; ++i) {\n      strengths[i] = +strength(nodes[i], i, nodes);\n      indexes[i] = Math.floor(index(nodes[i], i, nodes));\n\n      if (indexes[i] < 0) {\n        indexes[i] = 0;\n      } else if (indexes[i] >= 1024 * 1024) {\n        // limit to 1 MB\n        indexes[i] = 1024 * 1024;\n      }\n    }\n\n    // what is the maximum index - will need to know this to generate\n    // all of the points\n    let max_index = 0;\n\n    if (n > 0) {\n      max_index = Math.max(...indexes);\n    }\n\n    // now calculate all of the points\n    points_x = new Array(max_index + 1);\n    points_y = new Array(max_index + 1);\n\n    let angle = 0.0;\n    let radius = 0.0;\n\n    let min_x = 0.0;\n    let max_x = 0.0;\n    let min_y = 0.0;\n    let max_y = 0.0;\n\n    for (let i = 1; i <= max_index; ++i) {\n      radius = Math.sqrt(i);\n      angle += Math.asin(1 / radius);\n      points_x[i] = Math.cos(angle) * radius;\n      points_y[i] = Math.sin(angle) * radius;\n\n      min_x = Math.min(min_x, points_x[i]);\n      max_x = Math.max(max_x, points_x[i]);\n\n      min_y = Math.min(min_y, points_y[i]);\n      max_y = Math.max(max_y, points_y[i]);\n    }\n\n    // we now need to scale such that 'radius' can fit comfortably\n    // on a width * height page\n    let center_x = width / 2;\n    let center_y = height / 2;\n\n    let scale_x = 0.80 * width / (max_x - min_x);\n    let scale_y = 0.80 * height / (max_y - min_y);\n\n    // offset the center slightly as the spiral biases slightly\n    center_x -= 0.4 * scale_x * (max_x + min_x);\n    center_y -= 0.4 * scale_y * (max_y + min_y);\n\n    points_x[0] = center_x;\n    points_y[0] = center_y;\n\n    for (let i = 1; i <= max_index; ++i) {\n      points_x[i] = center_x + (points_x[i] * scale_x);\n      points_y[i] = center_y + (points_y[i] * scale_y);\n    }\n  }\n\n  /** Add the initialise function to the force object that will be returned */\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the strength for each node\n   */\n  force.strength = function (_) {\n    return arguments.length ? ((strength = typeof _ === \"function\" ?\n      _ : _constant(+_)), initialize(), force) : strength;\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the index on the spiral for each node\n   */\n  force.index = function (_) {\n    return arguments.length ? ((index = typeof _ === \"function\" ?\n      _ : _return_index()), initialize(), force) : index;\n  };\n\n  return force;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"uob_logo_image\":\"ForceGraph_uob_logo_image__3l_1N\",\"bi_logo_image\":\"ForceGraph_bi_logo_image__uV2J8\",\"right_logo\":\"ForceGraph_right_logo__1Ekzw\",\"left_logo\":\"ForceGraph_left_logo__2DYAk\",\"svg_view\":\"ForceGraph_svg_view__2ME_c\",\"node\":\"ForceGraph_node__27s5W\",\"node_highlighted\":\"ForceGraph_node_highlighted__13qEh\",\"node_engineer\":\"ForceGraph_node_engineer__2bJqi\",\"node_engineer_highlighted\":\"ForceGraph_node_engineer_highlighted__Hf9Fk\",\"node_business\":\"ForceGraph_node_business__2Avwy\",\"node_business_highlighted\":\"ForceGraph_node_business_highlighted__3GCjy\",\"node_nc_engineer\":\"ForceGraph_node_nc_engineer__3XKdc\",\"node_nc_engineer_highlighted\":\"ForceGraph_node_nc_engineer_highlighted__28P7T\",\"node_selected\":\"ForceGraph_node_selected__3JS3X\",\"link\":\"ForceGraph_link__2qaVU\",\"linkWeak\":\"ForceGraph_linkWeak__2lOg3\",\"linkIndirect\":\"ForceGraph_linkIndirect__1hzat\",\"linkInvisible\":\"ForceGraph_linkInvisible__2lF55\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link_highlight\":\"ForceGraph_link_highlight__3uD71\",\"node_text\":\"ForceGraph_node_text__3ovHB\",\"node_text_highlight\":\"ForceGraph_node_text_highlight__2r00s\",\"node_text_select\":\"ForceGraph_node_text_select__1imLO\"};","module.exports = __webpack_public_path__ + \"static/media/uob_logo.69d10a8d.png\";","module.exports = __webpack_public_path__ + \"static/media/bi_logo.60f3dcf3.png\";","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport VBox from \"./VBox\";\n\nimport styles from \"./LabelButton.module.css\";\n\n\nfunction LabelButton(props) {\n\n    let onClick = null;\n\n    if (props.onClick) {\n      onClick = props.onClick;\n    } else {\n      onClick = () => { console.log(\"NULL\");};\n    }\n\n    return (\n        <VBox>\n            <button\n              className={styles.label}\n              onClick={onClick}\n            >\n              Current<br/>{props.label}\n            </button>\n            <button\n              className={styles.button}\n              onClick={onClick}\n            >\n              {props.button}\n            </button>\n        </VBox>\n    );\n}\n\n\nLabelButton.propTypes = {\n    button: PropTypes.any,\n    label: PropTypes.any,\n    onClick: PropTypes.func\n  };\n\nexport default LabelButton;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport styles from \"./HowDoIOverlay.module.css\";\n\nfunction HowDoIOverlay(props) {\n  let social = props.social;\n\n  let markdown = social.getHelpText();\n\n  if (!markdown) {\n    markdown = \"Not available\";\n  }\n\n  let filename = \"images/ships/Great_Britain.jpg\";\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.closeButton}>\n        <button onClick={props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n          x\n        </button>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\"\n               src={require(`../${filename}`)} alt=\"A ship\" />\n        <div className={styles.markdown}><ReactMarkdown source={markdown} /></div>\n      </div>\n    </div>\n  );\n}\n\nHowDoIOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n};\n\nexport default HowDoIOverlay;\n","var map = {\n\t\"./\": 5,\n\t\"./SocialApp\": 33,\n\t\"./SocialApp.js\": 33,\n\t\"./SocialApp.module.css\": 248,\n\t\"./SocialApp.test\": 249,\n\t\"./SocialApp.test.js\": 249,\n\t\"./components/AboutOverlay\": 202,\n\t\"./components/AboutOverlay.js\": 202,\n\t\"./components/AboutOverlay.module.css\": 319,\n\t\"./components/AboutOverlay.test\": 320,\n\t\"./components/AboutOverlay.test.js\": 320,\n\t\"./components/BigBox\": 65,\n\t\"./components/BigBox.js\": 65,\n\t\"./components/BigBox.module.css\": 225,\n\t\"./components/BioOverlay\": 91,\n\t\"./components/BioOverlay.js\": 91,\n\t\"./components/BioOverlay.module.css\": 321,\n\t\"./components/BioOverlay.test\": 322,\n\t\"./components/BioOverlay.test.js\": 322,\n\t\"./components/ForceGraph\": 154,\n\t\"./components/ForceGraph.js\": 154,\n\t\"./components/ForceGraph.module.css\": 158,\n\t\"./components/HBox\": 83,\n\t\"./components/HBox.js\": 83,\n\t\"./components/HBox.module.css\": 227,\n\t\"./components/HowDoIOverlay\": 162,\n\t\"./components/HowDoIOverlay.js\": 162,\n\t\"./components/HowDoIOverlay.module.css\": 247,\n\t\"./components/ImageCarousel\": 209,\n\t\"./components/ImageCarousel.js\": 209,\n\t\"./components/ImageCarousel.module.css\": 871,\n\t\"./components/ImageCarousel.test\": 328,\n\t\"./components/ImageCarousel.test.js\": 328,\n\t\"./components/LabelButton\": 161,\n\t\"./components/LabelButton.js\": 161,\n\t\"./components/LabelButton.module.css\": 233,\n\t\"./components/MainMenu\": 212,\n\t\"./components/MainMenu.js\": 212,\n\t\"./components/MainMenu.module.css\": 329,\n\t\"./components/Overlay\": 103,\n\t\"./components/Overlay.js\": 103,\n\t\"./components/Overlay.module.css\": 330,\n\t\"./components/Overlay.test\": 331,\n\t\"./components/Overlay.test.js\": 331,\n\t\"./components/OverlayWrapper\": 332,\n\t\"./components/OverlayWrapper.js\": 332,\n\t\"./components/Popover\": 108,\n\t\"./components/Popover.js\": 108,\n\t\"./components/Popover.module.css\": 228,\n\t\"./components/Popover.test\": 355,\n\t\"./components/Popover.test.js\": 355,\n\t\"./components/SearchBar\": 214,\n\t\"./components/SearchBar.js\": 214,\n\t\"./components/SearchBar.module.css\": 356,\n\t\"./components/ShipOverlay\": 215,\n\t\"./components/ShipOverlay.js\": 215,\n\t\"./components/ShipOverlay.module.css\": 357,\n\t\"./components/ShipSelector\": 109,\n\t\"./components/ShipSelector.js\": 109,\n\t\"./components/ShipSelector.module.css\": 232,\n\t\"./components/ShipSelector.test\": 358,\n\t\"./components/ShipSelector.test.js\": 358,\n\t\"./components/SlidingPanel\": 216,\n\t\"./components/SlidingPanel.js\": 216,\n\t\"./components/SlidingPanel.module.css\": 359,\n\t\"./components/SourceOverlay\": 149,\n\t\"./components/SourceOverlay.js\": 149,\n\t\"./components/SourceOverlay.module.css\": 333,\n\t\"./components/SourceOverlay.test\": 364,\n\t\"./components/SourceOverlay.test.js\": 364,\n\t\"./components/TextButton\": 72,\n\t\"./components/TextButton.js\": 72,\n\t\"./components/TextButton.module.css\": 224,\n\t\"./components/TextButton.test\": 365,\n\t\"./components/TextButton.test.js\": 365,\n\t\"./components/ToggleButton\": 366,\n\t\"./components/ToggleButton.js\": 366,\n\t\"./components/ToggleButton.module.css\": 367,\n\t\"./components/VBox\": 82,\n\t\"./components/VBox.js\": 82,\n\t\"./components/VBox.module.css\": 226,\n\t\"./components/WarningOverlay\": 217,\n\t\"./components/WarningOverlay.js\": 217,\n\t\"./components/WarningOverlay.module.css\": 368,\n\t\"./components/__snapshots__/Overlay.test.js.snap\": 874,\n\t\"./components/__snapshots__/SearchOverlay.test.js.snap\": 875,\n\t\"./components/__snapshots__/ShipSelector.test.js.snap\": 876,\n\t\"./components/d3/ForceGraph.d3\": 155,\n\t\"./components/d3/ForceGraph.d3.js\": 155,\n\t\"./components/d3/force_spiral\": 156,\n\t\"./components/d3/force_spiral.js\": 156,\n\t\"./components/transitions/SlideFromBottom.module.css\": 362,\n\t\"./components/transitions/SlideFromLeft.module.css\": 360,\n\t\"./components/transitions/SlideFromRight.module.css\": 361,\n\t\"./components/transitions/SlideFromTop.module.css\": 363,\n\t\"./data\": 369,\n\t\"./data.json\": 369,\n\t\"./data/aboutText\": 203,\n\t\"./data/aboutText.json\": 203,\n\t\"./data/dataWeights\": 370,\n\t\"./data/dataWeights.json\": 370,\n\t\"./data/entityImageFilenames\": 371,\n\t\"./data/entityImageFilenames.json\": 371,\n\t\"./data/fixedNodes\": 372,\n\t\"./data/fixedNodes.json\": 372,\n\t\"./data/howDoIOverlayText\": 373,\n\t\"./data/howDoIOverlayText.json\": 373,\n\t\"./data/positionGroups\": 136,\n\t\"./data/positionGroups.json\": 136,\n\t\"./data/sourceImageFilenames\": 213,\n\t\"./data/sourceImageFilenames.json\": 213,\n\t\"./gb_text.md\": 374,\n\t\"./ge_text.md\": 375,\n\t\"./gw_text.md\": 376,\n\t\"./help_text.md\": 377,\n\t\"./images\": 218,\n\t\"./images.json\": 218,\n\t\"./images/320px-SS_Great_Britain_diagram.jpg\": 334,\n\t\"./images/320px-SS_Great_Britain_transverse_section.jpg\": 335,\n\t\"./images/800px-Gutenberg_Bible.jpg\": 336,\n\t\"./images/A_Specimen_by_William_Caslon.jpg\": 211,\n\t\"./images/Brunel_letter_GWR.jpg\": 337,\n\t\"./images/Great_Western_maiden_voyage.jpg\": 338,\n\t\"./images/IllustriteZeitung_SS_GreatBritain.png\": 339,\n\t\"./images/RHowlett_IKB.jpg\": 210,\n\t\"./images/Sumerian_26th_c_Adab.jpg\": 340,\n\t\"./images/The_Steamer_Great_Western_small.jpg\": 341,\n\t\"./images/bg-128-168.jpg\": 342,\n\t\"./images/bi_logo.png\": 160,\n\t\"./images/people/Bryan_Donkin.jpg\": 343,\n\t\"./images/people/Christopher_Claxton.jpg\": 344,\n\t\"./images/people/Edward_Chappell.jpg\": 345,\n\t\"./images/people/John_Grantham.jpg\": 346,\n\t\"./images/people/Robert_Bright.jpg\": 347,\n\t\"./images/people/Samuel_Hall.jpg\": 348,\n\t\"./images/people/William_Fairbairn.jpg\": 349,\n\t\"./images/people/William_Symonds.jpg\": 350,\n\t\"./images/ships/Great_Britain.jpg\": 351,\n\t\"./images/ships/Great_Eastern.jpg\": 352,\n\t\"./images/ships/Great_Western.jpg\": 353,\n\t\"./images/ssgb_logo.png\": 354,\n\t\"./images/uob_logo.png\": 159,\n\t\"./index\": 5,\n\t\"./index.css\": 8,\n\t\"./index.js\": 5,\n\t\"./model/Affiliation\": 142,\n\t\"./model/Affiliation.js\": 142,\n\t\"./model/Affiliations\": 141,\n\t\"./model/Affiliations.js\": 141,\n\t\"./model/Affiliations.test\": 378,\n\t\"./model/Affiliations.test.js\": 378,\n\t\"./model/Biographies\": 208,\n\t\"./model/Biographies.js\": 208,\n\t\"./model/Business\": 138,\n\t\"./model/Business.js\": 138,\n\t\"./model/Businesses\": 137,\n\t\"./model/Businesses.js\": 137,\n\t\"./model/Businesses.test\": 379,\n\t\"./model/Businesses.test.js\": 379,\n\t\"./model/Connection\": 205,\n\t\"./model/Connection.js\": 205,\n\t\"./model/Connections\": 204,\n\t\"./model/Connections.js\": 204,\n\t\"./model/DateRange\": 58,\n\t\"./model/DateRange.js\": 58,\n\t\"./model/DateRange.test\": 380,\n\t\"./model/DateRange.test.js\": 380,\n\t\"./model/Errors\": 40,\n\t\"./model/Errors.js\": 40,\n\t\"./model/Note\": 207,\n\t\"./model/Note.js\": 207,\n\t\"./model/Notes\": 206,\n\t\"./model/Notes.js\": 206,\n\t\"./model/People\": 134,\n\t\"./model/People.js\": 134,\n\t\"./model/People.test\": 381,\n\t\"./model/People.test.js\": 381,\n\t\"./model/Person\": 135,\n\t\"./model/Person.js\": 135,\n\t\"./model/Position\": 140,\n\t\"./model/Position.js\": 140,\n\t\"./model/Positions\": 139,\n\t\"./model/Positions.js\": 139,\n\t\"./model/Positions.test\": 382,\n\t\"./model/Positions.test.js\": 382,\n\t\"./model/Project\": 146,\n\t\"./model/Project.js\": 146,\n\t\"./model/Projects\": 145,\n\t\"./model/Projects.js\": 145,\n\t\"./model/Projects.test\": 383,\n\t\"./model/Projects.test.js\": 383,\n\t\"./model/RoughDate\": 92,\n\t\"./model/RoughDate.js\": 92,\n\t\"./model/RoughDate.test\": 384,\n\t\"./model/RoughDate.test.js\": 384,\n\t\"./model/ScoringFunctions\": 147,\n\t\"./model/ScoringFunctions.js\": 147,\n\t\"./model/SizingFunctions\": 148,\n\t\"./model/SizingFunctions.js\": 148,\n\t\"./model/Social\": 79,\n\t\"./model/Social.js\": 79,\n\t\"./model/Source\": 144,\n\t\"./model/Source.js\": 144,\n\t\"./model/Source.test\": 385,\n\t\"./model/Source.test.js\": 385,\n\t\"./model/Sources\": 143,\n\t\"./model/Sources.js\": 143,\n\t\"./model/get_id\": 93,\n\t\"./model/get_id.js\": 93,\n\t\"./reset.css\": 7,\n\t\"./socialNetwork\": 80,\n\t\"./socialNetwork.json\": 80\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 169;","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./AboutOverlay.module.css\";\n\nimport aboutText from \"../data/aboutText.json\";\n\nclass AboutOverlay extends React.Component {\n  render() {\n    return (\n      <div className={styles.container}>\n        <div className={styles.closeButton}>\n          <button onClick={this.props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2.4vh\" }}>\n            x\n          </button>\n        </div>\n        <div className={styles.textContainer}>\n          <div className={styles.header}>About</div>\n          <div className={styles.intro}>{aboutText[\"intro\"]}</div>\n          <div className={styles.introBody}>\n            <p>{aboutText[\"introParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"introParaTwo\"]}</p>\n          </div>\n          <div className={styles.sectionHeader}>{aboutText[\"methodHeader\"]}</div>\n          <div className={styles.body}>\n            <p>{aboutText[\"methodParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"methodParaTwo\"]}</p>\n          </div>\n          <div className={styles.sectionHeader}>{aboutText[\"sourcesHeader\"]}</div>\n          <div className={styles.body}>\n            <p>{aboutText[\"sourcesParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"sourcesParaTwo\"]}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nAboutOverlay.propTypes = {\n  close: PropTypes.func.isRequired,\n};\n\nexport default AboutOverlay;\n","import Dry from \"json-dry\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Connection from \"./Connection\";\nimport get_id from \"./get_id\";\n\nimport {\n  KeyError,\n  MissingError\n} from \"./Errors\";\n\nfunction _generate_connection_uid() {\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length - 7);\n}\n\nclass Connections {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._connections = {};\n    this._isAConnectionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Connection || item._isAConnectionObject;\n  }\n\n  add(connection) {\n    if (!this.canAdd(connection)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(connection.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(connection);\n      this.state.registry[get_id(existing)] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = get_id(connection);\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    } else {\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    let connection_id = get_id(connection);\n    this._names[connection.getName()] = connection_id;\n    this.state.registry[connection_id] = connection;\n\n    let id0 = connection.getNode0ID();\n    let id1 = connection.getNode1ID();\n\n    if (!(id0 in this._connections)) {\n      this._connections[id0] = {};\n    }\n\n    if (!(id1 in this._connections)) {\n      this._connections[id1] = {};\n    }\n\n    this._connections[id0][id1] = 1;\n    this._connections[id1][id0] = 1;\n\n    return connection;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Connection || name._isAConnectionObject) {\n      return this.get(get_id(name));\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new TypeError(`No connection matches '${name}. Available Connections are '${keys}'`);\n  }\n\n  gotConnections(id) {\n    return this.nConnections(id) > 0;\n  }\n\n  nConnections(id) {\n    let c = this._connections[id];\n\n    if (!c) {\n      return 0;\n    }\n    else {\n      return Object.keys(c).length;\n    }\n  }\n\n  get(id) {\n    let connection = this.state.registry[id];\n\n    if (!connection) {\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n    let conns = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let connection = this.state.registry[key];\n\n      if (connection) {\n        for (let i = 0; i < funcs.length; ++i) {\n          connection = funcs[i](connection);\n          if (!connection) {\n            break;\n          }\n        }\n\n        if (connection) {\n          registry[key] = connection;\n          names[connection.getName()] = key;\n\n          let id0 = connection.getNode0ID();\n          let id1 = connection.getNode1ID();\n\n          if (!(id0 in conns)) {\n            conns[id0] = {};\n          }\n\n          if (!(id1 in conns)) {\n            conns[id1] = {};\n          }\n\n          conns[id0][id1] = 1;\n          conns[id1][id0] = 1;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._connections = conns;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  highlightConnections(item, social) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode1ID(), false).setHighlighted(true);\n      } else if (connection.getNode1ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode0ID(), false).setHighlighted(true);\n      }\n    }\n  }\n\n  getConnectionsInvolving(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let connections = [];\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        connections.push(connection);\n      } else if (connection.getNode1ID() in item) {\n        connections.push(connection);\n      }\n    }\n\n    return connections;\n  }\n\n  getConnectionsTo(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id) {\n      if (!(id in seen)) {\n        seen[id] = 1;\n      } else {\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        _add(connection.getNode1ID());\n      } else if (connection.getNode1ID() in item) {\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook) {\n      Object.keys(seen).forEach((key) => {\n        try {\n          if (seen[key] === nnodes) {\n            connections.push(this._getHook(key));\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    } else {\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  areConnected(item0, item1) {\n    item0 = get_id(item0);\n    item1 = get_id(item1);\n\n    if (item0 in this._connections) {\n      return item1 in this._connections[item0];\n    } else {\n      return false;\n    }\n  }\n\n  getEdges(ids = null) {\n    let edges = [];\n\n    if (ids) {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)) {\n          edges.push(connection.toEdge());\n        }\n      });\n    } else {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nConnections.unDry = function (value) {\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n\n    let id0 = v.getNode0ID();\n    let id1 = v.getNode1ID();\n\n    if (!(id0 in connections._connections)) {\n      connections._connections[id0] = {};\n    }\n\n    if (!(id1 in connections._connections)) {\n      connections._connections[id1] = {};\n    }\n\n    connections._connections[id0][id1] = 1;\n    connections._connections[id1][id0] = 1;\n  });\n\n  return connections;\n};\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport get_id from \"./get_id\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key) {\n  state = state[key];\n  other = other[key];\n\n  Object.keys(other).forEach((key) => {\n    if (!(key in state)) {\n      state[key] = other[key];\n    } else {\n      for (let item in other[key]) {\n        if (!(item in state[key])) {\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props) {\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n      is_highlighted: false,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getName() {\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1) {\n      return `${n0}<=>${n1}`;\n    } else {\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0() {\n    if (this._getHook) {\n      return this._getHook(this.state.n0);\n    } else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1() {\n    if (this._getHook) {\n      return this._getHook(this.state.n1);\n    } else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID() {\n    return this.state.n0;\n  }\n\n  getNode1ID() {\n    return this.state.n1;\n  }\n\n  areNodesVisible(n) {\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name() {\n    let node0 = this.getNode0();\n\n    try {\n      return node0.getName();\n    } catch (error) {\n      return node0;\n    }\n  }\n\n  getNode1Name() {\n    let node1 = this.getNode1();\n\n    try {\n      return node1.getName();\n    } catch (error) {\n      return node1;\n    }\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getAffiliationSources() {\n    //console.log(this.state.affiliations);\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources() {\n    //console.log(this.state.correspondances);\n    return this.state.correspondances;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key) => {\n      if (this.state.affiliations[key] || this.state.correspondances[key]) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    // Filter this connection by project ID\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nProjects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nProjects) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (!window) {\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration) {\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      // note that correspondences is a typo from the python!\n      this.state.correspondances = setState(state.correspondences, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1) {\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other) {\n    if (!this._getHook) {\n      if (other._getHook) {\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key) => {\n      if (!(key in state.shared)) {\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key) => {\n      if (!(key in state.notes)) {\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString() {\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType() {\n    switch (this.state.type) {\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        return \"orange\";\n    }\n  }\n\n  getType() {\n    return this.state.type;\n  }\n\n  getWeights() {\n    return this.state.weights;\n  }\n\n  getWeight() {\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key) => {\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType() {\n    let weight = this.getWeight();\n\n    switch (this.state.type) {\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  toEdge() {\n    let color = this.getColorFromType();\n    // let weight = this.getWeightFromType();\n    let weight = this.getWeight();\n\n    let edge = {\n      id: this.getID(),\n      source: get_id(this.state.n0),\n      target: get_id(this.state.n1),\n      value: weight,\n      type: this.state.type,\n      color: color,\n      highlighted: this.getHighlighted(),\n    };\n\n    return edge;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnection.unDry = function (value) {\n  return new Connection(value);\n};\n\nConnection.load = function (data) {\n  return new Connection({ name: data.name });\n};\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_note_uid() {\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length - 7);\n}\n\nclass Notes {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Note || item._isANoteObject;\n  }\n\n  add(note) {\n    if (!this.canAdd(note)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(note.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    } else {\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Note || name._isANoteObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Note matches '${name}. Available Notes are '${keys}'`);\n  }\n\n  get(id) {\n    let Note = this.state.registry[id];\n\n    if (!Note) {\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNotes.unDry = function (value) {\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n};\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props) {\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item) {\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  toString() {\n    return `Note(${this.getText()})`;\n  }\n\n  getText() {\n    return this.state.text;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNote.unDry = function (value) {\n  return new Note(value);\n};\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nclass Biographies {\n  constructor() {\n    this.state = {\n      bios: {},\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  static clone(item) {\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node) {\n    if (!node) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getByID(id) {\n    if (!id) return null;\n\n    return this.state.bios[id];\n  }\n\n  getNode(id) {\n    if (this._getHook) {\n      return this._getHook(id);\n    } else {\n      return id;\n    }\n  }\n\n  search(text) {\n    if (!text) {\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key) => {\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1) {\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  add(node, biography) {\n    if (!node || !biography) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio) {\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function (value) {\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n};\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","import PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport Carousel from \"@brainhubeu/react-carousel\";\nimport \"@brainhubeu/react-carousel/lib/style.css\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleLeft, faAngleDoubleLeft, faAngleDoubleRight, faAngleRight } from \"@fortawesome/free-solid-svg-icons\";\n\nclass ImageCarousel extends Component {\n  render() {\n    return (\n      <Carousel\n        data-testid=\"carouselCont\"\n        slidesPerPage={1}\n        arrowLeft={<FontAwesomeIcon icon={faAngleDoubleLeft} />}\n        arrowLeftDisabled={<FontAwesomeIcon icon={faAngleLeft} />}\n        arrowRight={<FontAwesomeIcon icon={faAngleDoubleRight} />}\n        arrowRightDisabled={<FontAwesomeIcon icon={faAngleRight} />}\n        addArrowClickHandler\n      >\n        {this.props.children}\n      </Carousel>\n    );\n  }\n}\n\nexport default ImageCarousel;\n\nImageCarousel.propTypes = {\n  children: PropTypes.array.isRequired,\n};\n","module.exports = __webpack_public_path__ + \"static/media/RHowlett_IKB.68e88d10.jpg\";","module.exports = __webpack_public_path__ + \"static/media/A_Specimen_by_William_Caslon.6240f5ce.jpg\";","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport VBox from \"./VBox\";\nimport moment from \"moment\";\n\nimport styles from \"./MainMenu.module.css\";\n\nconst saveSvgAsPng = require(\"save-svg-as-png\");\n\n\nfunction MenuLabel(props) {\n  return (\n    <div className={styles.menu_label}\n         onClick={props.onClick}>\n      {props.children}\n    </div>\n  )\n}\n\n\nfunction MenuButton(props) {\n  let onClick = null;\n\n  if (props.onClick) {\n    onClick = props.onClick;\n  } else {\n    onClick = () => null;\n  }\n\n  return (\n    <button className={styles.menu_button} onClick={onClick}>\n      {props.children}\n    </button>\n  );\n}\n\n\nclass MainMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.wrapperRef = React.createRef();\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      this.props.close();\n      event.stopPropagation();\n    }\n  }\n\n  render() {\n    let unconnectedNodesText = this.props.unconnectedNodesVisible ? \"Visible\" : \"Invisible\";\n    let ncEngineersText = this.props.ncEngineersVisible ? \"Visible\" : \"Invisible\";\n\n    return (\n      <div data-testid=\"AnalysisPanel\" ref={this.setWrapperRef} className={styles.panel}>\n        <VBox>\n          <MenuButton\n              onClick={() => {\n                this.props.close();\n              }}\n          >\n            ⤆ Close ⤆\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}>\n            Current<br/>Spiral Order\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}\n          >\n            {this.props.spiralOrder}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}>\n            Current<br/>Node Size\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}\n          >\n            {this.props.sizeText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            Current<br/>Filter\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            {this.props.filterText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            Current<br/>Unconnected\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            {unconnectedNodesText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            Current<br/>Non-contributers\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            {ncEngineersText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            Current<br/>Search\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            {this.props.searchText}\n          </MenuButton>\n\n          <MenuLabel>\n            Further Options\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitResetFilters();\n            }}\n          >\n            Reset / Reload\n          </MenuButton>\n\n          <MenuButton\n            onClick={() => {\n              const imageOptions = {\n                scale: 1,\n                encoderOptions: 1,\n                backgroundColor: \"#000000\",\n              };\n\n              const filename = \"BrunelsNetwork-\" + moment().format(\"YYYYMMDD-hhmmss\") + \".png\";\n\n              saveSvgAsPng.saveSvgAsPng(document.getElementById(\"svg-viz\"), filename, imageOptions);\n            }}\n          >\n            Save as image\n          </MenuButton>\n        </VBox>\n      </div>\n    );\n  }\n}\n\nMenuButton.propTypes = {\n  children: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n}\n\nMenuLabel.propTypes = {\n  children: PropTypes.object.isRequired,\n}\n\nMainMenu.propTypes = {\n  close: PropTypes.func.isRequired,\n  unconnectedNodesVisible: PropTypes.bool.isRequired,\n  ncEngineersVisible: PropTypes.bool.isRequired,\n  engineersFiltered: PropTypes.bool.isRequired,\n  commercialFiltered: PropTypes.bool.isRequired,\n  searchBios: PropTypes.bool.isRequired,\n  searchHighlight: PropTypes.bool.isRequired,\n  emitResetFilters: PropTypes.func.isRequired,\n  emitToggleFilterCommercial: PropTypes.func.isRequired,\n  emitToggleFilterEngineering: PropTypes.func.isRequired,\n  emitToggleUnconnectedNodesVisible: PropTypes.func.isRequired,\n  emitToggleNCEngineersVisible: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  emitSearchBiosToggled: PropTypes.func.isRequired,\n};\n\nexport default MainMenu;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./SearchBar.module.css\";\n\n\nclass SearchBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onChangeHandler(event) {\n    let text = event.target.value;\n\n    if (this.props.emitUpdate) {\n      this.props.emitUpdate(text);\n    }\n  }\n\n  onSubmitHandler(event) {\n    event.preventDefault();\n  }\n\n  render() {\n    let search_text = \"\";\n\n    if (this.props.searchText) {\n      search_text = this.props.searchText;\n    }\n\n    let clear_button = null;\n    let link_button = null;\n\n    if (search_text) {\n      clear_button = (\n        <div className={styles.clearButton}\n             onClick={()=>{this.props.emitUpdate(\"\")}}\n        >\n          &nbsp;X&nbsp;\n        </div>);\n\n      if (this.props.searchHighlightAvailable) {\n        let highlight = this.props.searchHighlightToggled;\n\n        let link_style = styles.linkButton;\n\n        if (highlight) {\n          link_style = styles.linkButtonHighlighted;\n        }\n\n        link_button = (\n          <div className={link_style}\n            onClick={() => { this.props.emitSearchHighlightToggled(!highlight) }}\n          >\n            &nbsp;✺&nbsp;\n          </div>);\n      }\n    }\n\n    return (\n      <form className={styles.form}\n        onSubmit={(e) => this.onSubmitHandler(e)} >\n        <HBox>\n          <BigBox>\n            <input key=\"input\" className={styles.input} type=\"search\"\n              onChange={(e) => this.onChangeHandler(e)}\n              value={search_text}\n              placeholder=\"Search...\" />\n          </BigBox>\n          {link_button}\n          {clear_button}\n        </HBox>\n      </form>);\n  }\n}\n\nSearchBar.propTypes = {\n  searchHighlightToggled: PropTypes.bool.isRequired,\n  emitUpdate: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  searchText: PropTypes.string,\n  searchHighlightAvailable: PropTypes.bool,\n};\n\n\n\nexport default SearchBar;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport styles from \"./ShipOverlay.module.css\";\n\nfunction ShipOverlay(props) {\n  let social = props.social;\n\n  const ship = social.get(props.ship);\n\n  let markdown = social.getProjectText(ship);\n\n  if (!markdown) {\n    markdown = \"Not available\";\n  }\n\n  let filename = social.getImage(ship);\n\n  if (!filename) {\n    filename = \"images/Great_Western_maiden_voyage.jpg\";\n  }\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.closeButton}>\n        <button onClick={props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n          x\n        </button>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\"\n               src={require(`../${filename}`)} alt=\"A ship\" />\n        <div className={styles.markdown}><ReactMarkdown source={markdown} /></div>\n      </div>\n    </div>\n  );\n}\n\nShipOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  ship: PropTypes.string.isRequired,\n};\n\nexport default ShipOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport styles from \"./SlidingPanel.module.css\";\nimport SlideFromLeft from \"./transitions/SlideFromLeft.module.css\";\nimport SlideFromRight from \"./transitions/SlideFromRight.module.css\";\nimport SlideFromBottom from \"./transitions/SlideFromBottom.module.css\";\nimport SlideFromTop from \"./transitions/SlideFromTop.module.css\";\n\nclass SlidingPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      position: \"right\",\n      defaultSize: \"40%\",\n      minSize: \"300px\",\n      maxSize: null,\n    };\n  }\n\n  render() {\n    let container = styles.rightContainer;\n    let transition = SlideFromRight;\n\n    let width = this.props.width;\n    let height = this.props.height;\n\n    if (height && !width) {\n      width = \"100%\";\n    }\n\n    if (width && !height) {\n      height = \"100%\";\n    }\n\n    let horiz_size = { width: width };\n    let vert_size = { height: height };\n\n    let style = { width: width, height: height, minSize: this.state.minSize };\n\n    if (this.props.maxSize) {\n      horiz_size.maxWidth = this.props.maxSize;\n      vert_size.maxHeight = this.props.maxSize;\n    }\n\n    // let style = horiz_size;\n    // Get the passed in position\n    let position = this.props.position;\n    if (!position) {\n      position = this.state.position;\n    }\n\n    if (position === \"right\") {\n      container = styles.rightContainer;\n      transition = SlideFromRight;\n    } else if (position === \"rightBottom\") {\n      container = styles.rightContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"bottom\") {\n      container = styles.bottomContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"top\") {\n      container = styles.topContainer;\n      transition = SlideFromTop;\n    } else if (position === \"left\") {\n      container = styles.leftContainer;\n      transition = SlideFromLeft;\n    }\n\n    container = `${container} ${styles.container}`;\n\n    return (\n      <CSSTransition in={this.props.isOpen} timeout={200} classNames={transition} unmountOnExit>\n        <div className={container} style={style}>\n          {this.props.children}\n        </div>\n      </CSSTransition>\n    );\n  }\n}\n\nSlidingPanel.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\n  isOpen: PropTypes.bool,\n  maxSize: PropTypes.string,\n  minSize: PropTypes.string,\n  position: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nexport default SlidingPanel;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./WarningOverlay.module.css\";\n\nfunction WarningOverlay(props) {\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.content}>\n        {props.children}\n      </div>\n    </div>\n  );\n}\n\nWarningOverlay.propTypes = {\n  close: PropTypes.func.isRequired,\n  children: PropTypes.any.isRequired,\n};\n\nexport default WarningOverlay;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"TextButton_button__2yNkD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigbox\":\"BigBox_bigbox__2UnYn\",\"fill\":\"BigBox_fill__2HrJ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"vbox\":\"VBox_vbox__2jGLW\",\"child\":\"VBox_child__2_lfW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hbox\":\"HBox_hbox__3BAn8\",\"child\":\"HBox_child__2YyC5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"closeButton\":\"Popover_closeButton__1Msfq\",\"popOver\":\"Popover_popOver__10jzZ\",\"header\":\"Popover_header__2TOZN\",\"bio\":\"Popover_bio__3Ekto\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ShipSelector_container__3AFhA\",\"content\":\"ShipSelector_content__1xElP\",\"arrow_button\":\"ShipSelector_arrow_button__3fE9s\",\"ship_button\":\"ShipSelector_ship_button__3S73O\",\"ship_button_selected\":\"ShipSelector_ship_button_selected__1Fyze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"LabelButton_label__2iyuT\",\"button\":\"LabelButton_button__1F1S6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HowDoIOverlay_container__NXP8l\",\"closeButton\":\"HowDoIOverlay_closeButton__1XerT\",\"image\":\"HowDoIOverlay_image__8RfeS\",\"content\":\"HowDoIOverlay_content__3poua\",\"name\":\"HowDoIOverlay_name__1LCvv\",\"bio\":\"HowDoIOverlay_bio__kFH79\",\"markdown\":\"HowDoIOverlay_markdown__3nSuH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"ui_main\":\"SocialApp_ui_main__1aYwH\",\"drawerButton\":\"SocialApp_drawerButton__1yuvm\",\"fullscreen\":\"SocialApp_fullscreen__2xzWo\"};","import React from \"react\";\n\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport SocialApp from \"./SocialApp\";\n\nafterEach(cleanup);\n\ndescribe(\"SocialApp\", () => {\n  test(\"should render\", () => {\n    const { container } = render(<SocialApp />);\n    expect(container.firstChild).toBeTruthy();\n  });\n\n  test(\"click on analysis opens panel\", () => {\n    render(<SocialApp />);\n\n    const analysisButton = screen.queryByText(\"Analysis\").closest(\"button\");\n\n    let analyisPanel = screen.queryByTestId(\"AnalysisPanel\");\n\n    expect(analyisPanel).toBeNull();\n\n    fireEvent.click(analysisButton);\n\n    analyisPanel = screen.queryByTestId(\"AnalysisPanel\");\n\n    expect(analyisPanel).toBeTruthy();\n\n    // Check we find the buttons in the analysis panel\n    expect(screen.queryByText(\"Search\")).toBeTruthy();\n    expect(screen.queryByText(\"Close\")).toBeTruthy();\n    expect(screen.queryByText(\"Filter by engineers\")).toBeTruthy();\n    expect(screen.queryByText(\"Filter by commercial\")).toBeTruthy();\n    expect(screen.queryByText(\"Show indirect connections\")).toBeTruthy();\n    expect(screen.queryByText(\"Show unconnected nodes\")).toBeTruthy();\n    expect(screen.queryByText(\"Save as image\")).toBeTruthy();\n    expect(screen.queryByText(\"Reset filters\")).toBeTruthy();\n  });\n\n  test(\"Ship selection buttons change ship title\", () => {\n    render(<SocialApp />);\n\n    expect(screen.queryByTestId(\"shipTitle\").textContent).toMatch(\"SS Great Western\");\n\n    const gbButton = screen.queryByText(\"SS Great Britain\").closest(\"button\");\n\n    fireEvent.click(gbButton);\n\n    expect(screen.queryByTestId(\"shipTitle\").textContent).toMatch(\"SS Great Britain\");\n  });\n\n  test(\"Reset button resets window\", () => {\n    render(<SocialApp />);\n\n    let resetButton = screen.queryByText(\"Reset\").closest(\"button\");\n\n    const { reload } = window.location;\n\n    Object.defineProperty(window.location, \"reload\", {\n      configurable: true,\n    });\n\n    window.location.reload = jest.fn();\n\n    fireEvent.click(resetButton);\n\n    expect(window.location.reload).toHaveBeenCalledTimes(1);\n\n    window.location.reload = reload;\n  });\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AboutOverlay_container__fzMAB\",\"closeButton\":\"AboutOverlay_closeButton__2M8EC\",\"textContainer\":\"AboutOverlay_textContainer__2A-mP\",\"header\":\"AboutOverlay_header__3hHMT\",\"intro\":\"AboutOverlay_intro__2XyY_\",\"introBody\":\"AboutOverlay_introBody__2-zQS\",\"sectionHeader\":\"AboutOverlay_sectionHeader__3I8nD\",\"body\":\"AboutOverlay_body__25TZB\"};","import React from \"react\";\n\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport AboutOverlay from \"./AboutOverlay\";\n\nafterEach(cleanup);\n\ndescribe(\"SocialApp\", () => {\n  test(\"close button works\", () => {\n    const closeFn = jest.fn();\n\n    render(<AboutOverlay close={closeFn} />);\n\n    const closebutton = screen.queryByText(\"x\");\n\n    fireEvent.click(closebutton);\n\n    expect(closeFn).toHaveBeenCalled();\n  });\n\n  test(\"all text appears correctly\", () => {\n    render(<AboutOverlay close={jest.fn()} />);\n\n    expect(\n      screen.queryAllByText(\n        /Brunel's Network is a visual representation of the network of people involved in the conception/\n      )\n    ).toBeTruthy();\n\n    expect(screen.queryAllByText(/This project seeks to evaluate the relationships between/)).toBeTruthy();\n\n    expect(\n      screen.queryAllByText(/The baseline network was derived from material held in the Brunel Institute/)\n    ).toBeTruthy();\n\n    expect(screen.queryAllByText(/The sources used in this project are highly variegated/)).toBeTruthy();\n  });\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BioOverlay_container__JNbgi\",\"closeButton\":\"BioOverlay_closeButton__3kwkz\",\"image\":\"BioOverlay_image__pKZRH\",\"caption\":\"BioOverlay_caption__2KwLl\",\"content\":\"BioOverlay_content__3SQpI\",\"panel\":\"BioOverlay_panel__SrUJP\",\"name\":\"BioOverlay_name__xj4_r\",\"bio_heading\":\"BioOverlay_bio_heading__3FtQQ\",\"source_heading\":\"BioOverlay_source_heading__1d7iI\",\"bio\":\"BioOverlay_bio__1QjHO\",\"source\":\"BioOverlay_source__3hOOX\",\"source_name\":\"BioOverlay_source_name__LdNo7\",\"source_item\":\"BioOverlay_source_item__6TCmp\"};","import React from \"react\";\nimport Dry from \"json-dry\";\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport BioOverlay from \"./BioOverlay\";\n\n// This is required to create the social object\n/* eslint-disable no-unused-vars */\nimport Social from \"../model/Social\";\n/* eslint-enable no-unused-vars */\n\nimport graphData from \"../socialNetwork.json\";\n\nafterEach(cleanup);\n\ndescribe(\"BioOverlay\", () => {\n  const toggleOverlayFn = jest.fn();\n  const toggleSourceOverlayFn = jest.fn();\n  const testString = \"This is a test\";\n\n  let social = Dry.parse(graphData);\n  const name = \"Christopher Claxton\";\n  const person = social.getPeople().getByName(name);\n\n  test(\"Test text renders correctly\", () => {\n    render(\n      <BioOverlay\n        social={social}\n        person={person}\n        toggleOverlay={toggleOverlayFn}\n        toggleSourceOverlay={toggleSourceOverlayFn}\n        sourceButtonText={testString}\n      />\n    );\n\n    expect(screen.queryByText(testString)).toBeTruthy();\n    expect(screen.queryByText(name)).toBeTruthy();\n    expect(screen.queryByText(/father was a Caribbean merchant/)).toBeTruthy();\n  });\n\n  test(\"Contains an image\", () => {\n    render(\n      <BioOverlay\n        social={social}\n        person={person}\n        toggleOverlay={toggleOverlayFn}\n        toggleSourceOverlay={toggleSourceOverlayFn}\n        sourceButtonText={testString}\n      />\n    );\n\n    expect(screen.queryAllByTestId(\"bioImage\")).toBeTruthy();\n  });\n\n  test(\"Buttons click props correctly\", () => {\n    render(\n      <BioOverlay\n        social={social}\n        person={person}\n        toggleOverlay={toggleOverlayFn}\n        toggleSourceOverlay={toggleSourceOverlayFn}\n        sourceButtonText={testString}\n      />\n    );\n\n    const closeButton = screen.queryByText(\"x\").closest(\"button\");\n    const sourceButton = screen.queryByText(testString).closest(\"button\");\n\n    fireEvent.click(closeButton);\n    fireEvent.click(sourceButton);\n\n    expect(toggleSourceOverlayFn).toHaveBeenCalled();\n    expect(toggleOverlayFn).toHaveBeenCalled();\n  });\n});\n","import React from \"react\";\nimport { render, cleanup, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport ImageCarousel from \"./ImageCarousel\";\n\nafterEach(cleanup);\n\ndescribe(\"ImageCarousel\", () => {\n  test(\"Images are within page\", () => {\n    render(\n      <ImageCarousel>\n        <img src={require(\"../images/RHowlett_IKB.jpg\")} alt=\"Test Image 1\" />\n        <img src={require(\"../images/A_Specimen_by_William_Caslon.jpg\")} alt=\"Test Image 2\" />\n      </ImageCarousel>\n    );\n\n    expect(screen.getByAltText(\"Test Image 1\")).toBeTruthy();\n    expect(screen.getByAltText(\"Test Image 2\")).toBeTruthy();\n  });\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleText\":\"MainMenu_titleText__3DZVN\",\"panel\":\"MainMenu_panel__2B8MV\",\"menu_label\":\"MainMenu_menu_label__bAmr2\",\"menu_button\":\"MainMenu_menu_button__Kt0uL\"};","// package imports\nimport React from \"react\";\nimport Dry from \"json-dry\";\n\n// Brunel components\nimport ForceGraph from \"./components/ForceGraph\";\nimport ShipSelector from \"./components/ShipSelector\";\nimport TextButton from \"./components/TextButton\";\nimport LabelButton from \"./components/LabelButton\";\nimport HowDoIOverlay from \"./components/HowDoIOverlay\";\nimport Overlay from \"./components/Overlay\";\nimport SearchBar from \"./components/SearchBar\";\nimport BioOverlay from \"./components/BioOverlay\";\nimport ShipOverlay from \"./components/ShipOverlay\";\nimport SlidingPanel from \"./components/SlidingPanel\";\nimport MainMenu from \"./components/MainMenu\";\nimport WarningOverlay from \"./components/WarningOverlay\";\n\nimport HBox from \"./components/HBox\";\nimport VBox from \"./components/VBox\";\nimport BigBox from \"./components/BigBox\";\n\n// Brunel model\nimport Social from \"./model/Social\";\n\n// Data for import\nimport graphData from \"./socialNetwork.json\";\nimport positionGroups from \"./data/positionGroups.json\";\nimport imageData from \"./images.json\";\n\nimport gw_text from \"./gw_text.md\";\nimport gb_text from \"./gb_text.md\";\nimport ge_text from \"./ge_text.md\";\nimport help_text from \"./help_text.md\";\n\n// Styling for the app\nimport styles from \"./SocialApp.module.css\";\n\nimport { score_by_connections, score_by_influence } from \"./model/ScoringFunctions\";\n\nimport { size_by_connections, size_by_influence } from \"./model/SizingFunctions\";\n\nclass SocialApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Load in the Dried graph data from JSON\n    let social = Dry.parse(graphData);\n\n    if (!(social instanceof Social)) {\n      console.error(\"Could not parse!\");\n      social = new Social();\n    }\n\n    this.updateSize = this.updateSize.bind(this);\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n      commercialFiltered: false,\n      engineersFiltered: false,\n      spiralOrder: \"Influence\",\n      nodeSize: \"Influence\",\n      commercialNodeFilter: [],\n      engineerNodeFilter: [],\n      connectedNodes: null,\n      selectedShip: null,\n      selectedShipID: null,\n      isOverlayOpen: false,\n      searchText: \"\",\n      searchIncludeBios: true,\n      searchHighlightLinks: false,\n      menuVisible: false,\n      height: 0,\n      width: 0,\n      warningVisible: true,\n    };\n\n\n    Object.keys(imageData).forEach((key) => {\n      social.setImage(key, imageData[key]);\n    });\n\n    const ssGW = social.getProjects().getByName(\"SS Great Western\");\n    this.state.selectedShip = ssGW.getName();\n    this.state.selectedShipID = ssGW.getID();\n\n    const ssGB = social.getProjects().getByName(\"SS Great Britain\");\n    const ssGE = social.getProjects().getByName(\"SS Great Eastern\");\n\n    fetch(gw_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setProjectText(ssGW, text)\n    });\n\n    fetch(gb_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setProjectText(ssGB, text)\n    });\n\n    fetch(ge_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setProjectText(ssGE, text)\n    });\n\n    fetch(help_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setHelpText(text)\n    });\n\n    // make sure that we start showing only the Great Western\n    this.state.social.toggleFilter(ssGW);\n\n    this.spiralOrders = Object.freeze({\n      Connections: score_by_connections,\n      Influence: score_by_influence,\n    });\n\n    this.nodeSizes = Object.freeze({\n      Influence: size_by_influence,\n      Connections: size_by_connections,\n    });\n\n    this.state.social.setSizingFunction(size_by_influence);\n\n    // Find the investors and engineers for easy filtering\n    // This requires the\n    this.findInvestorsAndEngineers();\n\n    this.state.social.setScoringFunction(this.spiralOrders[this.state.spiralOrder]);\n\n    this.socialGraph = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  updateSize() {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n    console.log(`WINDOW ${this.state.width}x${this.state.height}`);\n  }\n\n  slotSetAnchor(item) {\n    let social = this.state.social;\n\n    if (social.setAnchor(item)) {\n      this.setState({ social: social });\n    }\n  }\n\n  slotReadMore(item) {\n    this.setOverlay(\n      <BioOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        person={item}\n      />\n    );\n  }\n\n  slotShowShip(item) {\n    this.setOverlay(\n      <ShipOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        ship={item}\n      />\n    );\n  }\n\n  slotSetShip(item) {\n    if (!item._isAProjectObject) {\n      console.error(\"Cannot set item that is not a project.\");\n      return;\n    }\n\n    let social = this.state.social;\n    social.setFilter(\"project\", item);\n\n    social.setDefaultImage(social.getImage(item));\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({ selectedShip: item.getName(), selectedShipID: item.getID() });\n    this.setState({ social: social });\n  }\n\n  slotClearFilters() {\n    let social = this.state.social;\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    social.filterUnconnectedNodes(true);\n    social.filterNonContributingEngineers(true);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: false,\n      commercialFiltered: false,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n    });\n  }\n\n  toggleEngCommFilter() {\n    if (this.state.engineersFiltered) {\n      this.slotToggleFilterCommercial();\n    } else if (this.state.commercialFiltered) {\n      this.slotToggleFilterCommercial();\n    } else {\n      this.slotToggleFilterEngineer();\n    }\n  }\n\n  slotToggleNonContributingEngineers() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(!this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterNCEngineers: !this.state.filterNCEngineers,\n    });\n  }\n\n  slotToggleUnconnectedNodes() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(!this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterUnconnectedNodes: !this.state.filterUnconnectedNodes,\n    });\n  }\n\n  slotToggleFilterEngineer() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: !this.state.engineersFiltered,\n      commercialFiltered: false,\n    });\n  }\n\n  slotToggleFilterCommercial() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      commercialFiltered: !this.state.commercialFiltered,\n      engineersFiltered: false,\n    });\n  }\n\n  slotClicked(id) {\n    let social = this.state.social;\n\n    if (!id) {\n      let last_search = this.state.cachedSearch;\n\n      if (last_search === \"\") {\n        social.clearSelections();\n        social.clearHighlights();\n        this.setState({\n          social: social,\n          searchText: \"\",\n          cachedSearch: \"\",\n          searchWasItem: false,\n        });\n      } else {\n        this.performSearch(this.state.cachedSearch, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n      }\n    } else {\n      let item = social.get(id);\n\n      social.setSelected(id, true, true);\n      this.setState({\n        social: social,\n        searchText: item.getName(),\n        searchWasItem: true,\n      });\n    }\n  }\n\n  slotWindowChanged(window) {\n    let social = this.state.social;\n\n    if (social.setWindow(window)) {\n      this.setState({ social: social });\n    }\n  }\n\n  hasConnections(entity) {\n    return this.state.social.getConnections().gotConnections(entity.id);\n  }\n\n  findInvestorsAndEngineers() {\n    // Add nodes to the commercial or engineering groups. This\n    // creates filters that filter positions that we've matched\n    // as benig \"engineer\" or \"commercial\"\n    let commercialNodeFilter = this.state.commercialNodeFilter;\n    let engineerNodeFilter = this.state.engineerNodeFilter;\n\n    const social = this.state.social;\n\n    let positions = social.getPositions(false).items();\n\n    Object.keys(positions).forEach((name) => {\n      // Trim any extra characters or whitespace from the position string\n      const namedPosition = name\n        .toLowerCase()\n        .replace(/\\s/g, \"\")\n        .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n\n      // Here we need to check if they've already been saved to stop double counting\n      if (positionGroups[\"commercial\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!commercialNodeFilter.includes(positionID)) {\n          commercialNodeFilter.push(positionID);\n        }\n      }\n\n      if (positionGroups[\"engineering\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!engineerNodeFilter.includes(positionID)) {\n          engineerNodeFilter.push(positionID);\n        }\n      }\n    });\n  }\n\n  toggleSpiralOrder() {\n    const order = this.state.spiralOrder;\n\n    if (order === \"Influence\") {\n      this.setSpiralOrder(\"Connections\");\n    } else if (order === \"Connections\") {\n      this.setSpiralOrder(\"Influence\");\n    }\n  }\n\n  setSpiralOrder(order) {\n    if (order in this.spiralOrders) {\n      if (this.state.spiralOrder !== order) {\n        let social = this.state.social;\n        social.setScoringFunction(this.spiralOrders[order]);\n        this.setState({\n          social: social,\n          spiralOrder: order,\n        });\n      }\n    } else {\n      console.error(\"Invalid spiral order, valid orders are \", Object.keys(this.spiralOrders));\n    }\n  }\n\n  toggleNodeSize() {\n    const size = this.state.nodeSize;\n\n    if (size === \"Influence\") {\n      this.setNodeSize(\"Connections\");\n    } else if (size === \"Connections\") {\n      this.setNodeSize(\"Influence\");\n    }\n  }\n\n  setNodeSize(size) {\n    if (size in this.nodeSizes) {\n      if (this.state.nodeSize !== size) {\n        let social = this.state.social;\n        social.setSizingFunction(this.nodeSizes[size]);\n        this.setState({\n          social: social,\n          nodeSize: size,\n        });\n      }\n    } else {\n      console.error(\"Invalid sizing function, valid functions are \", Object.keys(this.nodeSizes));\n    }\n  }\n\n  setOverlay(item) {\n    this.setState({\n      overlayItem: item,\n      isOverlayOpen: true,\n    });\n  }\n\n  closeOverlay() {\n    this.setState({\n      isOverlayOpen: false,\n      overlayItem: null,\n    });\n  }\n\n  performSearch(text, include_bios, highlight_links) {\n    let social = this.state.social;\n\n    social.selectSearchMatching(text, include_bios, highlight_links);\n\n    this.setState({\n      social: social,\n      searchIncludeBios: include_bios,\n      searchHighlightLinks: highlight_links,\n      searchText: text,\n      searchWasItem: false,\n      cachedSearch: text,\n    });\n  }\n\n  slotCloseWarning() {\n    this.setState({ warningVisible: false });\n  }\n\n  slotShowMenu() {\n    this.setState({ menuVisible: true });\n  }\n\n  slotCloseMenu() {\n    this.setState({ menuVisible: false });\n  }\n\n  slotUpdateSearch(text) {\n    this.performSearch(text, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n  }\n\n  slotSearchBiosToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, toggled, this.state.searchHighlightLinks);\n    }\n  }\n\n  slotSearchHighlightToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, this.state.searchIncludeBios, toggled);\n    }\n  }\n\n  toggleOverlay() {\n    this.setState({ isOverlayOpen: !this.state.isOverlayOpen });\n  }\n\n  resetAll() {\n    window.location.reload(true);\n  }\n\n  render() {\n    let menu = (\n      <TextButton\n        onClick={() => {\n          this.slotShowMenu();\n        }}\n      >\n        Options\n      </TextButton>\n    );\n\n    let search = (\n      <SearchBar\n        emitUpdate={(text) => {\n          this.slotUpdateSearch(text);\n        }}\n        emitSearchHighlightToggled={(toggled) => {\n          this.slotSearchHighlightToggled(toggled);\n        }}\n        searchText={this.state.searchText}\n        searchHighlightToggled={this.state.searchHighlightLinks}\n        searchHighlightAvailable={!this.state.searchWasItem}\n      />\n    );\n\n    let help = (\n      <TextButton\n        onClick={() => {\n          this.setOverlay(\n            <HowDoIOverlay\n              social={this.state.social}\n              close={() => {\n                this.closeOverlay();\n              }}\n            />\n          );\n        }}\n      >\n        Info\n      </TextButton>\n    );\n\n    let graph = (\n      <ForceGraph\n        social={this.state.social}\n        selected={this.state.selected_item}\n        highlighted={this.state.highlighted_item}\n        signalClicked={(id) => this.slotClicked(id)}\n        emitSetCenter={(id) => {\n          this.slotSetAnchor(id);\n        }}\n        emitReadMore={(id) => {\n          this.slotReadMore(id);\n        }}\n      />\n    );\n\n    let spiral_button = (\n      <LabelButton\n        label=\"Spiral Order\"\n        button={this.state.spiralOrder}\n        onClick={() => {\n          this.toggleSpiralOrder();\n        }}\n      />\n    );\n\n    let ship_button = (\n      <ShipSelector\n        projects={this.state.social.getProjects()}\n        emitSetShip={(item) => this.slotSetShip(item)}\n        emitShowShip={(item) => this.slotShowShip(item)}\n      />\n    );\n\n    let size_button = (\n      <LabelButton\n        label=\"Node Size\"\n        button={this.state.nodeSize}\n        onClick={() => {\n          this.toggleNodeSize();\n        }}\n      />\n    );\n\n    let filter_text = \"None\";\n\n    if (this.state.commercialFiltered) {\n      filter_text = \"Commercial\";\n    } else if (this.state.engineersFiltered) {\n      filter_text = \"Engineers\";\n    }\n\n    let filter_button = (\n      <LabelButton\n        label=\"Filter\"\n        button={filter_text}\n        onClick={() => {\n          this.toggleEngCommFilter();\n        }}\n      />\n    );\n\n    let unconnected_button = (\n      <LabelButton\n        label=\"Unconnected\"\n        button={this.state.filterUnconnectedNodes ? \"Invisible\" : \"Visible\"}\n        onClick={() => {\n          this.slotToggleUnconnectedNodes();\n        }}\n      />\n    );\n\n    let noncontrib_button = (\n      <LabelButton\n        label=\"Non-contributers\"\n        button={this.state.filterNCEngineers ? \"Invisible\" : \"Visible\"}\n        onClick={() => {\n          this.slotToggleNonContributingEngineers();\n        }}\n      />\n    );\n\n    let search_text = this.state.searchIncludeBios ? \"Biographies\" : \"Names\";\n\n    let toggle_search = () => {\n      this.slotSearchBiosToggled(!this.state.searchIncludeBios);\n    };\n\n    let search_button = (\n      <LabelButton\n        label=\"Search\"\n        button={search_text}\n        onClick={toggle_search}\n      />\n    );\n\n    let overlay = null;\n    if (this.state.isOverlayOpen) {\n      overlay = (\n        <Overlay\n          toggleOverlay={() => {\n            this.toggleOverlay();\n          }}\n        >\n          {this.state.overlayItem}\n        </Overlay>\n      );\n    }\n\n    let left_side = null;\n    let right_side = null;\n\n    if (this.state.width > 900) {\n      left_side = (\n        <HBox>\n          {spiral_button}\n          {filter_button}\n          {search_button}\n        </HBox>\n      );\n\n      right_side = (\n        <HBox>\n          {unconnected_button}\n          {noncontrib_button}\n          {size_button}\n        </HBox>\n      );\n    } else if (this.state.width > 700) {\n      left_side = (\n        <HBox>\n          {spiral_button}\n          {filter_button}\n        </HBox>\n      );\n\n      right_side = (\n        <HBox>\n          {noncontrib_button}\n          {size_button}\n        </HBox>\n      );\n    } else if (this.state.width > 550) {\n      left_side = spiral_button;\n      right_side = size_button;\n    }\n\n    let mainmenu = (\n      <SlidingPanel isOpen={this.state.menuVisible}\n        position=\"left\" height=\"100%\" width=\"10em\">\n        <MainMenu\n          close={() => {\n            this.slotCloseMenu();\n          }}\n          spiralOrder={this.state.spiralOrder}\n          filterText={filter_text}\n          sizeText={this.state.nodeSize}\n          searchText={search_text}\n\n          unconnectedNodesVisible={!this.state.filterUnconnectedNodes}\n          ncEngineersVisible={!this.state.filterNCEngineers}\n          engineersFiltered={this.state.engineersFiltered}\n          commercialFiltered={this.state.commercialFiltered}\n          searchHighlight={this.state.searchHighlightLinks}\n          searchBios={this.state.searchIncludeBios}\n          emitResetFilters={() => {\n            this.slotClearFilters();\n          }}\n          emitToggleSpiralOrder={() => this.toggleSpiralOrder()}\n          emitToggleFilter={() => this.toggleEngCommFilter()}\n          emitToggleNodeSize={() => this.toggleNodeSize()}\n          emitToggleSearch={toggle_search}\n\n          emitToggleFilterCommercial={() => this.slotToggleFilterCommercial()}\n          emitToggleFilterEngineering={() => this.slotToggleFilterEngineer()}\n          emitToggleUnconnectedNodesVisible={() => this.slotToggleUnconnectedNodes()}\n          emitToggleNCEngineersVisible={() => this.slotToggleNonContributingEngineers()}\n          emitSearchHighlightToggled={() => this.slotSearchHighlightToggled(!this.state.searchHighlightLinks)}\n          emitSearchBiosToggled={() => this.slotSearchBiosToggled(!this.state.searchIncludeBios)}\n        />\n      </SlidingPanel>\n    );\n\n    // make sure that we don't have too many nodes...\n    let nnodes = this.state.social.getGraph().nodes.length;\n\n    let warning_popover = null;\n\n    if (this.state.warningVisible && nnodes > 50) {\n      warning_popover = (\n        <Overlay useBackground={false} toggleOverlay={() => { this.slotCloseWarning() }}>\n        <WarningOverlay close={() => { this.slotCloseWarning() }}>\n            As you can see, this is a busy network. Using filters will allow you\n            to examine the network more closely.\n        </WarningOverlay>\n          </Overlay>\n      );\n    }\n\n    return (\n      <div>\n        {mainmenu}\n        <div className={styles.ui_main}>\n          <VBox>\n            <HBox>\n              {menu}\n              <BigBox>{search}</BigBox>\n              {help}\n            </HBox>\n\n            <BigBox>\n              <div className={styles.fullscreen}>{graph}</div>\n            </BigBox>\n\n            <HBox>\n              {left_side}\n              <BigBox>{ship_button}</BigBox>\n              {right_side}\n            </HBox>\n          </VBox>\n        </div>\n        {overlay}\n        {warning_popover}\n      </div>\n    );\n  }\n}\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Overlay_overlay__3n4WI\",\"overlayNoBackground\":\"Overlay_overlayNoBackground__17dWq\",\"container\":\"Overlay_container__Mgt_A\"};","import React from \"react\";\n\nimport { render, cleanup, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport Overlay from \"./Overlay\";\nimport TextButton from \"./TextButton\";\n\nafterEach(cleanup);\n\ndescribe(\"Overlay Item\", () => {\n  it(\"Text on overlay renders\", () => {\n    const toggleOverlayFn = jest.fn();\n    const testString = \"This is a test\";\n    render(\n      <Overlay toggleOverlay={toggleOverlayFn} useBackground={true}>\n        <TextButton>{testString}</TextButton>\n      </Overlay>\n    );\n\n    expect(screen.queryAllByText(testString)).toBeTruthy();\n  });\n\n  it(\"No background matches snapshot\", () => {\n    const toggleOverlayFn = jest.fn();\n    const testString = \"This is a test\";\n    const { asFragment } = render(\n      <Overlay toggleOverlay={toggleOverlayFn} useBackground={false}>\n        <TextButton>{testString}</TextButton>\n      </Overlay>\n    );\n\n    expect(asFragment()).toMatchSnapshot();\n  });\n\n  it(\"With background matches snapshot\", () => {\n    const toggleOverlayFn = jest.fn();\n    const testString = \"This is a test\";\n    const { asFragment } = render(\n      <Overlay toggleOverlay={toggleOverlayFn} useBackground={true}>\n        <TextButton>{testString}</TextButton>\n      </Overlay>\n    );\n\n    expect(asFragment()).toMatchSnapshot();\n  });\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BioOverlay from \"./BioOverlay\";\nimport SourceOverlay from \"./SourceOverlay\";\nimport Overlay from \"./Overlay\";\n\nclass OverlayWrapper extends React.Component {\n  render() {\n    const sourceButtonText = this.props.sourceButtonText;\n    const socialSources = this.props.social.getSources();\n\n    if (!this.props.sourceIDs) {\n      return null;\n    }\n\n    let overlay = null;\n    if (this.props.isOverlayOpen && this.props.isSourceOverlayOpen) {\n      overlay = (\n        <Overlay toggleOverlay={this.props.toggleOverlay}>\n          <SourceOverlay\n            sources={socialSources}\n            person={this.props.entity}\n            sourceIDs={this.props.sourceIDs}\n            toggleOverlay={this.props.toggleOverlay}\n            toggleBioOverlay={this.props.toggleBioOverlay}\n          />\n        </Overlay>\n      );\n    } else if (this.props.isOverlayOpen && this.props.isBioOverlayOpen) {\n      overlay = (\n        <Overlay toggleOverlay={this.props.toggleOverlay}>\n          <BioOverlay\n            sources={socialSources}\n            person={this.props.entity}\n            social={this.props.social}\n            toggleOverlay={this.props.toggleOverlay}\n            toggleSourceOverlay={this.props.toggleSourceOverlay}\n            sourceButtonText={sourceButtonText}\n          />\n        </Overlay>\n      );\n    }\n\n    return overlay;\n  }\n}\n\nOverlayWrapper.propTypes = {\n  entity: PropTypes.object.isRequired,\n  isBioOverlayOpen: PropTypes.bool.isRequired,\n  isOverlayOpen: PropTypes.bool.isRequired,\n  isSourceOverlayOpen: PropTypes.bool.isRequired,\n  social: PropTypes.object.isRequired,\n  sourceButtonText: PropTypes.string.isRequired,\n  sourceIDs: PropTypes.array.isRequired,\n  toggleBioOverlay: PropTypes.func.isRequired,\n  toggleOverlay: PropTypes.func.isRequired,\n  toggleSourceOverlay: PropTypes.func.isRequired,\n};\n\nexport default OverlayWrapper;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SourceOverlay_container__19Q2o\",\"closeButton\":\"SourceOverlay_closeButton__2LDeH\",\"divider\":\"SourceOverlay_divider__3b3gS\",\"nameHeader\":\"SourceOverlay_nameHeader__2hk5a\",\"sourceName\":\"SourceOverlay_sourceName__12n91\",\"body\":\"SourceOverlay_body__3Ilgc\",\"biography\":\"SourceOverlay_biography__rfNz9\",\"imageSection\":\"SourceOverlay_imageSection__2dP8A\"};","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_diagram.898c32f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_transverse_section.7767cb60.jpg\";","module.exports = __webpack_public_path__ + \"static/media/800px-Gutenberg_Bible.89cc4cbe.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Brunel_letter_GWR.ee7f061c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Great_Western_maiden_voyage.f85d382e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/IllustriteZeitung_SS_GreatBritain.946104e0.png\";","module.exports = __webpack_public_path__ + \"static/media/Sumerian_26th_c_Adab.757d98b8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/The_Steamer_Great_Western_small.8756970f.jpg\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAPAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAgACAAwERAAIRAQMRAf/EAFIAAQEAAAAAAAAAAAAAAAAAAAAIAQEAAAAAAAAAAAAAAAAAAAAAEAABBAMAAAAAAAAAAAAAAADwATFBUaECIhEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AppNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwH//2Q==\"","module.exports = __webpack_public_path__ + \"static/media/Bryan_Donkin.e51fd58c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Christopher_Claxton.ac353b13.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Edward_Chappell.9d8c9fdf.jpg\";","module.exports = __webpack_public_path__ + \"static/media/John_Grantham.fb146611.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Robert_Bright.c0731a3c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Samuel_Hall.522bb947.jpg\";","module.exports = __webpack_public_path__ + \"static/media/William_Fairbairn.66f3ebae.jpg\";","module.exports = __webpack_public_path__ + \"static/media/William_Symonds.a46054c2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Great_Britain.6235a4a6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Great_Eastern.0757fd23.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Great_Western.bab3c03f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ssgb_logo.ee48e16d.png\";","import Dry from \"json-dry\";\nimport React from \"react\";\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\n/* eslint-disable no-unused-vars */\nimport BioOverlay from \"./BioOverlay\";\n// This is required to create the social object\nimport Social from \"../model/Social\";\n/* eslint-enable no-unused-vars */\nimport graphData from \"../socialNetwork.json\";\n\nimport Popover from \"./Popover\";\n\nafterEach(cleanup);\n\ndescribe(\"Popover\", () => {\n  const social = Dry.parse(graphData);\n  const name = \"William Patterson\";\n  const node = social.getPeople().getByName(name).getNode();\n  const shipID = social.getProjects().getIDs()[0];\n\n  test(\"Close button works\", () => {\n    let toggleFn = jest.fn();\n    let clearPopupsFn = jest.fn();\n\n    render(\n      <Popover\n        social={social}\n        node={node}\n        togglePopover={toggleFn}\n        selectedShipID={shipID}\n        clearPopups={clearPopupsFn}\n      />\n    );\n\n    const closeButton = screen.queryByText(\"x\").closest(\"button\");\n\n    fireEvent.click(closeButton);\n\n    expect(clearPopupsFn).toHaveBeenCalled();\n  });\n\n  test(\"All text rendered correctly\", () => {\n    let toggleFn = jest.fn();\n    let clearPopupsFn = jest.fn();\n\n    render(\n      <Popover\n        social={social}\n        node={node}\n        togglePopover={toggleFn}\n        selectedShipID={shipID}\n        clearPopups={clearPopupsFn}\n      />\n    );\n\n    expect(screen.queryByText(name)).toBeTruthy();\n    expect(screen.queryByText(/Number of connections/)).toBeTruthy();\n    expect(screen.queryByText(/Bristol Ship-builder/)).toBeTruthy();\n    expect(screen.queryByText(/Read more/)).toBeTruthy();\n    expect(screen.queryByText(/Sources/)).toBeTruthy();\n  });\n\n  test(\"Sources button clicks\", () => {\n    let toggleFn = jest.fn();\n    let clearPopupsFn = jest.fn();\n\n    render(\n      <Popover\n        social={social}\n        node={node}\n        togglePopover={toggleFn}\n        selectedShipID={shipID}\n        clearPopups={clearPopupsFn}\n      />\n    );\n\n    expect(screen.queryByText(name)).toBeTruthy();\n    expect(screen.queryByText(/Number of connections/)).toBeTruthy();\n    expect(screen.queryByText(/Bristol Ship-builder/)).toBeTruthy();\n    expect(screen.queryByText(/Read more/)).toBeTruthy();\n    expect(screen.queryByText(/Sources/)).toBeTruthy();\n  });\n\n  test(\"Clicking read more opens overlay\", () => {\n    let toggleFn = jest.fn();\n    let clearPopupsFn = jest.fn();\n\n    render(\n      <Popover\n        social={social}\n        node={node}\n        togglePopover={toggleFn}\n        selectedShipID={shipID}\n        clearPopups={clearPopupsFn}\n      />\n    );\n\n    const readMoreButton = screen.queryByText(\"Read more\").closest(\"button\");\n\n    expect(screen.queryByTestId(\"bioOverlay\")).toBeFalsy();\n\n    fireEvent.click(readMoreButton);\n\n    expect(screen.queryByTestId(\"bioOverlay\")).toBeTruthy();\n  });\n\n  test(\"Clicking source button\", () => {\n    let toggleFn = jest.fn();\n    let clearPopupsFn = jest.fn();\n\n    render(\n      <Popover\n        social={social}\n        node={node}\n        togglePopover={toggleFn}\n        selectedShipID={shipID}\n        clearPopups={clearPopupsFn}\n      />\n    );\n\n    const sourceButton = screen.queryByText(\"RAIL 1149/60\").closest(\"button\");\n\n    expect(screen.queryByTestId(\"sourceOverlay\")).toBeFalsy();\n\n    fireEvent.click(sourceButton);\n\n    expect(screen.queryByTestId(\"sourceOverlay\")).toBeTruthy();\n  });\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"SearchBar_form__3-Lq7\",\"searchBar\":\"SearchBar_searchBar__W2Qbi\",\"input\":\"SearchBar_input__3Mb6o\",\"clearButton\":\"SearchBar_clearButton__12EQd\",\"linkButton\":\"SearchBar_linkButton__3mGVL\",\"linkButtonHighlighted\":\"SearchBar_linkButtonHighlighted__2Tyc2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ShipOverlay_container__3pB6b\",\"closeButton\":\"ShipOverlay_closeButton__126fc\",\"image\":\"ShipOverlay_image__3BgoG\",\"content\":\"ShipOverlay_content__UIhDk\",\"name\":\"ShipOverlay_name__2KJnm\",\"bio\":\"ShipOverlay_bio__EX0YP\",\"markdown\":\"ShipOverlay_markdown__Droyi\"};","import React from \"react\";\nimport Dry from \"json-dry\";\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport ShipSelector from \"./ShipSelector\";\n// This is required to create the social object\n/* eslint-disable no-unused-vars */\nimport Social from \"../model/Social\";\n/* eslint-enable no-unused-vars */\nimport graphData from \"../socialNetwork.json\";\n\nafterEach(cleanup);\n\ndescribe(\"ShipSelector\", () => {\n  const social = Dry.parse(graphData);\n  const projects = social.getProjects();\n\n  test(\"Check overlay and search bar are rendered\", () => {\n    const shipFilterFn = jest.fn();\n\n    render(<ShipSelector projects={projects} shipFilter={shipFilterFn} />);\n\n    expect(screen.getByText(\"SS Great Western\")).toBeTruthy();\n    expect(screen.getByText(\"SS Great Britain\")).toBeTruthy();\n    expect(screen.getByText(\"SS Great Eastern\")).toBeTruthy();\n  });\n\n  test(\"Clicking ship calls filter function\", () => {\n    const shipFilterFn = jest.fn();\n\n    render(<ShipSelector projects={projects} shipFilter={shipFilterFn} />);\n\n    fireEvent.click(screen.getByText(\"SS Great Britain\").closest(\"button\"));\n\n    expect(shipFilterFn).toHaveBeenCalled();\n\n    expect(screen).toMatchSnapshot();\n  });\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","import React from \"react\";\nimport Dry from \"json-dry\";\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom/extend-expect\";\n\nimport SourceOverlay from \"./SourceOverlay\";\n// This is required to create the social object\n/* eslint-disable no-unused-vars */\nimport Social from \"../model/Social\";\n/* eslint-enable no-unused-vars */\n\nimport graphData from \"../socialNetwork.json\";\n\nafterEach(cleanup);\n\ndescribe(\"SourceOverlay\", () => {\n  const social = Dry.parse(graphData);\n  const sources = social.getSources();\n  const name = \"Christopher Claxton\";\n  const person = social.getPeople().getByName(name);\n\n  const nSource = 10;\n\n  const sourceIDs = [sources.values()[nSource][\"state\"][\"id\"]];\n  const sourceName = sources.values()[nSource][\"state\"][\"name\"];\n\n  test(\"Test text renders correctly\", () => {\n    const toggleOverlayFn = jest.fn();\n    const toggleSourceOverlayFn = jest.fn();\n    render(\n      <SourceOverlay\n        sources={sources}\n        sourceIDs={sourceIDs}\n        toggleOverlay={toggleOverlayFn}\n        toggleBioOverlay={toggleSourceOverlayFn}\n        person={person}\n      />\n    );\n\n    expect(screen.queryByText(name)).toBeInTheDocument();\n    expect(screen.queryByText(sourceName)).toBeInTheDocument();\n  });\n\n  test(\"Clicking biography button calls function\", () => {\n    const toggleOverlayFn = jest.fn();\n    const toggleSourceOverlayFn = jest.fn();\n    render(\n      <SourceOverlay\n        sources={sources}\n        sourceIDs={sourceIDs}\n        toggleOverlay={toggleOverlayFn}\n        toggleBioOverlay={toggleSourceOverlayFn}\n        person={person}\n      />\n    );\n\n    fireEvent.click(screen.getByText(\"Open biography\").closest(\"button\"));\n\n    expect(toggleSourceOverlayFn).toHaveBeenCalled();\n  });\n\n  test(\"Contains an image\", () => {\n    const toggleOverlayFn = jest.fn();\n    const toggleSourceOverlayFn = jest.fn();\n    render(\n      <SourceOverlay\n        sources={sources}\n        sourceIDs={sourceIDs}\n        toggleOverlay={toggleOverlayFn}\n        toggleBioOverlay={toggleSourceOverlayFn}\n        person={person}\n      />\n    );\n    expect(screen.queryAllByTestId(\"sourceImage\")).toBeTruthy();\n  });\n});\n","import React from \"react\";\n\n// import react-testing methods\nimport { render, cleanup, fireEvent, screen } from \"@testing-library/react\";\n\n// add custom jest matchers from jest-dom\nimport \"@testing-library/jest-dom/extend-expect\";\n\n// the component to test\nimport TextButton from \"./TextButton\";\n\nafterEach(cleanup);\n\ndescribe(\"TextButton\", () => {\n  it(\"Renders and is clickable\", () => {\n    const testFn = jest.fn();\n    const testString = \"Some test text\";\n\n    render(<TextButton onClick={testFn}>{testString}</TextButton>);\n\n    expect(screen.queryByText(testString)).toBeInTheDocument();\n\n    fireEvent.click(screen.queryByText(testString).closest(\"button\"));\n\n    expect(testFn).toHaveBeenCalled();\n  });\n});\n","\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./ToggleButton.module.css\";\n\n\nclass ToggleButton extends React.Component {\n\n  render() {\n\n    let emitToggled = null;\n\n    if (this.props.emitToggled) {\n      emitToggled = this.props.emitToggled;\n    } else {\n      emitToggled = () => null;\n    }\n\n    let toggled = this.props.toggled;\n\n    if (toggled) {\n      return (\n        <div className={styles.toggled}\n          onClick={() => { emitToggled(false) }} >\n          {this.props.children}\n        </div>);\n    }\n    else {\n      return (\n        <div className={styles.untoggled}\n          onClick={() => { emitToggled(true) }} >\n          {this.props.children}\n        </div>);\n    }\n  }\n}\n\nToggleButton.propTypes = {\n  children: PropTypes.any.isRequired,\n  emitToggled: PropTypes.func.isRequired,\n  toggled: PropTypes.bool.isRequired,\n};\n\nexport default ToggleButton;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggled\":\"ToggleButton_toggled__vSC4i\",\"untoggled\":\"ToggleButton_untoggled__1WAc8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"WarningOverlay_container__zI85t\",\"content\":\"WarningOverlay_content__1giRX\"};","module.exports = __webpack_public_path__ + \"static/media/gb_text.9a8d57c4.md\";","module.exports = __webpack_public_path__ + \"static/media/ge_text.8f5b7317.md\";","module.exports = __webpack_public_path__ + \"static/media/gw_text.f36f6627.md\";","module.exports = __webpack_public_path__ + \"static/media/help_text.9d832878.md\";","import Dry from \"json-dry\";\n\nimport Affiliations from \"./Affiliations\";\nimport Affiliation from \"./Affiliation\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is an affiliation\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Affiliation({ name: name1, url: url1 });\n\n  let name2 = \"This is another affiliation\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Affiliation({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Affiliations();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\n\nimport Businesses from \"./Businesses\";\nimport Business from \"./Business\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a business\";\n\n  let p1 = new Business({ name: name1 });\n\n  let name2 = \"This is another business\";\n\n  let p2 = new Business({ name: name2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Businesses();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import DateRange from \"./DateRange\";\nimport RoughDate from \"./RoughDate\";\n\ntest(\"simple\", () => {\n  let a = new DateRange();\n  expect(a.hasBounds()).toStrictEqual(false);\n  expect(a.hasStart()).toStrictEqual(false);\n  expect(a.hasEnd()).toStrictEqual(false);\n\n  a = new DateRange({ start: \"1850-12-02\", end: \"1850-12-01\" });\n\n  expect(a.getStartDate() < a.getEndDate()).toStrictEqual(true);\n  expect(a.hasBounds()).toStrictEqual(true);\n  expect(a.hasStart()).toStrictEqual(true);\n  expect(a.hasEnd()).toStrictEqual(true);\n  expect(a.getEndDate() - a.getStartDate()).toStrictEqual(24 * 60 * 60 * 1000);\n  expect(RoughDate.delta(a.getEnd(), a.getStart())).toStrictEqual(24 * 60 * 60 * 1000);\n\n  let b = new DateRange({ start: \"1850-12-02\", end: \"1852-01-01\" });\n\n  expect(DateRange.eq(a, a)).toStrictEqual(true);\n  expect(DateRange.eq(b, b)).toStrictEqual(true);\n  expect(DateRange.eq(a, b)).toStrictEqual(false);\n\n  let c = new DateRange({ start: \"1850-12-02\", end: \"1850-12-01\" });\n\n  expect(DateRange.eq(a, c)).toStrictEqual(true);\n  expect(DateRange.eq(c, a)).toStrictEqual(true);\n\n  let d = DateRange.clone(b);\n\n  expect(DateRange.eq(b, d)).toStrictEqual(true);\n  expect(DateRange.eq(c, d)).toStrictEqual(false);\n});\n\ntest(\"intersect\", () => {\n  let a = new DateRange({ start: \"1850-01-31\", end: \"1850-12-31\" });\n  let b = new DateRange({ start: \"1849-01-31\", end: \"1850-07-31\" });\n  let intersect = new DateRange({ start: \"1850-01-31\", end: \"1850-07-31\" }).toString();\n\n  expect(a.intersect(b).toString()).toStrictEqual(intersect);\n  expect(b.intersect(a).toString()).toStrictEqual(intersect);\n\n  let union = new DateRange({ start: \"1849-01-31\", end: \"1850-12-31\" }).toString();\n  expect(a.union(b).toString()).toStrictEqual(union);\n  expect(b.union(a).toString()).toStrictEqual(union);\n\n  let c = new RoughDate({ start: \"1841-01-01\", end: \"1841-12-31\" });\n  let d = new DateRange({ start: \"1839-12-08\", end: \"1841-01-17\" });\n\n  intersect = new DateRange({ start: \"1841-01-01\", end: \"1841-01-17\" }).toString();\n  console.log(intersect);\n  expect(d.intersect(c).toString()).toStrictEqual(intersect);\n});\n","import Dry from \"json-dry\";\n\nimport People from \"./People\";\nimport Person from \"./Person\";\n\ntest(\"simple\", () => {\n  let state1 = { orig_name: \"John Smith\", firstnames: [\"John\"], surnames: [\"Smith\"] };\n\n  let name1 = \"John Smith\";\n\n  let p1 = new Person(state1);\n\n  let state2 = { orig_name: \"Brunel, Isambard\", firstnames: [\"Isambard\"], surnames: [\"Brunel\"] };\n  let name2 = \"Isambard Brunel\";\n\n  let p2 = new Person(state2);\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new People();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"Brunel\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"m\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"Brunel\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"m\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\n\nimport Positions from \"./Positions\";\nimport Position from \"./Position\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a position\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Position({ name: name1, url: url1 });\n\n  let name2 = \"This is another position\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Position({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Positions();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\n\nimport Projects from \"./Projects\";\nimport Project from \"./Project\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a project\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Project({ name: name1, url: url1 });\n\n  let name2 = \"This is another project\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Project({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getURL()).toStrictEqual(url1);\n  expect(p2.getURL()).toStrictEqual(url2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Projects();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import RoughDate from \"./RoughDate\";\nimport DateRange from \"./DateRange\";\n\ntest(\"simple\", () => {\n  let a = new RoughDate({ start: \"1850-01-01\", end: \"1850-12-31\" });\n  let b = new RoughDate({ start: \"1851-01-01\", end: \"1851-12-31\" });\n\n  expect(a.getEarliest().toString()).toStrictEqual(RoughDate.min(a, b).toString());\n  expect(b.getLatest().toString()).toStrictEqual(RoughDate.max(a, b).toString());\n\n  expect(RoughDate.eq(a, a)).toStrictEqual(true);\n  expect(RoughDate.eq(b, b)).toStrictEqual(true);\n  expect(RoughDate.eq(a, b)).toStrictEqual(false);\n\n  let c = new RoughDate({ start: \"1850-01-01\", end: \"1850-12-31\" });\n\n  expect(RoughDate.eq(a, c)).toStrictEqual(true);\n  expect(RoughDate.eq(c, a)).toStrictEqual(true);\n\n  let d = RoughDate.clone(b);\n\n  expect(RoughDate.eq(b, d)).toStrictEqual(true);\n  expect(RoughDate.eq(c, d)).toStrictEqual(false);\n});\n\ntest(\"intersect\", () => {\n  let a = new RoughDate({ start: \"1823-01-01\", end: \"1833-12-31\" });\n  let b = new DateRange({ start: \"1830-01-01\", end: \"1860-01-01\" });\n\n  let intersect = new DateRange({ start: \"1830-01-01\", end: \"1833-12-31\" });\n\n  expect(b.intersect(a).toString()).toStrictEqual(intersect.toString());\n\n  let m1 = a.toDateRange().getStart();\n  let m2 = b.getStart();\n\n  expect(RoughDate.max(m1, m2).toString()).toStrictEqual(m2.toString());\n});\n\ntest(\"minmax\", () => {\n  let a = new RoughDate({ start: \"1841-01-01\", end: \"1841-12-31\" });\n  let b = new RoughDate(\"1839-12-08\");\n\n  expect(RoughDate.min(a, b).toString()).toStrictEqual(b.toString());\n  expect(RoughDate.max(a, b).toString()).toStrictEqual(a.getLatest().toString());\n});\n","import Dry from \"json-dry\";\n\nimport Sources from \"./Sources\";\nimport Source from \"./Source\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a source\";\n  let p1 = new Source({ name: name1 });\n\n  let name2 = \"This is another source\";\n  let p2 = new Source({ name: name2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Sources();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","class KeyError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, KeyError);\n  }\n}\n\nclass ValueError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, ValueError);\n  }\n}\n\nclass DuplicateError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, DuplicateError);\n  }\n}\n\nclass MissingError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, MissingError);\n  }\n}\n\nexport { KeyError, ValueError, DuplicateError, MissingError };\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\nimport { ValueError } from \"./Errors\";\n\nfunction _clean(val) {\n  if (!val || val._isADateRangeObject) {\n    return val;\n  } else if (val._isARoughDateObject) {\n    return val.toDateRange();\n  } else if (\n    Object.prototype.hasOwnProperty.call(val, \"start\") ||\n    Object.prototype.hasOwnProperty.call(val, \"end\") ||\n    Object.prototype.hasOwnProperty.call(val, \"both\") ||\n    Object.prototype.hasOwnProperty.call(val, \"value\")\n  ) {\n    return new DateRange(val);\n  } else {\n    return new DateRange({ both: new RoughDate(val) });\n  }\n}\n\nclass DateRange {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n    };\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return `DateRange(${this.getStartString()})`;\n      } else {\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    } else {\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return this.getStart().toSimpleString();\n      } else {\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    } else if (this.hasStart()) {\n      return `${this.getStart().toSimpleString()}<=>future`;\n    } else if (this.hasEnd()) {\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    } else {\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item) {\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other) {\n    if (item === other) {\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()) {\n      if (!RoughDate.eq(item.getStart(), other.getStart())) {\n        return false;\n      }\n    } else if (item.hasStart() || other.hasStart()) {\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()) {\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())) {\n        return false;\n      }\n    } else if (item.hasEnd() || other.hasEnd()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates) {\n    if (!dates) {\n      return null;\n    } else if (dates._isARoughDateObject || dates._isARoughDateObject) {\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0) {\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1) {\n      for (let i = 1; i < dates.length; ++i) {\n        if (!dates[i].isNull()) {\n          if (date.isNull()) {\n            date = dates[i];\n          } else {\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()) {\n      return null;\n    } else {\n      return date;\n    }\n  }\n\n  merge(other) {\n    if (!other) {\n      return this;\n    } else if (other._isARoughDateObject) {\n      other = other.toDateRange();\n    }\n\n    return new DateRange({\n      start: RoughDate.min(this.getEarliestStart(), other.getEarliestStart()),\n      end: RoughDate.max(this.getLatestEnd(), other.getLatestEnd()),\n    });\n  }\n\n  hasBounds() {\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd() {\n    if (this.state.end) {\n      return !this.state.end.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  hasStart() {\n    if (this.state.start) {\n      return !this.state.start.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  isInstant() {\n    return this.hasStart() && this.state.start === this.state.end;\n  }\n\n  // Returns a DateRange object\n  toDate() {\n    if (this.hasStart()) {\n      if (this.hasEnd()) {\n        return this.getStart().merge(this.getEnd());\n      } else {\n        return this.getStart();\n      }\n    } else {\n      return this.getEnd();\n    }\n  }\n\n  contains(date) {\n    date = _clean(date);\n\n    if (!date) {\n      return true;\n    } else if (date._isADateRangeObject) {\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start) {\n        if (RoughDate.gt(my_start, other_start)) {\n          return false;\n        }\n      } else if (other_start) {\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end) {\n        if (RoughDate.lt(my_end, other_end)) {\n          return false;\n        }\n      } else if (my_end) {\n        return false;\n      }\n\n      return true;\n    } else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other) {\n    other = _clean(other);\n\n    if (!other) {\n      return this;\n    }\n\n    if (!other.hasBounds()) {\n      return this;\n    } else if (!this.hasBounds()) {\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)) {\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)) {\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  union(other) {\n    other = _clean(other);\n    if (!other) {\n      return this;\n    } else if (!other._isADateRangeObject) {\n      other = new DateRange({ value: other });\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  getDelta() {\n    if (this.hasStart() && this.hasEnd()) {\n      try {\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      } catch (error) {\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  zoomIn(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() / (2.0 + scale);\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() * scale;\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = -this.getDelta(); //milliseconds\n      } else {\n        delta = -3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = this.getDelta(); //milliseconds\n      } else {\n        delta = 3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    return this.state.end;\n  }\n\n  getEarliestStart() {\n    if (this.hasStart()) {\n      return this.getStart().getEarliest();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestEnd() {\n    if (this.hasEnd()) {\n      return this.getEnd().getLatest();\n    } else {\n      return null;\n    }\n  }\n\n  getStartDate() {\n    let e = this.getEarliestStart();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEndDate() {\n    let e = this.getLatestEnd();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getStartString() {\n    if (this.state.start) {\n      return this.state.start.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  getEndString() {\n    if (this.state.end) {\n      return this.state.end.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      if (state === \"null\" || state === null) {\n        this.state = { start: null, end: null };\n        return;\n      } else if (state._isADateRangeObject) {\n        this.state = { ...state.state };\n      } else if (state._isARoughDateObject) {\n        this.state = { start: state, end: state };\n      } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n        this.setState(state.value);\n        return;\n      } else if (Object.prototype.hasOwnProperty.call(state, \"both\")) {\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      } else if (typeof state === \"string\") {\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      } else {\n        let start = null;\n\n        if (state.start) {\n          start = new RoughDate(state.start);\n\n          if (start.isNull()) {\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end) {\n          end = new RoughDate(state.end);\n\n          if (end.isNull()) {\n            end = null;\n          }\n        }\n\n        if (start && end) {\n          if (RoughDate.gt(start, end)) {\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)) {\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    } else {\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry() {\n    return this.state;\n  }\n}\n\nDateRange.unDry = function (value) {\n  return new DateRange(value);\n};\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./BigBox.module.css\";\n\n\nclass BigBox extends React.Component {\n    render(){\n        return (\n            <div className={styles.bigbox}>\n                {this.props.children}\n            </div>);\n    }\n}\n\n\nBigBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default BigBox;\n","\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./TextButton.module.css\";\n\n\nclass TextButton extends React.Component {\n\n  render() {\n\n    let onClick = null;\n\n    if (this.props.onClick) {\n      onClick = this.props.onClick;\n    } else {\n      onClick = () => null;\n    }\n\n    return (\n      <button className={styles.button} onClick={onClick}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n\nTextButton.propTypes = {\n  children: PropTypes.any,\n  onClick: PropTypes.func,\n};\n\nexport default TextButton;\n","import Dry from \"json-dry\";\nimport lodash, { isString } from \"lodash\";\n\nimport People from \"./People\";\nimport Businesses from \"./Businesses\";\nimport Connections from \"./Connections\";\nimport Positions from \"./Positions\";\nimport Affiliations from \"./Affiliations\";\nimport Sources from \"./Sources\";\nimport Notes from \"./Notes\";\nimport Projects from \"./Projects\";\nimport Biographies from \"./Biographies\";\nimport DateRange from \"./DateRange\";\nimport get_id from \"./get_id\";\n\nimport score_by_connections from \"./ScoringFunctions\";\nimport size_by_influence from \"./SizingFunctions\";\n\nimport {\n  ValueError\n} from \"./Errors\";\n\nfunction _push(values, list) {\n  if (!list || !values) {\n    return;\n  }\n\n  if (values.length) {\n    for (let i = 0; i < values.length; ++i) {\n      list.push(values[i]);\n    }\n  } else {\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props) {\n      this.state = props;\n    } else {\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this.state.scoring_function = score_by_connections;\n    this.state.sizing_function = size_by_influence;\n    this.state.filter_unconnected = true;\n    this.state.filter_nc_engineers = true;\n    this.state.images = {};\n    this.state.default_image = null;\n    this.state.project_text = {};\n    this.state.help_text = null;\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item) {\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => {\n      return this.get(id);\n    };\n\n    let state = {\n      ...this.state\n    };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    } else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    } else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    } else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    } else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    } else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    } else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)) {\n      state.projects = new Projects();\n    } else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)) {\n      state.biographies = new Biographies();\n    } else {\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try {\n        this.state[key]._updateHooks(getHook);\n      } catch (error) {\n        // console.error(\"For key : \", key, \"\\nError: \", error);\n      }\n    }\n  }\n\n  setImage(id, filename) {\n    id = get_id(id);\n    this.state.images[id] = filename;\n  }\n\n  setDefaultImage(filename) {\n    this.state.default_image = filename;\n  }\n\n  getImage(id) {\n    id = get_id(id);\n    let image = this.state.images[id];\n\n    if (image) {\n      return image;\n    } else {\n      return this.state.default_image;\n    }\n  }\n\n  setHelpText(text) {\n    this.state.help_text = text;\n  }\n\n  getHelpText() {\n    return this.state.help_text;\n  }\n\n  setProjectText(id, text) {\n    id = get_id(id);\n    this.state.project_text[id] = text;\n  }\n\n  getProjectText(id) {\n    id = get_id(id);\n    return this.state.project_text[id];\n  }\n\n  filterNonContributingEngineers(filter = true) {\n    if (this.state.filter_nc_engineers === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_nc_engineers = true;\n    }\n    else {\n      this.state.filter_nc_engineers = false;\n    }\n\n    this.clearCache();\n  }\n\n  filterUnconnectedNodes(filter = true) {\n    if (this.state.filter_unconnected === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_unconnected = true;\n    }\n    else {\n      this.state.filter_unconnected = false;\n    }\n\n    this.clearCache();\n  }\n\n  clearCache() {\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters() {\n    if (this.state.cache.node_filters) {\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // Must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          return item.filterWindow(window);\n        } catch (error) {\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {\n        ...node_filter\n      };\n\n      // this filter is returning matching people and the nodes\n      // that are connected to these people\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[get_id(node)] = 1;\n      }\n\n      this.state.cache.node_filters.push((item) => {\n        if (get_id(item) in filter) {\n          return item;\n        } else {\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          // use an \"OR\" match at the moment as this is more\n          // appropriate for the current use of the gui\n          if (item.inGroup(group_filter, false)) {\n            return item;\n          } else {\n            return null;\n          }\n        } catch (error) {\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters() {\n    if (!this.state.cache.edge_filters) {\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterWindow(window);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterProject(project_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterSource(source_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow() {\n    return this.state.window;\n  }\n\n  getMaxWindow() {\n    return this.state.max_window;\n  }\n\n  _fitWindow(window) {\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && new_window.getDelta() === delta) {\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()) {\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()) {\n      return new DateRange({\n        start: this.state.max_window.getStartDate(),\n        end: this.state.max_window.getStartDate() + delta,\n      });\n    } else {\n      return new DateRange({\n        start: this.state.max_window.getEndDate() - delta,\n        end: this.state.max_window.getEndDate(),\n      });\n    }\n  }\n\n  setMaxWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window) {\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()) {\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window) {\n        this.setWindow(fitted);\n      }\n    } else {\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)) {\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)) {\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.people) {\n        // console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people = this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      if (this.state.filter_nc_engineers) {\n        this.state.cache.people =\n          this.state.cache.people.filterNonContributingEngineers();\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.people =\n          this.state.cache.people.filterUnconnected(this.getConnections(true));\n      }\n\n      return this.state.cache.people;\n    } else {\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.businesses) {\n        // console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses = this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.businesses =\n          this.state.cache.businesses.filterUnconnected(this.getConnections(true));\n      }\n\n      return this.state.cache.businesses;\n    } else {\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.connections) {\n        // console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections = this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.connections;\n    } else {\n      return this.state.connections;\n    }\n  }\n\n  getBiographies() {\n    return this.state.biographies;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {\n      ...this.state.filter\n    };\n  }\n\n  getFilterText() {\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`connected to ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`with source ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in group ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in project ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1) {\n      return filter[0];\n    } else if (filter.length > 1) {\n      return `[${filter.join(\"] and [\")}]`;\n    } else {\n      return null;\n    }\n  }\n\n  _getType(item) {\n    item = get_id(item);\n\n    if (item[0] === \"P\" || item[0] === \"B\") {\n      return \"node\";\n    } else if (item[0] === \"J\") {\n      return \"project\";\n    } else if (item[0] === \"S\") {\n      return \"source\";\n    } else {\n      return \"group\";\n    }\n  }\n\n  isFiltered(item) {\n    item = get_id(item);\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter) {\n      return item in filter;\n    } else {\n      return false;\n    }\n  }\n\n  clearHighlights() {\n    this.getPeople(false).clearHighlights();\n    this.getBusinesses(false).clearHighlights();\n    this.getConnections(false).clearHighlights();\n    this.clearCache();\n  }\n\n  clearSelections() {\n    this.getPeople(false).clearSelections();\n    this.getBusinesses(false).clearSelections();\n    this.clearCache();\n  }\n\n  selectSearchMatching(text, include_bios = false, highlight_links = false) {\n    this.clearSelections();\n    this.clearHighlights();\n\n    try {\n      if (text.length === 0) {\n        this.clearCache();\n        return;\n      }\n    }\n    catch (error) {\n      this.clearCache();\n      return;\n    }\n\n    let result = [];\n\n    try {\n      let items = this.getPeople(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    try {\n      let items = this.getBusinesses(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    if (include_bios) {\n      try {\n        let items = this.getBiographies().search(text);\n        _push(items, result);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    let connections = null;\n\n    if (highlight_links) connections = this.getConnections(true);\n\n    result.forEach((item) => {\n      item = get_id(item);\n      item = this.get(item, false);\n\n      try {\n        if (highlight_links) {\n          item.setSelected(true);\n          connections.highlightConnections(item, this);\n        }\n        else {\n          item.setHighlighted(true);\n        }\n\n      } catch (error) {\n        console.log(error);\n      }\n    })\n\n    this.clearCache();\n  }\n\n  setSelected(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      if (highlight_connections) {\n        this.clearHighlights();\n      }\n\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setSelected(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  setHighlighted(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      this.clearHighlights();\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setHighlighted(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  isSelected(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    console.log(item);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getSelected) {\n      return item.getSelected();\n    }\n    else {\n      return false;\n    }\n  }\n\n  isHighlighted(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    console.log(item);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getHighlighted) {\n      return item.getHighlighted();\n    }\n    else {\n      return false;\n    }\n  }\n\n  find(text) {\n    let result = [];\n\n    try {\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getPositions().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getAffiliations().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getSources().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBiographies().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    return result;\n  }\n\n  resetAllFilters() {\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  resetFiltersNotShip() {\n    const projectFilter = this.state.filter[\"project\"];\n    this.state.filter = {};\n    this.state.filter[\"project\"] = projectFilter;\n    this.clearCache();\n  }\n\n  isAnchor(node) {\n    let id = get_id(node);\n\n    return id === get_id(this.state.anchor);\n  }\n\n  setAnchor(anchor) {\n    if (anchor === null) {\n      if (this.state.anchor === null) {\n        return false;\n      } else {\n        this.state.anchor = null;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    let got_anchor = null;\n\n    if (isString(anchor)) {\n      got_anchor = this.get(anchor);\n    }\n\n    if (got_anchor) {\n      if (got_anchor === this.state.anchor) {\n        return false;\n      }\n      else {\n        this.state.anchor = got_anchor;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    if (anchor) {\n      got_anchor = this.getPeople().find(anchor);\n    }\n\n    if (!got_anchor) {\n      got_anchor = this.getBusinesses().find(anchor);\n    }\n\n    if (!got_anchor) {\n      console.log(`CANNOT FIND ANCHOR ${anchor}: ${got_anchor}`);\n      return false;\n    }\n\n    anchor = got_anchor;\n\n    if (anchor === this.state.anchor) {\n      return false;\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n    return true;\n  }\n\n  toggleFilter(items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    for (let item of items) {\n      item = get_id(item);\n\n      let type = this._getType(item);\n\n      if (!(type in this.state.filter)) {\n        this.state.filter[type] = {};\n      }\n\n      if (item in this.state.filter[type]) {\n        delete this.state.filter[type][item];\n\n        if (Object.keys(this.state.filter[type]).length === 0) {\n          delete this.state.filter[type];\n        }\n      } else {\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  setFilter(category, items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    let filter = {};\n\n    for (let item of items) {\n      let id = get_id(item);\n      filter[id] = 1;\n    }\n\n    this.state.filter[category] = filter;\n    this.clearCache();\n  }\n\n  setFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (!(type in this.state.filter)) {\n          this.state.filter[type] = {};\n        }\n\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  clearFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (item in this.state.filter[type]) {\n          delete this.state.filter[type][item];\n\n          if (Object.keys(this.state.filter[type]).length === 0) {\n            delete this.state.filter[type];\n          }\n        }\n      }\n    }\n\n    this.clearCache();\n  }\n\n  toggleNodeFilter(nodes) {\n    this.toggleFilter(nodes);\n  }\n\n  clearProjectFilter() {\n    this.state.filter[\"project\"] = {};\n  }\n\n  toggleProjectFilter(project) {\n    if (!(\"project\" in this.state.filter)) {\n      this.state.filter[\"project\"] = {};\n    }\n\n    if (project in this.state.filter[\"project\"]) {\n      delete this.state.filter[\"project\"][project];\n    } else {\n      this.state.filter[\"project\"][project] = 1;\n    }\n  }\n\n  getProjectTimeLine() {\n    if (this.state.cache.projectTimeLine !== null) {\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine() {\n    if (this.state.cache.itemTimeLine !== null) {\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item) => {\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  /** Set the scoring function used to order the nodes */\n  setScoringFunction(func) {\n    if (func !== this.state.scoring_function) {\n      this.state.scoring_function = func;\n      this.clearCache();\n    }\n  }\n\n  /** Return the scoring function that should be used to order the\n   *  nodes in any ordered graph\n   */\n  getScoringFunction() {\n    return this.state.scoring_function;\n  }\n\n  /** Set the sizing function used to size the nodes */\n  setSizingFunction(func) {\n    if (func !== this.state.sizing_function) {\n      this.state.sizing_function = func;\n      this.clearCache();\n    }\n  }\n\n/** Return the sizing function that should be used to size the nodes */\n  getSizingFunction() {\n    return this.state.sizing_function;\n  }\n\n  /** Return the graph of nodes and edges that will be displayed by\n   *  the app. This should apply all of the filters and only return\n   *  the nodes and edges that should be visible. It should also\n   *  apply the indexing function so that the index of the nodes\n   *  show their sorted order according to the primary criterion\n   */\n  getGraph() {\n    if (this.state.cache.graph !== null) {\n      return this.state.cache.graph;\n    }\n\n    let nodes = this.getPeople().getNodes();\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    // create a dictionary so we know which nodes are selected\n    let n = {};\n    for (let i in nodes) {\n      n[get_id(nodes[i])] = 1;\n    }\n\n    // get only the edges that involve these nodes\n    let edges = this.getConnections().getEdges(n);\n\n    // let each node know how many connections it has got\n    let counts = {};\n\n    let add_count = (id) => {\n      // ensures x == 1 if id doesn't exist in counts\n      let x = (counts[id] || 0) + 1;\n      counts[id] = x;\n    };\n\n    for (let i in edges) {\n      add_count(edges[i].source);\n      add_count(edges[i].target);\n    }\n\n    nodes.forEach((node) => {\n      let count = counts[node.id];\n\n      if (!count) { count = 0; }\n      node.edge_count = count;\n    });\n\n    let scoring_function = this.getScoringFunction();\n\n    if (!scoring_function) {\n      scoring_function = score_by_connections;\n    }\n\n    scoring_function(nodes, edges, this);\n\n    let sizing_function = this.getSizingFunction();\n\n    if (!sizing_function) {\n      sizing_function = size_by_influence;\n    }\n\n    sizing_function(nodes, edges, this);\n\n    this.state.cache.graph = {\n      nodes: nodes,\n      edges: edges\n    };\n    return this.state.cache.graph;\n  }\n\n  add(item) {\n    if (!item) {\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key) => {\n      if (!added) {\n        let group = this.state[key];\n        if (group && group.canAdd) {\n          if (group.canAdd(item)) {\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added) {\n      throw new ValueError(`Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered = true) {\n    id = get_id(id);\n\n    if (this._rebuilding) {\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try {\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      } else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      } else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      } else if (id[0] === \"Q\") {\n        return this.getPositions().get(id);\n      } else if (id[0] === \"A\") {\n        return this.getAffiliations().get(id);\n      } else if (id[0] === \"S\") {\n        return this.getSources().get(id);\n      } else if (id[0] === \"N\") {\n        return this.getNotes().get(id);\n      } else if (id[0] === \"J\") {\n        return this.getProjects().get(id);\n      } else {\n        return id;\n      }\n    } catch (error) {\n      if (filtered) {\n        return this.get(id, false);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n};\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./VBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\n\nclass VBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.vbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nVBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default VBox;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./HBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\nclass HBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.hbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nHBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default HBox;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"centre\":\"ImageCarousel_centre__3ksJM\"};","var map = {\n\t\"./320px-SS_Great_Britain_diagram.jpg\": 334,\n\t\"./320px-SS_Great_Britain_transverse_section.jpg\": 335,\n\t\"./800px-Gutenberg_Bible.jpg\": 336,\n\t\"./A_Specimen_by_William_Caslon.jpg\": 211,\n\t\"./Brunel_letter_GWR.jpg\": 337,\n\t\"./Great_Western_maiden_voyage.jpg\": 338,\n\t\"./IllustriteZeitung_SS_GreatBritain.png\": 339,\n\t\"./RHowlett_IKB.jpg\": 210,\n\t\"./Sumerian_26th_c_Adab.jpg\": 340,\n\t\"./The_Steamer_Great_Western_small.jpg\": 341,\n\t\"./bg-128-168.jpg\": 342,\n\t\"./bi_logo.png\": 160,\n\t\"./people/Bryan_Donkin.jpg\": 343,\n\t\"./people/Christopher_Claxton.jpg\": 344,\n\t\"./people/Edward_Chappell.jpg\": 345,\n\t\"./people/John_Grantham.jpg\": 346,\n\t\"./people/Robert_Bright.jpg\": 347,\n\t\"./people/Samuel_Hall.jpg\": 348,\n\t\"./people/William_Fairbairn.jpg\": 349,\n\t\"./people/William_Symonds.jpg\": 350,\n\t\"./ships/Great_Britain.jpg\": 351,\n\t\"./ships/Great_Eastern.jpg\": 352,\n\t\"./ships/Great_Western.jpg\": 353,\n\t\"./ssgb_logo.png\": 354,\n\t\"./uob_logo.png\": 159\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 873;","module.exports = __webpack_public_path__ + \"static/media/Overlay.test.js.87b466f3.snap\";","module.exports = __webpack_public_path__ + \"static/media/SearchOverlay.test.js.96d98459.snap\";","module.exports = __webpack_public_path__ + \"static/media/ShipSelector.test.js.f95a6205.snap\";","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport \"react-tabs/style/react-tabs.css\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./BioOverlay.module.css\";\n\nfunction BioOverlay(props) {\n  let social = props.social;\n\n  const person = social.get(props.person);\n  const id = person.getID();\n  const name = person.getName();\n  const biographies = props.social.getBiographies();\n\n  // Get biography and strip name\n  let bio = biographies.getByID(id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  }\n\n  bio = bio.replace(name + \". \", \"\");\n\n  let sources = [];\n  let seen = {};\n\n  Object.keys(person.getSources()).forEach((key) => {\n    person.getSources()[key].forEach((item) => {\n      if (!seen[item]) {\n        let source = social.get(item);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[item] = 1;\n      }\n    });\n  });\n\n  let connections = social.getConnections().getConnectionsInvolving(person);\n\n  connections.forEach((connection) => {\n    Object.keys(connection.getAffiliationSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n\n    Object.keys(connection.getCorrespondanceSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n  })\n\n  let source_parts = [];\n\n  if (sources.length > 0) {\n    sources.forEach((source) => {\n      //console.log(source);\n      source_parts.push(\n        <li key={source.getID()}\n          className={styles.source_item}>\n          <span className={styles.source_name}>{source.getName(true)}</span>&nbsp;\n          {source.getDescription()}\n        </li>\n      );\n    })\n  } else {\n    source_parts.push(<li key=\"source\"\n                          className={styles.source_item}>No sources</li>);\n  }\n\n  let filename = social.getImage(person);\n\n  if (!filename) {\n    filename = \"images/Great_Western_maiden_voyage.jpg\";\n  }\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div>\n        <div>\n            <BigBox><div className={styles.name}>{person.getName()}</div></BigBox>\n        </div>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\" key={id}\n             src={require(`../${filename}`)} alt=\"A ship\" />\n        <div>\n          <div className={styles.bio_heading}>Biography</div>\n          <div className={styles.bio}>{bio}</div>\n          <div className={styles.source_heading}>Sources</div>\n          <ul className={styles.source}>{source_parts}</ul>\n        </div>\n      </div>\n    </div>\n  );\n\n  //<div className={styles.caption}>(C) This will be the copyright info / link</div>\n}\n\nBioOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  person: PropTypes.string.isRequired,\n};\n\nexport default BioOverlay;\n","import Dry from \"json-dry\";\nimport moment from \"moment\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction _toDate(val, def = null) {\n  if (val) {\n    if (val._isAMomentObject) {\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()) {\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def) {\n      return null;\n    } else {\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() < d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() > d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2) {\n  if (!s1) {\n    return s2;\n  } else if (!s2) {\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state) {\n    if (!state || state === \"null\" || state === null) {\n      this.state = { start: null };\n      return;\n    } else if (state._isARoughDateObject) {\n      this.state = { ...state.state };\n      return;\n    } else if (state._isADateRangeObject) {\n      this.state = state.toDate();\n      return;\n    } else if (state._isAMomentObject) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (state.toISOString) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n      this.state = { start: state.value };\n      return;\n    } else if (typeof state === \"string\") {\n      this.state = { start: _toDate(state), raw: state };\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start) {\n      this.state = { start: null };\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()) {\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item) {\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2) {\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2) {\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2) {\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2) {\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other) {\n    if (item._isARoughDateObject && other._isARoughDateObject) {\n      return (\n        item.getEarliestString() === other.getEarliestString() && item.getLatestString() === other.getLatestString()\n      );\n    } else {\n      return false;\n    }\n  }\n\n  static lt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2) {\n    return !RoughDate.eq(d1, d2);\n  }\n\n  add(delta) {\n    if (this.state.start) {\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end) {\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta) {\n    this.add(-delta);\n  }\n\n  isNull() {\n    if (this.state.start) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isFuzzy() {\n    if (this.state.end) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isExact() {\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString() {\n    if (this.isNull()) {\n      return \"Date:unknown\";\n    } else if (this.isFuzzy()) {\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString() {\n    if (this.isNull()) {\n      return \"unknown\";\n    } else if (this.isFuzzy()) {\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 && s.getDate() === 1 && e.getDate() === 31) {\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()) {\n          return s.getFullYear();\n        } else {\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      } else {\n        return `${s.getDate()}/${s.getMonth() + 1}/${s.getFullYear()}-${e.getDate()}/${\n          e.getMonth() + 1\n        }/${e.getFullYear()}`;\n      }\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest() {\n    let state = { start: this.state.start };\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest() {\n    if (this.state.end) {\n      let state = { start: this.state.end };\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    } else {\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestDate() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEarliestString() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestString() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  toRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isExact()) {\n      return new DateRange({ both: this.state.start });\n    } else {\n      return new DateRange({ start: this.state.start, end: this.state.end });\n    }\n  }\n\n  toDateRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isFuzzy()) {\n      return new DateRange({ start: this.getEarliest(), end: this.getLatest() });\n    } else {\n      return new DateRange({ both: this.getEarliest() });\n    }\n  }\n\n  toDate() {\n    let m = this.toMoment();\n\n    if (m) {\n      try {\n        return m.toDate();\n      } catch (error) {\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  //   toUnixTimestamp() {\n  //     return parseInt((this.toDate().getTime() / 1000).toFixed(0));\n  //   }\n\n  toMoment() {\n    if (this.isNull()) {\n      return null;\n    } else if (this.isExact()) {\n      return this.state.start;\n    } else {\n      throw new ValueError(`Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw() {\n    return this.state.raw;\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    if (this.state.end) {\n      return this.state.end;\n    } else {\n      return this.state.start;\n    }\n  }\n\n  merge(other) {\n    let state = {\n      start: _get_min(this.getStart(), other.getStart()),\n      end: _get_max(this.getEnd(), other.getEnd()),\n      raw: _merge_raw(this.getRaw(), other.getRaw()),\n    };\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function (value) {\n  return new RoughDate(value);\n};\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","\n/** Return the ID number of the passed node. This is used to\n *  standardise how I get IDs. It will first try 'getID()',\n * then, if that fails, .id, and will then return the object\n * itself\n */\nexport default function get_id(node) {\n  if (node === null) {\n    return null;\n  } else if (node.getID) {\n    return node.getID();\n  } else if (node.id) {\n    return node.id;\n  } else {\n    return node;\n  }\n}\n"],"sourceRoot":""}