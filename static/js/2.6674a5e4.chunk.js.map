{"version":3,"sources":["components/TextButton.js","components/BigBox.js","components/VBox.js","components/HBox.js","components/Popover.js","components/d3/force_spiral.js","components/d3/ForceGraph.d3.js","components/ForceGraph.js","components/ShipSelector.js","components/LabelButton.js","components/HowDoIOverlay.js","components/Overlay.js","components/SearchBar.js","components/ToggleButton.js","components/BioOverlay.js","components/ShipOverlay.js","components/SlidingPanel.js","components/MainMenu.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/get_id.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/ScoringFunctions.js","model/SizingFunctions.js","model/Social.js","SocialApp.js","components/ForceGraph.module.css","images/uob_logo.png","images/bi_logo.png","components/TextButton.module.css","components/BigBox.module.css","components/VBox.module.css","components/HBox.module.css","components/Popover.module.css","components/ShipSelector.module.css","components/LabelButton.module.css","components/HowDoIOverlay.module.css","components/Overlay.module.css","components/SearchBar.module.css","components/ToggleButton.module.css","components/BioOverlay.module.css","images sync /^/.//.*$","images/320px-SS_Great_Britain_diagram.jpg","images/320px-SS_Great_Britain_transverse_section.jpg","images/800px-Gutenberg_Bible.jpg","images/A_Specimen_by_William_Caslon.jpg","images/Brunel_letter_GWR.jpg","images/Great_Western_maiden_voyage.jpg","images/IllustriteZeitung_SS_GreatBritain.png","images/RHowlett_IKB.jpg","images/Sumerian_26th_c_Adab.jpg","images/The_Steamer_Great_Western_small.jpg","images/bg-128-168.jpg","images/ssgb_logo.png","components/ShipOverlay.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/MainMenu.module.css","SocialApp.module.css"],"names":["TextButton","onClick","this","props","className","styles","button","children","React","Component","BigBox","bigbox","_wrap","child","i","type","key","VBox","parts","length","push","vbox","HBox","hbox","Popover","node","name","label","social","readMoreButton","emitReadMore","clearPopup","id","centerButton","emitSetCenter","isAnchor","bio","getBiographies","getByID","replace","trim","split","left","top","innerWidth","window","innerHeight","x","y","popOver","style","width","popoverWidth","header","closeButton","background","border","_constant","_return_index","j","_null_function","constrain","w","r","isNaN","getTextSize","d","context","_canvas","document","createElement","getContext","height","selected","font","text","use_initials","initials","measureText","ForceGraphD3","parent","updateLink","bind","updateNodeText","updateNode","draw","drawFromScratch","update","updateGraph","drag","uid","uuidv4","state","signalClicked","indirectConnectionsVisible","hideUnconnectedNodes","slice","_size_changed","_graph_changed","_is_running","_is_drawn","getConnections","find","gotConnections","h","new_graph","getGraph","graph","l","lodash","cloneDeep","edges","edge","found_source","found_target","n","nodes","source","source_id","target","target_id","old_graph","_graph","new_node","found","m","old_node","vx","vy","Math","random","size_changed","Object","prototype","hasOwnProperty","call","simulation","_simulation","d3","on","fx","fy","restart","fixed","data","_mainGroup","select","selectAll","join","enter","append","attr","radius","size","node_selected","highlighted","node_business_highlighted","node_business","is_nc_engineer","node_nc_engineer_highlighted","node_nc_engineer","is_engineer","node_engineer_highlighted","node_engineer","node_highlighted","stopPropagation","emitPopup","console","log","node_text_select","node_text_highlight","node_text","link","any_highlighted","forEach","item","link_highlight","linkInvisible","stop","alpha","alphaTarget","alphaDecay","force","index","strength","strengths","indexes","points_x","points_y","initialize","Array","floor","max_index","max","angle","min_x","max_x","min_y","max_y","sqrt","asin","cos","sin","min","center_x","center_y","scale_x","scale_y","_","arguments","force_spiral","sort_index","_link","undefined","dx","dy","dr","_node","_label","textSize","delta","setState","remove","container","mainGroup","svg_view","spiralSimulation","ForceGraph","popup","updateSize","componentDidUpdate","containerRef","createRef","addEventListener","removeEventListener","containerRect","current","getBoundingClientRect","ref","left_logo","src","require","alt","uob_logo_image","right_logo","bi_logo_image","ShipButton","ship","getName","ship_button","func","emitSetShip","ship_button_selected","emitShowShip","href","ShipSelector","projects","ssGW","getByName","ssGB","ssGE","ships","buttons","s","slotSetShip","content","LabelButton","HowDoIOverlay","close","fontSize","textContainer","intro","howDoIText","body","Overlay","useState","open","setOpen","overlay","useBackground","overlayNoBackground","data-testid","toggleOverlay","e","defaultProps","SearchBar","event","value","emitUpdate","preventDefault","search_text","searchText","clear_button","link_button","clearButton","searchHighlightAvailable","highlight","searchHighlightToggled","link_style","linkButton","linkButtonHighlighted","emitSearchHighlightToggled","form","onSubmit","onSubmitHandler","input","onChange","onChangeHandler","placeholder","BioOverlay","person","get","getID","sources","seen","keys","getSources","getConnectionsInvolving","connection","getAffiliationSources","getCorrespondanceSources","source_parts","source_item","source_name","getDescription","filename","imageFilenames","image","caption","bio_heading","source_heading","ShipOverlay","SlidingPanel","isOpen","position","defaultSize","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","maxWidth","maxHeight","SlideFromBottom","bottomContainer","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","saveSvgAsPng","MenuLabel","menu_label","MenuButton","menu_button","MainMenu","wrapperRef","setWrapperRef","handleClickOutside","contains","unconnectedNodesText","unconnectedNodesVisible","ncEngineersText","ncEngineersVisible","panel","emitToggleSpiralOrder","spiralOrder","emitToggleNodeSize","sizeText","emitToggleFilter","filterText","emitToggleUnconnectedNodesVisible","emitToggleNCEngineersVisible","emitToggleSearch","emitResetFilters","moment","format","getElementById","scale","encoderOptions","backgroundColor","KeyError","args","Error","ValueError","MissingError","_toDate","val","def","_isAMomentObject","date","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","_isARoughDateObject","_isADateRangeObject","toISOString","isNull","add","isFuzzy","getMonth","getDate","getFullYear","getEarliest","getLatest","DateRange","isExact","both","toMoment","error","other","s1","s2","getStart","getEnd","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","toDateRange","hasBounds","isInstant","getStartString","getEndString","toSimpleString","getEarliestStart","merge","getLatestEnd","hasStart","hasEnd","my_start","other_start","my_end","other_end","getDelta","toString","tmp","dates","_filterWindow","values","ret","intersect","_filterProject","project","Person","titles","firstnames","surnames","suffixes","positions","affiliations","alive","gender","notes","orig_name","weight","_getHook","_isAPersonObject","group","match_and","ids","nsources","includes","nprojects","new_projects","getAlive","is_highlighted","is_selected","hook","part","getTitle","getFirstName","getSurname","getSuffix","projectID","scores","project_id","projectKey","getCanonical","toLowerCase","positionGroups","title","getInitials","shape","getWeight","getHighlighted","getSelected","getProjectID","isNonContributingEngineer","isEngineer","c","_generate_person_uid","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","sort","output","setSelected","setHighlighted","canAdd","existing","clone","results","indexOf","people","connections","nConnections","funcs","items","timeline","getTimeLine","anchor","getNode","is_anchor","array","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","get_id","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","nProjects","getDuration","weights","getNode0Name","getNode1Name","color","getColorFromType","_generate_connection_uid","Connections","_connections","_isAConnectionsObject","connection_id","id0","getNode0ID","id1","getNode1ID","conns","nnodes","_add","item0","item1","areNodesVisible","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","ne","_generate_source_uid","Sources","_isASourcesObject","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","start_time","end_time","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","biography","score_by_influence","getAnchor","anchor_id","score","edge_count","areConnected","score_by_connections","size_by_influence","min_size","max_size","size_by_connections","_push","list","Social","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","scoring_function","sizing_function","filter_unconnected","filter_nc_engineers","_rebuilding","_isASocialObject","getHook","biographies","clearCache","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","filtered","getNodeFilters","filterNonContributingEngineers","filterUnconnected","getEdgeFilters","f","_getType","getPeople","clearHighlights","getBusinesses","clearSelections","include_bios","highlight_links","result","search","highlightConnections","highlight_connections","clear_previous","getPositions","getAffiliations","projectFilter","got_anchor","isString","isArray","category","toggleFilter","getProjects","getNodes","concat","getEdges","counts","add_count","count","getScoringFunction","getSizingFunction","added","getNotes","SocialApp","parse","graphData","highlighted_item","selected_item","filterUnconnectedNodes","filterNCEngineers","commercialFiltered","engineersFiltered","nodeSize","commercialNodeFilter","engineerNodeFilter","connectedNodes","selectedShip","selectedShipID","isOverlayOpen","searchIncludeBios","searchHighlightLinks","menuVisible","spiralOrders","freeze","Influence","nodeSizes","setSizingFunction","findInvestorsAndEngineers","setScoringFunction","socialGraph","setAnchor","setOverlay","closeOverlay","setFilter","searchWasItem","selectSearchMatching","resetAllFilters","slotToggleFilterCommercial","slotToggleFilterEngineer","cachedSearch","performSearch","entity","namedPosition","positionID","order","setSpiralOrder","setNodeSize","overlayItem","toggled","location","reload","menu","slotShowMenu","slotUpdateSearch","slotSearchHighlightToggled","help","slotClicked","slotSetAnchor","slotReadMore","spiral_button","toggleSpiralOrder","slotShowShip","size_button","toggleNodeSize","filter_text","filter_button","toggleEngCommFilter","unconnected_button","slotToggleUnconnectedNodes","noncontrib_button","slotToggleNonContributingEngineers","toggle_search","slotSearchBiosToggled","search_button","left_side","right_side","mainmenu","slotCloseMenu","searchHighlight","searchBios","slotClearFilters","emitToggleFilterCommercial","emitToggleFilterEngineering","emitSearchBiosToggled","ui_main","fullscreen","module","exports","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","resolve"],"mappings":"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","file":"static/js/2.6674a5e4.chunk.js","sourcesContent":["\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./TextButton.module.css\";\n\n\nclass TextButton extends React.Component {\n\n  render() {\n\n    let onClick = null;\n\n    if (this.props.onClick) {\n      onClick = this.props.onClick;\n    } else {\n      onClick = () => null;\n    }\n\n    return (\n      <button className={styles.button} onClick={onClick}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n\nTextButton.propTypes = {\n  children: PropTypes.any,\n  onClick: PropTypes.func,\n};\n\nexport default TextButton;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./BigBox.module.css\";\n\n\nclass BigBox extends React.Component {\n    render(){\n        return (\n            <div className={styles.bigbox}>\n                {this.props.children}\n            </div>);\n    }\n}\n\n\nBigBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default BigBox;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./VBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\n\nclass VBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.vbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nVBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default VBox;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./HBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\nclass HBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.hbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nHBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default HBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport TextButton from \"./TextButton\";\n\nimport VBox from \"./VBox\";\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./Popover.module.css\";\n\n\nfunction _truncate(str) {\n  const array = str.trim().split(\".\");\n  return array[0] + \"...\";\n}\n\n\nfunction Popover(props) {\n  const node = props.node;\n\n  const name = node.label;\n  const social = props.social;\n\n  let readMoreButton = null;\n\n  if (props.emitReadMore) {\n    readMoreButton = (\n      <TextButton\n        onClick={() => {\n          props.clearPopup();\n          props.emitReadMore(node.id);\n        }}\n      >\n        Read more\n      </TextButton>\n    );\n  }\n\n  let centerButton = null;\n\n  if (props.emitSetCenter) {\n    if (social.isAnchor(node.id)) {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(null);\n          }}\n        >\n          Clear center\n        </TextButton>\n      );\n    }\n    else {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(node.id);\n          }}\n        >\n          Make center\n        </TextButton>\n      );\n    }\n  }\n\n  // Get biography for node\n  let bio = social.getBiographies().getByID(node.id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  } else {\n    bio = bio.replace(name + \".  \", \"\");\n    bio = _truncate(bio);\n  }\n\n  // Get the location of the click within the viewport so we can open the popover\n  // in the correct location\n  const innerWidth = window.innerWidth; // px\n  const innerHeight = window.innerHeight; // px\n\n  const popoverHeight = 170;\n  const popoverWidth = 150;\n\n  let left;\n  if (node.x > innerWidth - popoverWidth) {\n    left = node.x - popoverWidth + \"px\";\n  } else {\n    left = node.x + \"px\";\n  }\n\n  let top;\n  if (node.y > innerHeight - popoverHeight) {\n    top = node.y - popoverHeight + 50;\n\n    if (top < 50) { top = 50; }\n\n    top = top + \"px\";\n\n  } else {\n    top = node.y + \"px\";\n  }\n\n  return (\n    <div\n      className={styles.popOver}\n      style={{\n        top: top, left: left,\n        width: popoverWidth + \"px\"\n        }}\n    >\n      <VBox>\n        <HBox>\n          <BigBox><div className={styles.header}>{name}</div></BigBox>\n          <div className={styles.closeButton}>\n            <button onClick={props.clearPopup}\n                    style={{ background: \"none\", border: \"none\" }}>\n              x\n            </button>\n          </div>\n        </HBox>\n        <BigBox>\n          <div className={styles.bio}>{bio}</div>\n        </BigBox>\n        <HBox>\n          {readMoreButton}\n          <div>&nbsp;</div>\n          {centerButton}\n        </HBox>\n      </VBox>\n    </div>\n  );\n}\n\nPopover.propTypes = {\n  social: PropTypes.object.isRequired,\n  node: PropTypes.object.isRequired,\n  clearPopup: PropTypes.func.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default Popover;\n","/** Internal function used to return a function that\n *  returns a constant value\n **/\nfunction _constant(x) {\n  return function () {\n    return x;\n  };\n}\n\n/** Internal function used to return a function that counts up from\n *  0 every time it is called\n */\nfunction _return_index() {\n  let i = 0;\n  return function () {\n    let j = i;\n    i += 1;\n    return j;\n  }\n}\n\n/** Force function that pulls nodes towards a spiral design that\n *  is centered in a canvas of specified width and height. You can\n *  specify the strength of this force, and also the index that\n *  maps a node to a point in the spiral. The center point of the\n *  spiral is index 0, with subsequent points counting up uniformly\n *  from there. The spiral is resized automatically to ensure that\n *  all points are contained on the canvas.\n */\nexport default function force_spiral(width, height) {\n  let nodes = null;\n  let index = _return_index();\n  let strength = _constant(0.1);\n  let strengths = null;\n  let indexes = null;\n  let points_x = null;\n  let points_y = null;\n\n  if (height == null) height = 600;\n  if (width == null) width = 600;\n\n  /** Calculate the force on the nodes and update the velocities.\n   *  This uses the spiral points pre-calculated in 'initialise'.\n   *  Each node looks up its spiral point based on the index\n   *  assigned to each node\n   */\n  function force(alpha) {\n    if (!nodes) return;\n\n    for (let i = 0, n = nodes.length; i < n; ++i) {\n      let node = nodes[i];\n      let index = indexes[i];\n      node.vx += (points_x[index] - node.x) * strengths[i] * alpha;\n      node.vy += (points_y[index] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  /** Initialise the spiral. This pre-fectches all of the strengths\n   *  for the nodes and places them into an array.\n   *\n   *  This then pre-fetches all of the node indexes, and, using the\n   *  maximum index, works out and pre-calculates the points of a\n   *  spiral with enough points to satisfy all indexes, and that\n   *  ensures that they all fit onto the screen.\n   *\n   *  These points are placed into the points_x and points_y arrays.\n   */\n  function initialize() {\n    if (!nodes) return;\n\n    let n = nodes.length;\n\n    // collect the strengths and indexes\n    strengths = new Array(n);\n    indexes = new Array(n);\n\n    for (let i = 0; i < n; ++i) {\n      strengths[i] = +strength(nodes[i], i, nodes);\n      indexes[i] = Math.floor(index(nodes[i], i, nodes));\n\n      if (indexes[i] < 0) {\n        indexes[i] = 0;\n      } else if (indexes[i] >= 1024 * 1024) {\n        // limit to 1 MB\n        indexes[i] = 1024 * 1024;\n      }\n    }\n\n    // what is the maximum index - will need to know this to generate\n    // all of the points\n    let max_index = 0;\n\n    if (n > 0) {\n      max_index = Math.max(...indexes);\n    }\n\n    // now calculate all of the points\n    points_x = new Array(max_index + 1);\n    points_y = new Array(max_index + 1);\n\n    let angle = 0.0;\n    let radius = 0.0;\n\n    let min_x = 0.0;\n    let max_x = 0.0;\n    let min_y = 0.0;\n    let max_y = 0.0;\n\n    for (let i = 1; i <= max_index; ++i) {\n      radius = Math.sqrt(i);\n      angle += Math.asin(1 / radius);\n      points_x[i] = Math.cos(angle) * radius;\n      points_y[i] = Math.sin(angle) * radius;\n\n      min_x = Math.min(min_x, points_x[i]);\n      max_x = Math.max(max_x, points_x[i]);\n\n      min_y = Math.min(min_y, points_y[i]);\n      max_y = Math.max(max_y, points_y[i]);\n    }\n\n    // we now need to scale such that 'radius' can fit comfortably\n    // on a width * height page\n    let center_x = width / 2;\n    let center_y = height / 2;\n\n    let scale_x = 0.80 * width / (max_x - min_x);\n    let scale_y = 0.80 * height / (max_y - min_y);\n\n    // offset the center slightly as the spiral biases slightly\n    center_x -= 0.4 * scale_x * (max_x + min_x);\n    center_y -= 0.4 * scale_y * (max_y + min_y);\n\n    points_x[0] = center_x;\n    points_y[0] = center_y;\n\n    for (let i = 1; i <= max_index; ++i) {\n      points_x[i] = center_x + (points_x[i] * scale_x);\n      points_y[i] = center_y + (points_y[i] * scale_y);\n    }\n  }\n\n  /** Add the initialise function to the force object that will be returned */\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the strength for each node\n   */\n  force.strength = function (_) {\n    return arguments.length ? ((strength = typeof _ === \"function\" ?\n      _ : _constant(+_)), initialize(), force) : strength;\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the index on the spiral for each node\n   */\n  force.index = function (_) {\n    return arguments.length ? ((index = typeof _ === \"function\" ?\n      _ : _return_index()), initialize(), force) : index;\n  };\n\n  return force;\n}","\nimport * as d3 from \"d3\";\n\nimport React from \"react\";\n\nimport lodash from \"lodash\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\n\nimport force_spiral from \"./force_spiral.js\";\n\nimport styles from \"../ForceGraph.module.css\";\n\nfunction _null_function() {}\n\nfunction constrain(x, w, r = 20) {\n  if (isNaN(x)) {\n    return 0.5 * w;\n  }\n  else {\n    if (x < r) { return r; }\n    else if (x > w - r) { return w - r }\n    else { return x; }\n  }\n}\n\nfunction getTextSize(d) {\n  let canvas = getTextSize._canvas || (getTextSize._canvas = document.createElement(\"canvas\"));\n  let context = canvas.getContext(\"2d\");\n\n  let height = 12;\n\n  if (d.selected) {\n    context.font = \"12pt Domine\";\n  } else {\n    context.font = \"8pt Domine\";\n    height = 8;\n  }\n\n  let text = d.label;\n\n  if (d.use_initials) {\n    text = d.initials;\n  }\n\n  let metrics = context.measureText(text);\n\n  return [metrics.width, height];\n}\n\n/* eslint-disable react/no-direct-mutation-state */\nclass ForceGraphD3 extends React.Component {\n  constructor(parent, props) {\n    super(props);\n    this.updateLink = this.updateLink.bind(this);\n    this.updateNodeText = this.updateNodeText.bind(this);\n    this.updateNode = this.updateNode.bind(this);\n    this.draw = this.draw.bind(this);\n    this.drawFromScratch = this.drawFromScratch.bind(this);\n    this.update = this.update.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n\n    this.drag = this.drag.bind(this);\n    this.parent = parent;\n\n    // Generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {\n      width: null,\n      height: null,\n      social: null,\n      signalClicked: _null_function,\n      indirectConnectionsVisible: false,\n      hideUnconnectedNodes: false,\n      uid: uid.slice(uid.length - 8),\n    };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n    this._is_drawn = false;\n\n    this.update(props);\n  }\n\n  getNodeBio(id) {\n    return this.state.social.getBiographies().getByID(id);\n  }\n\n  getNodeConnections(id) {\n    return this.state.social.getConnections().find(id);\n  }\n\n  gotConnections(id) {\n    return this.state.social.getConnections().gotConnections(id);\n  }\n\n  updateGraph(social) {\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h) {\n      return;\n    }\n\n    let new_graph = null;\n\n    if (social) {\n      new_graph = social.getGraph();\n    }\n\n    // The social object will cache the 'getGraph' result, meaning\n    // that any change in this object signals that the graph needs\n    // to be redrawn\n    if (new_graph !== this.state.graph) {\n      //save the cached graph\n      this.state.graph = new_graph;\n\n      // This view needs to clone its own copy of the graph, as\n      // D3 will update the graph object. We need to clone in case\n      // two ForceGraph.d3 views are viewing the same Social graph\n      new_graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in new_graph.edges) {\n        let edge = new_graph.edges[l];\n\n        let found_source = false;\n        let found_target = false;\n\n        for (let n in new_graph.nodes) {\n          let node = new_graph.nodes[n];\n          if (edge.source === node.id) {\n            edge.source = node;\n            edge.source_id = node.id;\n            found_source = true;\n          } else if (edge.target === node.id) {\n            edge.target = node;\n            edge.target_id = node.id;\n            found_target = true;\n          }\n\n          if (found_source && found_target) { break; }\n        }\n      }\n\n      // does this node already have coordinates? If not then they\n      // will need to be random\n      let old_graph = this._graph;\n\n      if (!old_graph) {\n        old_graph = { nodes: [] };\n      }\n\n      for (let n in new_graph.nodes) {\n        let new_node = new_graph.nodes[n];\n        let found = false;\n\n        for (let m in old_graph.nodes) {\n          let old_node = old_graph.nodes[m];\n          if (old_node.id === new_node.id) {\n            new_node.x = old_node.x;\n            new_node.y = old_node.y;\n            new_node.vx = old_node.vx;\n            new_node.vy = old_node.vy;\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          new_node.x = w * Math.random();\n          new_node.y = h * Math.random();\n          new_node.vx = 0.0;\n          new_node.vy = 0.0;\n        }\n      }\n\n      this._graph = new_graph;\n      this._graph_changed = true;\n    }\n  }\n\n  update(props) {\n    let size_changed = false;\n\n    if (props.indirectConnectionsVisible !== this.state.indirectConnectionsVisible) {\n      this.state.indirectConnectionsVisible = props.indirectConnectionsVisible;\n      this._graph_changed = true;\n    }\n\n    let hasWidth = Object.prototype.hasOwnProperty.call(props, \"width\");\n\n    if (hasWidth) {\n      if (this.state.width !== props.width) {\n        this.state.width = props.width;\n        // this.setState({ width: props.width });\n        size_changed = true;\n      }\n    }\n\n    let hasHeight = Object.prototype.hasOwnProperty.call(props, \"height\");\n\n    if (hasHeight) {\n      if (this.state.height !== props.height) {\n        this.state.height = props.height;\n        // this.setState({ height: props.height });\n        size_changed = true;\n      }\n    }\n\n    if (size_changed) {\n      this._size_changed = true;\n    }\n\n    let hasSignalClicked = Object.prototype.hasOwnProperty.call(props, \"signalClicked\");\n\n    if (hasSignalClicked) {\n      if (this.state.signalClicked) {\n        this.state.signalClicked = props.signalClicked;\n      } else {\n        this.state.signalClicked = _null_function;\n      }\n    }\n\n    let hasSocial = Object.prototype.hasOwnProperty.call(props, \"social\");\n\n    if (hasSocial) {\n      this.updateGraph(props.social);\n    }\n  }\n\n  className() {\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  drag() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        d.fx = d.x;\n        d.fy = d.y;\n      })\n      .on(\"drag\", (d) => {\n        if (!this._is_running) simulation.restart();\n\n        let w = this.state.width;\n        let h = this.state.height;\n\n        d.fx = constrain(d3.event.x, w, d.r);\n        d.fy = constrain(d3.event.y, h, d.r);\n      })\n      .on(\"end\", (d) => {\n        if (!d.fixed) {\n          d.fx = null;\n          d.fy = null;\n        }\n      });\n  }\n\n  updateNode(data) {\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"circle\")\n      )\n      // Here size is the weight given to that entity\n      .attr(\"r\", (d) => {\n        // If no project selected keep previous weight\n        // Otherwise update using the selected project code\n        d.radius = 10 + 2 * d.size;\n        return d.radius;\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node ${styles.node_selected} selected`;\n        }\n        else if (d.type === \"business\") {\n          if (d.highlighted) {\n            return `node ${styles.node_business_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_business}`;\n          }\n        }\n        else if (d.is_nc_engineer) {\n          if (d.highlighted) {\n            return `node ${styles.node_nc_engineer_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_nc_engineer}`;\n          }\n        }\n        else if (d.is_engineer) {\n          if (d.highlighted) {\n            return `node ${styles.node_engineer_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_engineer}`;\n          }\n        }\n        else {\n          if (d.highlighted) {\n            return `node ${styles.node_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node}`;\n          }\n        }\n      })\n      .attr(\"id\", (d) => { return d.id; })\n      .on(\"mousedown\", () => d3.event.stopPropagation())\n      .on(\"click\", (d) => {\n        d3.event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      });\n    //.call(this.drag());\n\n    return node;\n  }\n\n  updateNodeText(data) {\n    let text = this._mainGroup.select(\".node_text-group\").selectAll(\".node_text\");\n\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    let use_initials = true;\n\n    console.log(`${this.state.width} : ${data.length}`);\n\n    if (data.length < 10) {\n      use_initials = false;\n    }\n    else if (data.length < 25 && this.state.width > 500) {\n      use_initials = false;\n    }\n    else if (data.length < 40 && this.state.width > 768) {\n      use_initials = false;\n    }\n    else if (data.length < 45 && this.state.width > 1000) {\n      use_initials = false;\n    }\n    else if (data.length < 50 && this.state.width > 1200) {\n      use_initials = false;\n    }\n\n    text = text\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"text\"),\n      )\n      .text((d) => {\n        d.use_initials = false;\n\n        if (d.highlighted || d.selected) {\n          return d.label;\n        }\n        else {\n          if (use_initials) {\n            d.use_initials = true;\n            return d.initials;\n          }\n          else {\n            return d.label;\n          }\n        }\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node_text ${styles.node_text_select} selected`;\n        }\n        else if (d.highlighted) {\n          return `node_text ${styles.node_text_highlight} highlighted`;\n        }\n        else {\n          return `node_text ${styles.node_text}`;\n        }\n      })\n      .attr(\"dx\", (d) => {\n        return d.radius + \"px\";\n      })\n      .attr(\"dy\", (d) => {\n        return -1 * (3 + sizeScale * d.radius) + \"px\";\n      })\n      .attr(\"textSize\", (d) => {\n        return getTextSize(d);\n      })\n      .on(\"mousedown\", () => d3.event.stopPropagation())\n      .on(\"click\", (d) => {\n        d3.event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      })\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"id\", (d) => { return d.id; });\n    //.call(this.drag());\n\n    return text;\n  }\n\n  updateLink(data) {\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    let any_highlighted = false;\n\n    data.forEach((item) => {\n      if (item.highlighted) {\n        any_highlighted = true;\n      }\n    });\n\n    link = link\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"path\"),\n      )\n      .attr(\"class\", (d) => {\n        if (d.highlighted) {\n          return `link ${styles.link_highlight} highlighted`;\n        }\n        else {\n          if (any_highlighted) {\n            return `link ${styles.linkInvisible}`;\n          }\n          else {\n            return `link ${styles.link}`;\n          }\n        }\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"source_id\", (d) => {\n        return d.source_id;\n      })\n      .attr(\"target_id\", (d) => {\n        return d.target_id;\n      });\n\n    return link;\n  }\n\n  spiralSimulation() {\n    if (this._simulation) {\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let graph = this._graph;\n\n    let simulation = d3\n      .forceSimulation(graph.nodes)\n      .alpha(1.0)\n      .alphaTarget(0)\n      .alphaDecay(0.075)\n      .force(\"spiral\",\n        force_spiral(w, h)\n          .strength(0.3)\n          .index((d) => {\n            return d.sort_index;\n          })\n      )\n      /*.force(\n        \"collide\",\n        d3\n        .forceCollide()\n        .strength(5.0)\n        .radius((d) => d.radius)\n        .iterations(20)\n      )*/\n      // This function with help from https://stackoverflow.com/a/13456081\n      .on(\"tick\", () => {\n\n        this._link.attr(\"d\", (d) => {\n          if (d.target.x === undefined || d.source.x === undefined) {\n            return null;\n          }\n\n          // The smaller the curve factor the greater the curve\n          const curveFactor = 2;\n          const dx = d.target.x - d.source.x;\n          const dy = d.target.y - d.source.x;\n          const dr = curveFactor * Math.sqrt(dx * dx + dy * dy);\n\n          return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;\n        });\n\n        this._node\n          .attr(\"cx\", (d) => {\n            return (d.x = constrain(d.x, w, d.r));\n          })\n          .attr(\"cy\", (d) => {\n            return (d.y = constrain(d.y, h, d.r));\n          });\n\n        this._label\n          .attr(\"x\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let width = d.textSize[0];\n            let delta = 0.5 * width;\n\n            if (d.x + delta > window.innerWidth) {\n              return window.innerWidth - width - 20;\n            }\n            else if (d.x - delta < 5) {\n              return 5;\n            }\n            else {\n              return d.x - d.radius - delta;\n            }\n          })\n          .attr(\"y\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let height = d.textSize[1];\n\n            return d.y + (0.55 * (height + d.radius));\n          });\n\n      })\n      .on(\"end\", () => {\n        console.log(\"END\");\n      });\n\n    this._is_running = true;\n\n    // Save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  restartSimulation() {\n    if (this._simulation) {\n      this._simulation.restart();\n      this._is_running = true;\n    }\n  }\n\n  stopSimulation() {\n    this._simulation.stop();\n    this._is_running = false;\n  }\n\n  isRunning() {\n    return this._is_running;\n  }\n\n  updateLinks(indirectConnectionsVisible) {\n    if (this._graph.edges) {\n      this.setState({\n        indirectConnectionsVisible: indirectConnectionsVisible,\n      });\n      this.updateLink(this._graph.edges);\n    }\n  }\n\n  drawFromScratch() {\n    let graph = this._graph;\n\n    if (!graph) {\n      if (this.state.social) {\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph) {\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container) {\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    if (!width || !height) {\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container\n      .append(\"svg\")\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .attr(\"id\", \"svg-viz\")\n      .attr(\"align\", \"center\")\n      .attr(\"class\", styles.svg_view)\n      .on(\"click\", () => {\n        this.clearPopup();\n        this.state.signalClicked(null);\n      });\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this.spiralSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this.updateLink(graph.edges);\n    this._node = this.updateNode(graph.nodes);\n    this._label = this.updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw() {\n    if (!this._is_drawn) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    if (this._size_changed) {\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      this._size_changed = false;\n      this._label = this.updateNodeText(this._graph.nodes);\n    }\n\n    if (this._graph_changed) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n    }\n  }\n}\n\nForceGraphD3.propTypes = {\n}\n\nexport default ForceGraphD3;","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport Popover from \"./Popover\";\nimport ForceGraphD3 from \"./d3/ForceGraph.d3.js\";\n\nimport styles from \"./ForceGraph.module.css\";\n\n\nclass ForceGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      popup: null,\n    };\n\n    this.updateSize = this.updateSize.bind(this);\n    this.emitPopup = this.emitPopup.bind(this);\n    this.clearPopup = this.clearPopup.bind(this);\n    this.componentDidUpdate = this.componentDidUpdate.bind(this);\n\n    this.containerRef = React.createRef();\n\n    this.graph = new ForceGraphD3(this, props);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  componentDidUpdate() {\n    this.graph.emitPopup = this.emitPopup;\n    this.graph.clearPopup = this.clearPopup;\n    this.graph.draw();\n  }\n\n  updateSize() {\n    const containerRect = this.containerRef.current.getBoundingClientRect();\n\n    if (this.containerRef && this.graph) {\n      let width = containerRect.width;\n      let height = containerRect.height;\n\n      this.graph.update({\n        width: width,\n        height: height\n      });\n      this.graph.drawFromScratch();\n    }\n  }\n\n  emitPopup(node) {\n    this.setState({ popup: node });\n  }\n\n  clearPopup() {\n    this.setState({ popup: null });\n  }\n\n  render() {\n    this.graph.update(this.props);\n\n    let popup = null;\n\n    if (this.state.popup) {\n      let node = this.state.popup;\n\n      popup = <Popover\n        node={node}\n        social={this.props.social}\n        clearPopup={this.clearPopup}\n        emitSetCenter={this.props.emitSetCenter}\n        emitReadMore={this.props.emitReadMore}\n      />;\n    }\n\n    return (\n      <div ref={this.containerRef} className={styles.container}>\n        <div className={styles.left_logo}>\n          <img src={require(\"../images/uob_logo.png\")}\n            alt=\"University of Bristol Logo\"\n            className={styles.uob_logo_image}\n          />\n        </div>\n        <div className={styles.right_logo}>\n          <img src={require(\"../images/bi_logo.png\")}\n            alt=\"Bristol Institute Logo\"\n            className={styles.bi_logo_image}\n          />\n        </div>\n        <div className={this.graph.className()}>\n          {popup}\n        </div>\n      </div>\n    );\n  }\n}\n\nForceGraph.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default ForceGraph;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\n\nimport styles from \"./ShipSelector.module.css\";\nimport { startsWith } from \"lodash\";\n\nfunction ShipButton(props) {\n  let name = props.ship.getName();\n\n  name = name.replace(\"SS \", \"\");\n\n  let style = styles.ship_button;\n  let func = props.emitSetShip;\n\n  if (props.selected) {\n    style = styles.ship_button_selected;\n    func = props.emitShowShip;\n  }\n\n  return (\n    <button\n      className={style}\n      href=\"#\"\n      onClick={()=>{func(props.ship)}}\n    >\n      {name}\n    </button>);\n}\n\nclass ShipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const projects = this.props.projects;\n\n    /// There are three ships, get their IDs and put in chronological order\n    const ssGW = projects.getByName(\"SS Great Western\");\n    const ssGB = projects.getByName(\"SS Great Britain\");\n    const ssGE = projects.getByName(\"SS Great Eastern\");\n\n    this.state = {\n      ships: [ssGW, ssGB, ssGE ],\n      current: ssGW,\n    }\n\n    // We want the graph to start with the GW selected\n    this.props.emitSetShip(ssGW);\n  }\n\n  slotSetShip(ship) {\n    this.setState({ current: ship });\n    this.props.emitSetShip(ship);\n  }\n\n  render() {\n\n    let buttons = [];\n\n    this.state.ships.forEach((ship) => {\n      buttons.push(\n        <ShipButton\n          key={ship}\n          ship={ship}\n          emitSetShip={(s) => { this.slotSetShip(s) }}\n          emitShowShip={this.props.emitShowShip}\n          selected={ship === this.state.current}\n        />);\n    });\n\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.content}>\n          <HBox>\n            {buttons}\n          </HBox>\n        </div>\n      </div>\n    );\n  }\n}\n\nShipButton.propTypes = {\n  ship: PropTypes.object.isRequired,\n  selected: PropTypes.bool.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nShipSelector.propTypes = {\n  projects: PropTypes.object.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nexport default ShipSelector;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport VBox from \"./VBox\";\n\nimport styles from \"./LabelButton.module.css\";\n\n\nfunction LabelButton(props) {\n\n    let onClick = null;\n\n    if (props.onClick) {\n      onClick = props.onClick;\n    } else {\n      onClick = () => { console.log(\"NULL\");};\n    }\n\n    return (\n        <VBox>\n            <button\n              className={styles.label}\n              onClick={onClick}\n            >\n              {props.label}\n            </button>\n            <button\n              className={styles.button}\n              onClick={onClick}\n            >\n              {props.button}\n            </button>\n        </VBox>\n    );\n}\n\n\nLabelButton.propTypes = {\n    button: PropTypes.any,\n    label: PropTypes.any,\n    onClick: PropTypes.func\n  };\n\nexport default LabelButton;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./HowDoIOverlay.module.css\";\n\nimport howDoIText from \"../data/howDoIOverlayText.json\";\n\nclass HowDoIOverlay extends React.Component {\n  render() {\n    return (\n      <div className={styles.container}>\n        <div className={styles.closeButton}>\n          <button onClick={this.props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2.4vh\" }}>\n            x\n          </button>\n        </div>\n        <div className={styles.textContainer}>\n          <div className={styles.header}>How do I navigate Brunel&apos;s Network?</div>\n          <div className={styles.intro}>\n            <p>{howDoIText[\"intro\"]}</p>\n          </div>\n          <div className={styles.body}>\n            <p>{howDoIText[\"paraOne\"]}</p>\n            <br />\n            <p>{howDoIText[\"paraTwo\"]}</p>\n            <br />\n            <p>{howDoIText[\"paraThree\"]}</p>\n            <br />\n            <p>{howDoIText[\"paraFour\"]}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nHowDoIOverlay.propTypes = {\n  close: PropTypes.func.isRequired,\n};\n\nexport default HowDoIOverlay;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./Overlay.module.css\";\n\n// Based on https://stackoverflow.com/a/55003301\nfunction Overlay(props) {\n  const { useState } = React;\n  const [open, setOpen] = useState(true);\n  if (open) {\n    let style = styles.overlay;\n\n    if (!props.useBackground) {\n      style = styles.overlayNoBackground;\n    }\n\n    return (\n      <div\n        data-testid=\"overlay\"\n        className={style}\n        onClick={() => {\n          props.toggleOverlay();\n          setOpen(false);\n        }}\n      >\n        <div\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {props.children}\n        </div>\n      </div>\n    );\n  }\n  return null;\n}\n\nOverlay.defaultProps = {\n  useBackground: true,\n};\n\nexport default Overlay;\n\nOverlay.propTypes = {\n  toggleOverlay: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n  useBackground: PropTypes.bool,\n};\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./SearchBar.module.css\";\n\n\nclass SearchBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  onChangeHandler(event) {\n    let text = event.target.value;\n\n    if (this.props.emitUpdate) {\n      this.props.emitUpdate(text);\n    }\n  }\n\n  onSubmitHandler(event) {\n    event.preventDefault();\n  }\n\n  render() {\n    let search_text = \"\";\n\n    if (this.props.searchText) {\n      search_text = this.props.searchText;\n    }\n\n    let clear_button = null;\n    let link_button = null;\n\n    if (search_text) {\n      clear_button = (\n        <div className={styles.clearButton}\n             onClick={()=>{this.props.emitUpdate(\"\")}}\n        >\n          &nbsp;X&nbsp;\n        </div>);\n\n      if (this.props.searchHighlightAvailable) {\n        let highlight = this.props.searchHighlightToggled;\n\n        let link_style = styles.linkButton;\n\n        if (highlight) {\n          link_style = styles.linkButtonHighlighted;\n        }\n\n        link_button = (\n          <div className={link_style}\n            onClick={() => { this.props.emitSearchHighlightToggled(!highlight) }}\n          >\n            &nbsp;✺&nbsp;\n          </div>);\n      }\n    }\n\n    return (\n      <form className={styles.form}\n        onSubmit={(e) => this.onSubmitHandler(e)} >\n        <HBox>\n          <BigBox>\n            <input key=\"input\" className={styles.input} type=\"search\"\n              onChange={(e) => this.onChangeHandler(e)}\n              value={search_text}\n              placeholder=\"Search...\" />\n          </BigBox>\n          {link_button}\n          {clear_button}\n        </HBox>\n      </form>);\n  }\n}\n\nSearchBar.propTypes = {\n  searchHighlightToggled: PropTypes.bool.isRequired,\n  emitUpdate: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  searchText: PropTypes.string,\n  searchHighlightAvailable: PropTypes.bool,\n};\n\n\n\nexport default SearchBar;\n","\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./ToggleButton.module.css\";\n\n\nclass ToggleButton extends React.Component {\n\n  render() {\n\n    let emitToggled = null;\n\n    if (this.props.emitToggled) {\n      emitToggled = this.props.emitToggled;\n    } else {\n      emitToggled = () => null;\n    }\n\n    let toggled = this.props.toggled;\n\n    if (toggled) {\n      return (\n        <div className={styles.toggled}\n          onClick={() => { emitToggled(false) }} >\n          {this.props.children}\n        </div>);\n    }\n    else {\n      return (\n        <div className={styles.untoggled}\n          onClick={() => { emitToggled(true) }} >\n          {this.props.children}\n        </div>);\n    }\n  }\n}\n\nToggleButton.propTypes = {\n  children: PropTypes.any.isRequired,\n  emitToggled: PropTypes.func.isRequired,\n  toggled: PropTypes.bool.isRequired,\n};\n\nexport default ToggleButton;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport \"react-tabs/style/react-tabs.css\";\n\nimport imageFilenames from \"../data/entityImageFilenames.json\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./BioOverlay.module.css\";\n\nfunction BioOverlay(props) {\n  let social = props.social;\n\n  const person = social.get(props.person);\n  const id = person.getID();\n  const name = person.getName();\n  const biographies = props.social.getBiographies();\n\n  // Get biography and strip name\n  let bio = biographies.getByID(id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  }\n\n  bio = bio.replace(name + \". \", \"\");\n\n  let sources = [];\n  let seen = {};\n\n  Object.keys(person.getSources()).forEach((key) => {\n    person.getSources()[key].forEach((item) => {\n      if (!seen[item]) {\n        let source = social.get(item);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[item] = 1;\n      }\n    });\n  });\n\n  let connections = social.getConnections().getConnectionsInvolving(person);\n\n  connections.forEach((connection) => {\n    Object.keys(connection.getAffiliationSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n\n    Object.keys(connection.getCorrespondanceSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n  })\n\n  let source_parts = [];\n\n  if (sources.length > 0) {\n    sources.forEach((source) => {\n      source_parts.push(\n        <li key={source.getID()}\n          className={styles.source_item}>\n          <span className={styles.source_name}>{source.getName()}</span>&nbsp;\n          {source.getDescription()}\n        </li>\n      );\n    })\n  } else {\n    source_parts.push(<li key=\"source\"\n                          className={styles.source_item}>No sources</li>);\n  }\n\n  const filename = imageFilenames[id][\"filename\"];\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div>\n        <div>\n            <BigBox><div className={styles.name}>{person.getName()}</div></BigBox>\n        </div>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\" key={id}\n             src={require(`../images/${filename}`)} alt=\"A ship\" />\n        <div className={styles.caption}>(C) This will be the copyright info / link</div>\n        <div>\n          <div className={styles.bio_heading}>Biography</div>\n          <div className={styles.bio}>{bio}</div>\n          <div className={styles.source_heading}>Sources</div>\n          <ul className={styles.source}>{source_parts}</ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nBioOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  person: PropTypes.string.isRequired,\n};\n\nexport default BioOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport { Tab, Tabs, TabList, TabPanel } from \"react-tabs\";\nimport \"react-tabs/style/react-tabs.css\";\n\nimport imageFilenames from \"../data/entityImageFilenames.json\";\n\nimport TextButton from \"./TextButton\";\n\n//import HBox from \"./HBox\";\nimport VBox from \"./VBox\";\n//import BigBox from \"./BigBox\";\n\nimport styles from \"./ShipOverlay.module.css\";\n\nfunction ShipOverlay(props) {\n  let social = props.social;\n\n  const ship = social.get(props.ship);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.closeButton}>\n        <button onClick={props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n          x\n        </button>\n      </div>\n      <VBox>\n        <div className={styles.name}>{ship.getName()}</div>\n        <div>{ship.getDescription()}</div>\n      </VBox>\n    </div>\n  );\n}\n\nShipOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  ship: PropTypes.string.isRequired,\n};\n\nexport default ShipOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport styles from \"./SlidingPanel.module.css\";\nimport SlideFromLeft from \"./transitions/SlideFromLeft.module.css\";\nimport SlideFromRight from \"./transitions/SlideFromRight.module.css\";\nimport SlideFromBottom from \"./transitions/SlideFromBottom.module.css\";\nimport SlideFromTop from \"./transitions/SlideFromTop.module.css\";\n\nclass SlidingPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      position: \"right\",\n      defaultSize: \"40%\",\n      minSize: \"300px\",\n      maxSize: null,\n    };\n  }\n\n  render() {\n    let container = styles.rightContainer;\n    let transition = SlideFromRight;\n\n    let width = this.props.width;\n    let height = this.props.height;\n\n    if (height && !width) {\n      width = \"100%\";\n    }\n\n    if (width && !height) {\n      height = \"100%\";\n    }\n\n    let horiz_size = { width: width };\n    let vert_size = { height: height };\n\n    let style = { width: width, height: height, minSize: this.state.minSize };\n\n    if (this.props.maxSize) {\n      horiz_size.maxWidth = this.props.maxSize;\n      vert_size.maxHeight = this.props.maxSize;\n    }\n\n    // let style = horiz_size;\n    // Get the passed in position\n    let position = this.props.position;\n    if (!position) {\n      position = this.state.position;\n    }\n\n    if (position === \"right\") {\n      container = styles.rightContainer;\n      transition = SlideFromRight;\n    } else if (position === \"rightBottom\") {\n      container = styles.rightContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"bottom\") {\n      container = styles.bottomContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"top\") {\n      container = styles.topContainer;\n      transition = SlideFromTop;\n    } else if (position === \"left\") {\n      container = styles.leftContainer;\n      transition = SlideFromLeft;\n    }\n\n    container = `${container} ${styles.container}`;\n\n    return (\n      <CSSTransition in={this.props.isOpen} timeout={200} classNames={transition} unmountOnExit>\n        <div className={container} style={style}>\n          {this.props.children}\n        </div>\n      </CSSTransition>\n    );\n  }\n}\n\nSlidingPanel.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\n  isOpen: PropTypes.bool,\n  maxSize: PropTypes.string,\n  minSize: PropTypes.string,\n  position: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nexport default SlidingPanel;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport VBox from \"./VBox\";\nimport moment from \"moment\";\n\nimport styles from \"./MainMenu.module.css\";\n\nconst saveSvgAsPng = require(\"save-svg-as-png\");\n\n\nfunction MenuLabel(props) {\n  return (\n    <div className={styles.menu_label}\n         onClick={props.onClick}>\n      {props.children}\n    </div>\n  )\n}\n\n\nfunction MenuButton(props) {\n  let onClick = null;\n\n  if (props.onClick) {\n    onClick = props.onClick;\n  } else {\n    onClick = () => null;\n  }\n\n  return (\n    <button className={styles.menu_button} onClick={onClick}>\n      {props.children}\n    </button>\n  );\n}\n\n\nclass MainMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.wrapperRef = React.createRef();\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      this.props.close();\n      event.stopPropagation();\n    }\n  }\n\n  render() {\n    let unconnectedNodesText = this.props.unconnectedNodesVisible ? \"Visible\" : \"Invisible\";\n    let ncEngineersText = this.props.ncEngineersVisible ? \"Visible\" : \"Invisible\";\n\n    return (\n      <div data-testid=\"AnalysisPanel\" ref={this.setWrapperRef} className={styles.panel}>\n        <VBox>\n          <MenuButton\n              onClick={() => {\n                this.props.close();\n              }}\n          >\n            ⤆ Close ⤆\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}>\n            Spiral Order\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}\n          >\n            {this.props.spiralOrder}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}>\n            Node Size\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}\n          >\n            {this.props.sizeText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            Filter\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            {this.props.filterText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            Unconnected\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            {unconnectedNodesText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            Non-contributers\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            {ncEngineersText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            Search\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            {this.props.searchText}\n          </MenuButton>\n\n          <MenuLabel>\n            Further Options\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitResetFilters();\n            }}\n          >\n            Reset / Reload\n          </MenuButton>\n\n          <MenuButton\n            onClick={() => {\n              const imageOptions = {\n                scale: 1,\n                encoderOptions: 1,\n                backgroundColor: \"#000000\",\n              };\n\n              const filename = \"BrunelsNetwork-\" + moment().format(\"YYYYMMDD-hhmmss\") + \".png\";\n\n              saveSvgAsPng.saveSvgAsPng(document.getElementById(\"svg-viz\"), filename, imageOptions);\n            }}\n          >\n            Save as image\n          </MenuButton>\n        </VBox>\n      </div>\n    );\n  }\n}\n\nMenuButton.propTypes = {\n  children: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n}\n\nMenuLabel.propTypes = {\n  children: PropTypes.object.isRequired,\n}\n\nMainMenu.propTypes = {\n  close: PropTypes.func.isRequired,\n  unconnectedNodesVisible: PropTypes.bool.isRequired,\n  ncEngineersVisible: PropTypes.bool.isRequired,\n  engineersFiltered: PropTypes.bool.isRequired,\n  commercialFiltered: PropTypes.bool.isRequired,\n  searchBios: PropTypes.bool.isRequired,\n  searchHighlight: PropTypes.bool.isRequired,\n  emitResetFilters: PropTypes.func.isRequired,\n  emitToggleFilterCommercial: PropTypes.func.isRequired,\n  emitToggleFilterEngineering: PropTypes.func.isRequired,\n  emitToggleUnconnectedNodesVisible: PropTypes.func.isRequired,\n  emitToggleNCEngineersVisible: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  emitSearchBiosToggled: PropTypes.func.isRequired,\n};\n\nexport default MainMenu;\n","class KeyError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, KeyError);\n  }\n}\n\nclass ValueError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, ValueError);\n  }\n}\n\nclass DuplicateError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, DuplicateError);\n  }\n}\n\nclass MissingError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, MissingError);\n  }\n}\n\nexport { KeyError, ValueError, DuplicateError, MissingError };\n","import Dry from \"json-dry\";\nimport moment from \"moment\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction _toDate(val, def = null) {\n  if (val) {\n    if (val._isAMomentObject) {\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()) {\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def) {\n      return null;\n    } else {\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() < d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() > d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2) {\n  if (!s1) {\n    return s2;\n  } else if (!s2) {\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state) {\n    if (!state || state === \"null\" || state === null) {\n      this.state = { start: null };\n      return;\n    } else if (state._isARoughDateObject) {\n      this.state = { ...state.state };\n      return;\n    } else if (state._isADateRangeObject) {\n      this.state = state.toDate();\n      return;\n    } else if (state._isAMomentObject) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (state.toISOString) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n      this.state = { start: state.value };\n      return;\n    } else if (typeof state === \"string\") {\n      this.state = { start: _toDate(state), raw: state };\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start) {\n      this.state = { start: null };\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()) {\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item) {\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2) {\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2) {\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2) {\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2) {\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other) {\n    if (item._isARoughDateObject && other._isARoughDateObject) {\n      return (\n        item.getEarliestString() === other.getEarliestString() && item.getLatestString() === other.getLatestString()\n      );\n    } else {\n      return false;\n    }\n  }\n\n  static lt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2) {\n    return !RoughDate.eq(d1, d2);\n  }\n\n  add(delta) {\n    if (this.state.start) {\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end) {\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta) {\n    this.add(-delta);\n  }\n\n  isNull() {\n    if (this.state.start) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isFuzzy() {\n    if (this.state.end) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isExact() {\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString() {\n    if (this.isNull()) {\n      return \"Date:unknown\";\n    } else if (this.isFuzzy()) {\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString() {\n    if (this.isNull()) {\n      return \"unknown\";\n    } else if (this.isFuzzy()) {\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 && s.getDate() === 1 && e.getDate() === 31) {\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()) {\n          return s.getFullYear();\n        } else {\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      } else {\n        return `${s.getDate()}/${s.getMonth() + 1}/${s.getFullYear()}-${e.getDate()}/${\n          e.getMonth() + 1\n        }/${e.getFullYear()}`;\n      }\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest() {\n    let state = { start: this.state.start };\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest() {\n    if (this.state.end) {\n      let state = { start: this.state.end };\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    } else {\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestDate() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEarliestString() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestString() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  toRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isExact()) {\n      return new DateRange({ both: this.state.start });\n    } else {\n      return new DateRange({ start: this.state.start, end: this.state.end });\n    }\n  }\n\n  toDateRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isFuzzy()) {\n      return new DateRange({ start: this.getEarliest(), end: this.getLatest() });\n    } else {\n      return new DateRange({ both: this.getEarliest() });\n    }\n  }\n\n  toDate() {\n    let m = this.toMoment();\n\n    if (m) {\n      try {\n        return m.toDate();\n      } catch (error) {\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  //   toUnixTimestamp() {\n  //     return parseInt((this.toDate().getTime() / 1000).toFixed(0));\n  //   }\n\n  toMoment() {\n    if (this.isNull()) {\n      return null;\n    } else if (this.isExact()) {\n      return this.state.start;\n    } else {\n      throw new ValueError(`Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw() {\n    return this.state.raw;\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    if (this.state.end) {\n      return this.state.end;\n    } else {\n      return this.state.start;\n    }\n  }\n\n  merge(other) {\n    let state = {\n      start: _get_min(this.getStart(), other.getStart()),\n      end: _get_max(this.getEnd(), other.getEnd()),\n      raw: _merge_raw(this.getRaw(), other.getRaw()),\n    };\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function (value) {\n  return new RoughDate(value);\n};\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\nimport { ValueError } from \"./Errors\";\n\nfunction _clean(val) {\n  if (!val || val._isADateRangeObject) {\n    return val;\n  } else if (val._isARoughDateObject) {\n    return val.toDateRange();\n  } else if (\n    Object.prototype.hasOwnProperty.call(val, \"start\") ||\n    Object.prototype.hasOwnProperty.call(val, \"end\") ||\n    Object.prototype.hasOwnProperty.call(val, \"both\") ||\n    Object.prototype.hasOwnProperty.call(val, \"value\")\n  ) {\n    return new DateRange(val);\n  } else {\n    return new DateRange({ both: new RoughDate(val) });\n  }\n}\n\nclass DateRange {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n    };\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return `DateRange(${this.getStartString()})`;\n      } else {\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    } else {\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return this.getStart().toSimpleString();\n      } else {\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    } else if (this.hasStart()) {\n      return `${this.getStart().toSimpleString()}<=>future`;\n    } else if (this.hasEnd()) {\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    } else {\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item) {\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other) {\n    if (item === other) {\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()) {\n      if (!RoughDate.eq(item.getStart(), other.getStart())) {\n        return false;\n      }\n    } else if (item.hasStart() || other.hasStart()) {\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()) {\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())) {\n        return false;\n      }\n    } else if (item.hasEnd() || other.hasEnd()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates) {\n    if (!dates) {\n      return null;\n    } else if (dates._isARoughDateObject || dates._isARoughDateObject) {\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0) {\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1) {\n      for (let i = 1; i < dates.length; ++i) {\n        if (!dates[i].isNull()) {\n          if (date.isNull()) {\n            date = dates[i];\n          } else {\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()) {\n      return null;\n    } else {\n      return date;\n    }\n  }\n\n  merge(other) {\n    if (!other) {\n      return this;\n    } else if (other._isARoughDateObject) {\n      other = other.toDateRange();\n    }\n\n    return new DateRange({\n      start: RoughDate.min(this.getEarliestStart(), other.getEarliestStart()),\n      end: RoughDate.max(this.getLatestEnd(), other.getLatestEnd()),\n    });\n  }\n\n  hasBounds() {\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd() {\n    if (this.state.end) {\n      return !this.state.end.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  hasStart() {\n    if (this.state.start) {\n      return !this.state.start.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  isInstant() {\n    return this.hasStart() && this.state.start === this.state.end;\n  }\n\n  // Returns a DateRange object\n  toDate() {\n    if (this.hasStart()) {\n      if (this.hasEnd()) {\n        return this.getStart().merge(this.getEnd());\n      } else {\n        return this.getStart();\n      }\n    } else {\n      return this.getEnd();\n    }\n  }\n\n  contains(date) {\n    date = _clean(date);\n\n    if (!date) {\n      return true;\n    } else if (date._isADateRangeObject) {\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start) {\n        if (RoughDate.gt(my_start, other_start)) {\n          return false;\n        }\n      } else if (other_start) {\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end) {\n        if (RoughDate.lt(my_end, other_end)) {\n          return false;\n        }\n      } else if (my_end) {\n        return false;\n      }\n\n      return true;\n    } else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other) {\n    other = _clean(other);\n\n    if (!other) {\n      return this;\n    }\n\n    if (!other.hasBounds()) {\n      return this;\n    } else if (!this.hasBounds()) {\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)) {\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)) {\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  union(other) {\n    other = _clean(other);\n    if (!other) {\n      return this;\n    } else if (!other._isADateRangeObject) {\n      other = new DateRange({ value: other });\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  getDelta() {\n    if (this.hasStart() && this.hasEnd()) {\n      try {\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      } catch (error) {\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  zoomIn(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() / (2.0 + scale);\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() * scale;\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = -this.getDelta(); //milliseconds\n      } else {\n        delta = -3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = this.getDelta(); //milliseconds\n      } else {\n        delta = 3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    return this.state.end;\n  }\n\n  getEarliestStart() {\n    if (this.hasStart()) {\n      return this.getStart().getEarliest();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestEnd() {\n    if (this.hasEnd()) {\n      return this.getEnd().getLatest();\n    } else {\n      return null;\n    }\n  }\n\n  getStartDate() {\n    let e = this.getEarliestStart();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEndDate() {\n    let e = this.getLatestEnd();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getStartString() {\n    if (this.state.start) {\n      return this.state.start.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  getEndString() {\n    if (this.state.end) {\n      return this.state.end.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      if (state === \"null\" || state === null) {\n        this.state = { start: null, end: null };\n        return;\n      } else if (state._isADateRangeObject) {\n        this.state = { ...state.state };\n      } else if (state._isARoughDateObject) {\n        this.state = { start: state, end: state };\n      } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n        this.setState(state.value);\n        return;\n      } else if (Object.prototype.hasOwnProperty.call(state, \"both\")) {\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      } else if (typeof state === \"string\") {\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      } else {\n        let start = null;\n\n        if (state.start) {\n          start = new RoughDate(state.start);\n\n          if (start.isNull()) {\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end) {\n          end = new RoughDate(state.end);\n\n          if (end.isNull()) {\n            end = null;\n          }\n        }\n\n        if (start && end) {\n          if (RoughDate.gt(start, end)) {\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)) {\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    } else {\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry() {\n    return this.state;\n  }\n}\n\nDateRange.unDry = function (value) {\n  return new DateRange(value);\n};\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport positionGroups from \"../data/positionGroups.json\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props) {\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      highlighted: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n      weight: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item) {\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group, match_and=true) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    if (match_and) {\n      return Object.keys(seen).length === Object.keys(group).length;\n    }\n    else {\n      return Object.keys(seen).length > 0;\n    }\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let sources = _filterProject(this.state.sources, project);\n    let weight = _filterProject(this.state.weight, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n      weight !== this.state.weight || sources !== this.state.sources) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person.state.sources = sources;\n      person.state.weight = weight;\n      person.state.projects = new_projects;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window) {\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n      this.state.is_highlighted = false;\n      this.state.is_selected = false;\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\") {\n        throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive() {\n    return this.state.alive;\n  }\n\n  getFirstName() {\n    if (this.state.firstnames) {\n      return this.state.firstnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getTitle() {\n    if (this.state.titles) {\n      return this.state.titles.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSurname() {\n    if (this.state.surnames) {\n      return this.state.surnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSuffix() {\n    if (this.state.suffixes) {\n      return this.state.suffixes.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getName() {\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part) {\n      parts.push(part);\n    }\n\n    if (parts.length > 0) {\n      return parts.join(\" \");\n    } else {\n      return \"null\";\n    }\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.firstnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    this.state.surnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getPositions() {\n    // Returns the positions object for each project\n    return this.state.positions;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getBorn() {\n    if (this.state.alive) {\n      return this.state.alive.getStart();\n    } else {\n      return null;\n    }\n  }\n\n  getDied() {\n    if (this.state.alive) {\n      return this.state.alive.getEnd();\n    } else {\n      return null;\n    }\n  }\n\n  getTimeLine() {\n    const alive = this.getAlive();\n\n    if (!alive) {\n      return null;\n    } else {\n      return {\n        start: alive.getStart(),\n        end: alive.getEnd(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    }\n  }\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // return the first project weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n\n    return this.state.weight[project_id];\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getProjectWeight(projectKey) {\n    const weight = this.state.weight[projectKey];\n\n    if (!weight) {\n      console.error(\"No weight for \" + this.getName() + this.getID() + \" for project with key \" + projectKey);\n      return 1;\n    }\n\n    return weight;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // return the first project weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n\n    return this.state.weight[project_id];\n  }\n\n  isEngineer(project_id = null) {\n    if (project_id === null) {\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical().toLowerCase()\n                           .replace(/\\s/g, \"\")\n                           .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n      if (positionGroups[\"engineering\"][\"members\"].includes(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  isNonContributingEngineer(project_id = null) {\n    if (project_id === null) {\n      // return this status with the first project\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical();\n      if (name.includes(\"non-cont\")) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"circle\",\n      weight: this.getWeight(),\n      type: \"person\",\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      project: this.getProjectID(),\n      is_nc_engineer: this.isNonContributingEngineer(),\n      is_engineer: this.isEngineer(),\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPerson.unDry = function (value) {\n  return new Person(value);\n};\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Person from \"./Person\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_person_uid() {\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length - 7);\n}\n\nclass People {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Person || item._isAPersonObject;\n  }\n\n  add(person) {\n    if (!this.canAdd(person)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(person.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    } else {\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Person || name._isAPersonObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Person matches '${name}. Available People are '${keys}'`);\n  }\n\n  filterNonContributingEngineers() {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (!person.isNonContributingEngineer()){\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let person = this.state.registry[key];\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        for (let i = 0; i < funcs.length; ++i) {\n          person = funcs[i](person);\n          if (!person) {\n            break;\n          }\n        }\n\n        if (person) {\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (person) {\n        let timeline = person.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    if (anchor && anchor.getID) {\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        let node = null;\n        if (key === anchor) {\n          node = person.getNode({ is_anchor: true });\n        } else {\n          node = person.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  get(id) {\n    let person = this.state.registry[id];\n\n    if (!person) {\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPeople.unDry = function (value) {\n  let people = new People();\n  people.state = value;\n  people._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n};\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      positions: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n      weight: {},\n      is_highlighted: false,\n      is_selected: false,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item) {\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let weight = _filterProject(this.state.weight, project);\n    let sources = _filterProject(this.state.sources, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n        weight !== this.state.weight || sources !== this.state.sources) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business.state.sources = sources;\n      business.state.weight = weight;\n      business.state.projects = new_projects;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterProject(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.positions = setState(state.positions, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // use the first project's weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n    return this.state.weight[project_id];\n  }\n\n  toString() {\n    return `Business(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.name.split(\" \").forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getPositions() {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"square\",\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      weight: this.getWeight(),\n      type: \"business\",\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusiness.unDry = function (value) {\n  return new Business(value);\n};\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Business from \"./Business\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_business_uid() {\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length - 7);\n}\n\nclass Businesses {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Business || item._isABusinessObject;\n  }\n\n  add(business) {\n    if (!this.canAdd(business)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(business.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    } else {\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Business || name._isABusinessObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Business matches '${name}. Available Businesses are '${keys}'`);\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let business = this.state.registry[key];\n        registry[key] = business;\n        names[business.getName()] = key;\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        for (let i = 0; i < funcs.length; ++i) {\n          business = funcs[i](business);\n          if (!business) {\n            break;\n          }\n        }\n\n        if (business) {\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (business) {\n        let timeline = business.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        let node = null;\n        if (key === anchor) {\n          node = business.getNode({ is_anchor: true });\n        } else {\n          node = business.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let business = this.state.registry[id];\n\n    if (!business) {\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusinesses.unDry = function (value) {\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n};\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","\n/** Return the ID number of the passed node. This is used to\n *  standardise how I get IDs. It will first try 'getID()',\n * then, if that fails, .id, and will then return the object\n * itself\n */\nexport default function get_id(node) {\n  if (node === null) {\n    return null;\n  } else if (node.getID) {\n    return node.getID();\n  } else if (node.id) {\n    return node.id;\n  } else {\n    return node;\n  }\n}\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport get_id from \"./get_id\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key) {\n  state = state[key];\n  other = other[key];\n\n  Object.keys(other).forEach((key) => {\n    if (!(key in state)) {\n      state[key] = other[key];\n    } else {\n      for (let item in other[key]) {\n        if (!(item in state[key])) {\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props) {\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n      is_highlighted: false,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getName() {\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1) {\n      return `${n0}<=>${n1}`;\n    } else {\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0() {\n    if (this._getHook) {\n      return this._getHook(this.state.n0);\n    } else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1() {\n    if (this._getHook) {\n      return this._getHook(this.state.n1);\n    } else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID() {\n    return this.state.n0;\n  }\n\n  getNode1ID() {\n    return this.state.n1;\n  }\n\n  areNodesVisible(n) {\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name() {\n    let node0 = this.getNode0();\n\n    try {\n      return node0.getName();\n    } catch (error) {\n      return node0;\n    }\n  }\n\n  getNode1Name() {\n    let node1 = this.getNode1();\n\n    try {\n      return node1.getName();\n    } catch (error) {\n      return node1;\n    }\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getAffiliationSources() {\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources() {\n    return this.state.correspondances;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key) => {\n      if (this.state.affiliations[key] || this.state.correspondances[key]) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    // Filter this connection by project ID\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nProjects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nProjects) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (!window) {\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration) {\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1) {\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other) {\n    if (!this._getHook) {\n      if (other._getHook) {\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key) => {\n      if (!(key in state.shared)) {\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key) => {\n      if (!(key in state.notes)) {\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString() {\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType() {\n    switch (this.state.type) {\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        return \"orange\";\n    }\n  }\n\n  getType() {\n    return this.state.type;\n  }\n\n  getWeights() {\n    return this.state.weights;\n  }\n\n  getWeight() {\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key) => {\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType() {\n    let weight = this.getWeight();\n\n    switch (this.state.type) {\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  toEdge() {\n    let color = this.getColorFromType();\n    // let weight = this.getWeightFromType();\n    let weight = this.getWeight();\n\n    let edge = {\n      id: this.getID(),\n      source: get_id(this.state.n0),\n      target: get_id(this.state.n1),\n      value: weight,\n      type: this.state.type,\n      color: color,\n      highlighted: this.getHighlighted(),\n    };\n\n    return edge;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnection.unDry = function (value) {\n  return new Connection(value);\n};\n\nConnection.load = function (data) {\n  return new Connection({ name: data.name });\n};\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","import Dry from \"json-dry\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Connection from \"./Connection\";\nimport get_id from \"./get_id\";\n\nimport {\n  KeyError,\n  MissingError\n} from \"./Errors\";\n\nfunction _generate_connection_uid() {\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length - 7);\n}\n\nclass Connections {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._connections = {};\n    this._isAConnectionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Connection || item._isAConnectionObject;\n  }\n\n  add(connection) {\n    if (!this.canAdd(connection)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(connection.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(connection);\n      this.state.registry[get_id(existing)] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = get_id(connection);\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    } else {\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    let connection_id = get_id(connection);\n    this._names[connection.getName()] = connection_id;\n    this.state.registry[connection_id] = connection;\n\n    let id0 = connection.getNode0ID();\n    let id1 = connection.getNode1ID();\n\n    if (!(id0 in this._connections)) {\n      this._connections[id0] = {};\n    }\n\n    if (!(id1 in this._connections)) {\n      this._connections[id1] = {};\n    }\n\n    this._connections[id0][id1] = 1;\n    this._connections[id1][id0] = 1;\n\n    return connection;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Connection || name._isAConnectionObject) {\n      return this.get(get_id(name));\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new TypeError(`No connection matches '${name}. Available Connections are '${keys}'`);\n  }\n\n  gotConnections(id) {\n    return this.nConnections(id) > 0;\n  }\n\n  nConnections(id) {\n    let c = this._connections[id];\n\n    if (!c) {\n      return 0;\n    }\n    else {\n      return Object.keys(c).length;\n    }\n  }\n\n  get(id) {\n    let connection = this.state.registry[id];\n\n    if (!connection) {\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n    let conns = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let connection = this.state.registry[key];\n\n      if (connection) {\n        for (let i = 0; i < funcs.length; ++i) {\n          connection = funcs[i](connection);\n          if (!connection) {\n            break;\n          }\n        }\n\n        if (connection) {\n          registry[key] = connection;\n          names[connection.getName()] = key;\n\n          let id0 = connection.getNode0ID();\n          let id1 = connection.getNode1ID();\n\n          if (!(id0 in conns)) {\n            conns[id0] = {};\n          }\n\n          if (!(id1 in conns)) {\n            conns[id1] = {};\n          }\n\n          conns[id0][id1] = 1;\n          conns[id1][id0] = 1;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._connections = conns;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  highlightConnections(item, social) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode1ID(), false).setHighlighted(true);\n      } else if (connection.getNode1ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode0ID(), false).setHighlighted(true);\n      }\n    }\n  }\n\n  getConnectionsInvolving(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let connections = [];\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        connections.push(connection);\n      } else if (connection.getNode1ID() in item) {\n        connections.push(connection);\n      }\n    }\n\n    return connections;\n  }\n\n  getConnectionsTo(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id) {\n      if (!(id in seen)) {\n        seen[id] = 1;\n      } else {\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        _add(connection.getNode1ID());\n      } else if (connection.getNode1ID() in item) {\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook) {\n      Object.keys(seen).forEach((key) => {\n        try {\n          if (seen[key] === nnodes) {\n            connections.push(this._getHook(key));\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    } else {\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  areConnected(item0, item1) {\n    item0 = get_id(item0);\n    item1 = get_id(item1);\n\n    if (item0 in this._connections) {\n      return item1 in this._connections[item0];\n    } else {\n      return false;\n    }\n  }\n\n  getEdges(ids = null) {\n    let edges = [];\n\n    if (ids) {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)) {\n          edges.push(connection.toEdge());\n        }\n      });\n    } else {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nConnections.unDry = function (value) {\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n\n    let id0 = v.getNode0ID();\n    let id1 = v.getNode1ID();\n\n    if (!(id0 in connections._connections)) {\n      connections._connections[id0] = {};\n    }\n\n    if (!(id1 in connections._connections)) {\n      connections._connections[id1] = {};\n    }\n\n    connections._connections[id0][id1] = 1;\n    connections._connections[id1][id0] = 1;\n  });\n\n  return connections;\n};\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw new ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Position(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getCanonical() {\n    return this.state.canonical;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPosition.unDry = function (value) {\n  return new Position(value);\n};\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Position from \"./Position\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_position_uid() {\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length - 7);\n}\n\nclass Positions {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  items() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Position || item._isAPositionObject;\n  }\n\n  add(position) {\n    if (!this.canAdd(position)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(position.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    } else {\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No position with name ${name}`);\n    }\n  }\n\n  getNameByID(id) {\n    return this.get(id).getName();\n  }\n\n  find(name) {\n    if (name instanceof Position || name._isApositionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n  }\n\n  get(id) {\n    let position = this.state.registry[id];\n\n    if (!position) {\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPositions.unDry = function (value) {\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n};\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item) {\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliation.unDry = function (value) {\n  return new Affiliation(value);\n};\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Affiliation from \"./Affiliation\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_affiliation_uid() {\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length - 7);\n}\n\nclass Affiliations {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Affiliation || item._isAAffiliationObject;\n  }\n\n  add(affiliation) {\n    if (!this.canAdd(affiliation)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(affiliation.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    } else {\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Affiliation || name._isAAffiliationObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No affiliation matches '${name}. Available Affiliations are '${keys}'`);\n  }\n\n  get(id) {\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation) {\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliations.unDry = function (value) {\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n};\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item) {\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getDate() {\n    return this.state.date;\n  }\n\n  updateDate(date, force = false) {\n    if (!(date instanceof RoughDate || date._isARoughDateObject)) {\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()) {\n      return false;\n    }\n\n    if (this.getDate().isNull()) {\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)) {\n      if (force) {\n        this.state.date = this.getDate().merge(date);\n        return true;\n      } else {\n        console.log(`Disagreement of date for ${this}: ${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Source(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSource.unDry = function (value) {\n  return new Source(value);\n};\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Source from \"./Source\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_source_uid() {\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length - 7);\n}\n\nclass Sources {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Source || item._isASourceObject;\n  }\n\n  add(source) {\n    if (!this.canAdd(source)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(source.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    } else {\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      console.error(`No source with name ${name}`);\n    }\n  }\n\n  search(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description) {\n        description = \"\";\n      }\n\n      try {\n        if (item.getName().toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        } else if (description.toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  find(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No source matches '${name}. Available sources are '${keys}'`);\n  }\n\n  get(id) {\n    let source = this.state.registry[id];\n\n    if (!source) {\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSources.unDry = function (value) {\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n};\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props) {\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item) {\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  toString() {\n    return `Note(${this.getText()})`;\n  }\n\n  getText() {\n    return this.state.text;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNote.unDry = function (value) {\n  return new Note(value);\n};\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_note_uid() {\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length - 7);\n}\n\nclass Notes {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Note || item._isANoteObject;\n  }\n\n  add(note) {\n    if (!this.canAdd(note)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(note.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    } else {\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Note || name._isANoteObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Note matches '${name}. Available Notes are '${keys}'`);\n  }\n\n  get(id) {\n    let Note = this.state.registry[id];\n\n    if (!Note) {\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNotes.unDry = function (value) {\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n};\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      description: null,\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item) {\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({ value: state.duration });\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Project(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getURL() {\n    return this.state.url;\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  getTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start: duration.getEarliestStart().toDate(),\n        end: duration.getLatestEnd().toDate(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getNewTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start_time: duration.getEarliestStart().toMoment(),\n        end_time: duration.getLatestEnd().toMoment(),\n        project_id: this.getID(),\n        title: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProject.unDry = function (value) {\n  return new Project(value);\n};\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Project from \"./Project\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_project_uid() {\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length - 7);\n}\n\nclass Projects {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  projects() {\n    return this._names;\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Project || item._isAProjectObject;\n  }\n\n  add(project) {\n    if (!this.canAdd(project)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(project.getName());\n    } catch (error) {\n      console.error(\"Cannot get project\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    } else {\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Project || name._isAProjectObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No project matches '${name}. Available projects are '${keys}'`);\n  }\n\n  get(id) {\n    let project = this.state.registry[id];\n\n    if (!project) {\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let project = this.state.registry[key];\n      if (project) {\n        let timeline = project.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProjects.unDry = function (value) {\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n};\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nclass Biographies {\n  constructor() {\n    this.state = {\n      bios: {},\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  static clone(item) {\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node) {\n    if (!node) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getByID(id) {\n    if (!id) return null;\n\n    return this.state.bios[id];\n  }\n\n  getNode(id) {\n    if (this._getHook) {\n      return this._getHook(id);\n    } else {\n      return id;\n    }\n  }\n\n  search(text) {\n    if (!text) {\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key) => {\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1) {\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  add(node, biography) {\n    if (!node || !biography) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio) {\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function (value) {\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n};\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","import get_id from \"./get_id\";\n\n/** Score by the influence of each node */\nfunction score_by_influence(nodes, edges, social) {\n  let scores = [];\n\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.weight + node.edge_count / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\n/** Score by the number of connections only */\nfunction score_by_connections(nodes, edges, social) {\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  let scores = [];\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.edge_count + node.weight / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  // sort the scores such that the most connected nodes are first\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\nexport {\n  score_by_connections as default,\n  score_by_connections,\n  score_by_influence\n};\n","\n/** Size each node by the influence of each node. Calculates the\n *  weight for a node and returns it\n */\nfunction size_by_influence(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.weight;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\n/** Size each node by the number of connections only */\nfunction size_by_connections(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.edge_count;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\nexport {\n  size_by_connections as default,\n  size_by_connections,\n  size_by_influence\n};\n","import Dry from \"json-dry\";\nimport lodash, { isString } from \"lodash\";\n\nimport People from \"./People\";\nimport Businesses from \"./Businesses\";\nimport Connections from \"./Connections\";\nimport Positions from \"./Positions\";\nimport Affiliations from \"./Affiliations\";\nimport Sources from \"./Sources\";\nimport Notes from \"./Notes\";\nimport Projects from \"./Projects\";\nimport Biographies from \"./Biographies\";\nimport DateRange from \"./DateRange\";\nimport get_id from \"./get_id\";\n\nimport score_by_connections from \"./ScoringFunctions\";\nimport size_by_influence from \"./SizingFunctions\";\n\nimport {\n  ValueError\n} from \"./Errors\";\n\nfunction _push(values, list) {\n  if (!list || !values) {\n    return;\n  }\n\n  if (values.length) {\n    for (let i = 0; i < values.length; ++i) {\n      list.push(values[i]);\n    }\n  } else {\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props) {\n      this.state = props;\n    } else {\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this.state.scoring_function = score_by_connections;\n    this.state.sizing_function = size_by_influence;\n    this.state.filter_unconnected = true;\n    this.state.filter_nc_engineers = true;\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item) {\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => {\n      return this.get(id);\n    };\n\n    let state = {\n      ...this.state\n    };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    } else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    } else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    } else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    } else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    } else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    } else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)) {\n      state.projects = new Projects();\n    } else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)) {\n      state.biographies = new Biographies();\n    } else {\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try {\n        this.state[key]._updateHooks(getHook);\n      } catch (error) {\n        // console.error(\"For key : \", key, \"\\nError: \", error);\n      }\n    }\n  }\n\n  filterNonContributingEngineers(filter = true) {\n    if (this.state.filter_nc_engineers === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_nc_engineers = true;\n    }\n    else {\n      this.state.filter_nc_engineers = false;\n    }\n\n    this.clearCache();\n  }\n\n  filterUnconnectedNodes(filter = true) {\n    if (this.state.filter_unconnected === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_unconnected = true;\n    }\n    else {\n      this.state.filter_unconnected = false;\n    }\n\n    this.clearCache();\n  }\n\n  clearCache() {\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters() {\n    if (this.state.cache.node_filters) {\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // Must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          return item.filterWindow(window);\n        } catch (error) {\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {\n        ...node_filter\n      };\n\n      // this filter is returning matching people and the nodes\n      // that are connected to these people\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[get_id(node)] = 1;\n      }\n\n      this.state.cache.node_filters.push((item) => {\n        if (get_id(item) in filter) {\n          return item;\n        } else {\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          // use an \"OR\" match at the moment as this is more\n          // appropriate for the current use of the gui\n          if (item.inGroup(group_filter, false)) {\n            return item;\n          } else {\n            return null;\n          }\n        } catch (error) {\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters() {\n    if (!this.state.cache.edge_filters) {\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterWindow(window);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterProject(project_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterSource(source_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow() {\n    return this.state.window;\n  }\n\n  getMaxWindow() {\n    return this.state.max_window;\n  }\n\n  _fitWindow(window) {\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && new_window.getDelta() === delta) {\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()) {\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()) {\n      return new DateRange({\n        start: this.state.max_window.getStartDate(),\n        end: this.state.max_window.getStartDate() + delta,\n      });\n    } else {\n      return new DateRange({\n        start: this.state.max_window.getEndDate() - delta,\n        end: this.state.max_window.getEndDate(),\n      });\n    }\n  }\n\n  setMaxWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window) {\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()) {\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window) {\n        this.setWindow(fitted);\n      }\n    } else {\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)) {\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)) {\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.people) {\n        // console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people = this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      if (this.state.filter_nc_engineers) {\n        this.state.cache.people =\n          this.state.cache.people.filterNonContributingEngineers();\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.people =\n          this.state.cache.people.filterUnconnected(this.getConnections(true));\n      }\n\n      return this.state.cache.people;\n    } else {\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.businesses) {\n        // console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses = this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.businesses =\n          this.state.cache.businesses.filterUnconnected(this.getConnections(true));\n      }\n\n      return this.state.cache.businesses;\n    } else {\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.connections) {\n        // console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections = this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.connections;\n    } else {\n      return this.state.connections;\n    }\n  }\n\n  getBiographies() {\n    return this.state.biographies;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {\n      ...this.state.filter\n    };\n  }\n\n  getFilterText() {\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`connected to ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`with source ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in group ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in project ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1) {\n      return filter[0];\n    } else if (filter.length > 1) {\n      return `[${filter.join(\"] and [\")}]`;\n    } else {\n      return null;\n    }\n  }\n\n  _getType(item) {\n    item = get_id(item);\n\n    if (item[0] === \"P\" || item[0] === \"B\") {\n      return \"node\";\n    } else if (item[0] === \"J\") {\n      return \"project\";\n    } else if (item[0] === \"S\") {\n      return \"source\";\n    } else {\n      return \"group\";\n    }\n  }\n\n  isFiltered(item) {\n    item = get_id(item);\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter) {\n      return item in filter;\n    } else {\n      return false;\n    }\n  }\n\n  clearHighlights() {\n    this.getPeople(false).clearHighlights();\n    this.getBusinesses(false).clearHighlights();\n    this.getConnections(false).clearHighlights();\n    this.clearCache();\n  }\n\n  clearSelections() {\n    this.getPeople(false).clearSelections();\n    this.getBusinesses(false).clearSelections();\n    this.clearCache();\n  }\n\n  selectSearchMatching(text, include_bios = false, highlight_links = false) {\n    this.clearSelections();\n    this.clearHighlights();\n\n    try {\n      if (text.length === 0) {\n        this.clearCache();\n        return;\n      }\n    }\n    catch (error) {\n      this.clearCache();\n      return;\n    }\n\n    let result = [];\n\n    try {\n      let items = this.getPeople(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    try {\n      let items = this.getBusinesses(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    if (include_bios) {\n      try {\n        let items = this.getBiographies().search(text);\n        _push(items, result);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    let connections = null;\n\n    if (highlight_links) connections = this.getConnections(true);\n\n    result.forEach((item) => {\n      item = get_id(item);\n      item = this.get(item, false);\n\n      try {\n        if (highlight_links) {\n          item.setSelected(true);\n          connections.highlightConnections(item, this);\n        }\n        else {\n          item.setHighlighted(true);\n        }\n\n      } catch (error) {\n        console.log(error);\n      }\n    })\n\n    this.clearCache();\n  }\n\n  setSelected(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      if (highlight_connections) {\n        this.clearHighlights();\n      }\n\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setSelected(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  setHighlighted(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      this.clearHighlights();\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setHighlighted(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  isSelected(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    console.log(item);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getSelected) {\n      return item.getSelected();\n    }\n    else {\n      return false;\n    }\n  }\n\n  isHighlighted(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    console.log(item);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getHighlighted) {\n      return item.getHighlighted();\n    }\n    else {\n      return false;\n    }\n  }\n\n  find(text) {\n    let result = [];\n\n    try {\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getPositions().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getAffiliations().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getSources().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBiographies().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    return result;\n  }\n\n  resetAllFilters() {\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  resetFiltersNotShip() {\n    const projectFilter = this.state.filter[\"project\"];\n    this.state.filter = {};\n    this.state.filter[\"project\"] = projectFilter;\n    this.clearCache();\n  }\n\n  isAnchor(node) {\n    let id = get_id(node);\n\n    return id === get_id(this.state.anchor);\n  }\n\n  setAnchor(anchor) {\n    if (anchor === null) {\n      if (this.state.anchor === null) {\n        return false;\n      } else {\n        this.state.anchor = null;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    let got_anchor = null;\n\n    if (isString(anchor)) {\n      got_anchor = this.get(anchor);\n    }\n\n    if (got_anchor) {\n      if (got_anchor === this.state.anchor) {\n        return false;\n      }\n      else {\n        this.state.anchor = got_anchor;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    if (anchor) {\n      got_anchor = this.getPeople().find(anchor);\n    }\n\n    if (!got_anchor) {\n      got_anchor = this.getBusinesses().find(anchor);\n    }\n\n    if (!got_anchor) {\n      console.log(`CANNOT FIND ANCHOR ${anchor}: ${got_anchor}`);\n      return false;\n    }\n\n    anchor = got_anchor;\n\n    if (anchor === this.state.anchor) {\n      return false;\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n    return true;\n  }\n\n  toggleFilter(items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    for (let item of items) {\n      item = get_id(item);\n\n      let type = this._getType(item);\n\n      if (!(type in this.state.filter)) {\n        this.state.filter[type] = {};\n      }\n\n      if (item in this.state.filter[type]) {\n        delete this.state.filter[type][item];\n\n        if (Object.keys(this.state.filter[type]).length === 0) {\n          delete this.state.filter[type];\n        }\n      } else {\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  setFilter(category, items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    let filter = {};\n\n    for (let item of items) {\n      let id = get_id(item);\n      filter[id] = 1;\n    }\n\n    this.state.filter[category] = filter;\n    this.clearCache();\n  }\n\n  setFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (!(type in this.state.filter)) {\n          this.state.filter[type] = {};\n        }\n\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  clearFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (item in this.state.filter[type]) {\n          delete this.state.filter[type][item];\n\n          if (Object.keys(this.state.filter[type]).length === 0) {\n            delete this.state.filter[type];\n          }\n        }\n      }\n    }\n\n    this.clearCache();\n  }\n\n  toggleNodeFilter(nodes) {\n    this.toggleFilter(nodes);\n  }\n\n  clearProjectFilter() {\n    this.state.filter[\"project\"] = {};\n  }\n\n  toggleProjectFilter(project) {\n    if (!(\"project\" in this.state.filter)) {\n      this.state.filter[\"project\"] = {};\n    }\n\n    if (project in this.state.filter[\"project\"]) {\n      delete this.state.filter[\"project\"][project];\n    } else {\n      this.state.filter[\"project\"][project] = 1;\n    }\n  }\n\n  getProjectTimeLine() {\n    if (this.state.cache.projectTimeLine !== null) {\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine() {\n    if (this.state.cache.itemTimeLine !== null) {\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item) => {\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  /** Set the scoring function used to order the nodes */\n  setScoringFunction(func) {\n    if (func !== this.state.scoring_function) {\n      this.state.scoring_function = func;\n      this.clearCache();\n    }\n  }\n\n  /** Return the scoring function that should be used to order the\n   *  nodes in any ordered graph\n   */\n  getScoringFunction() {\n    return this.state.scoring_function;\n  }\n\n  /** Set the sizing function used to size the nodes */\n  setSizingFunction(func) {\n    if (func !== this.state.sizing_function) {\n      this.state.sizing_function = func;\n      this.clearCache();\n    }\n  }\n\n/** Return the sizing function that should be used to size the nodes */\n  getSizingFunction() {\n    return this.state.sizing_function;\n  }\n\n  /** Return the graph of nodes and edges that will be displayed by\n   *  the app. This should apply all of the filters and only return\n   *  the nodes and edges that should be visible. It should also\n   *  apply the indexing function so that the index of the nodes\n   *  show their sorted order according to the primary criterion\n   */\n  getGraph() {\n    if (this.state.cache.graph !== null) {\n      return this.state.cache.graph;\n    }\n\n    let nodes = this.getPeople().getNodes();\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    // create a dictionary so we know which nodes are selected\n    let n = {};\n    for (let i in nodes) {\n      n[get_id(nodes[i])] = 1;\n    }\n\n    // get only the edges that involve these nodes\n    let edges = this.getConnections().getEdges(n);\n\n    // let each node know how many connections it has got\n    let counts = {};\n\n    let add_count = (id) => {\n      // ensures x == 1 if id doesn't exist in counts\n      let x = (counts[id] || 0) + 1;\n      counts[id] = x;\n    };\n\n    for (let i in edges) {\n      add_count(edges[i].source);\n      add_count(edges[i].target);\n    }\n\n    nodes.forEach((node) => {\n      let count = counts[node.id];\n\n      if (!count) { count = 0; }\n      node.edge_count = count;\n    });\n\n    let scoring_function = this.getScoringFunction();\n\n    if (!scoring_function) {\n      scoring_function = score_by_connections;\n    }\n\n    scoring_function(nodes, edges, this);\n\n    let sizing_function = this.getSizingFunction();\n\n    if (!sizing_function) {\n      sizing_function = size_by_influence;\n    }\n\n    sizing_function(nodes, edges, this);\n\n    this.state.cache.graph = {\n      nodes: nodes,\n      edges: edges\n    };\n    return this.state.cache.graph;\n  }\n\n  add(item) {\n    if (!item) {\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key) => {\n      if (!added) {\n        let group = this.state[key];\n        if (group && group.canAdd) {\n          if (group.canAdd(item)) {\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added) {\n      throw new ValueError(`Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered = true) {\n    id = get_id(id);\n\n    if (this._rebuilding) {\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try {\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      } else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      } else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      } else if (id[0] === \"Q\") {\n        return this.getPositions().get(id);\n      } else if (id[0] === \"A\") {\n        return this.getAffiliations().get(id);\n      } else if (id[0] === \"S\") {\n        return this.getSources().get(id);\n      } else if (id[0] === \"N\") {\n        return this.getNotes().get(id);\n      } else if (id[0] === \"J\") {\n        return this.getProjects().get(id);\n      } else {\n        return id;\n      }\n    } catch (error) {\n      if (filtered) {\n        return this.get(id, false);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n};\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;","// package imports\nimport React from \"react\";\nimport Dry from \"json-dry\";\n\n// Brunel components\nimport ForceGraph from \"./components/ForceGraph\";\nimport ShipSelector from \"./components/ShipSelector\";\nimport TextButton from \"./components/TextButton\";\nimport LabelButton from \"./components/LabelButton\";\nimport HowDoIOverlay from \"./components/HowDoIOverlay\";\nimport Overlay from \"./components/Overlay\";\nimport SearchBar from \"./components/SearchBar\";\nimport ToggleButton from \"./components/ToggleButton\";\nimport BioOverlay from \"./components/BioOverlay\";\nimport ShipOverlay from \"./components/ShipOverlay\";\nimport SlidingPanel from \"./components/SlidingPanel\";\nimport MainMenu from \"./components/MainMenu\";\n\nimport HBox from \"./components/HBox\";\nimport VBox from \"./components/VBox\";\nimport BigBox from \"./components/BigBox\";\n\n// Brunel model\nimport Social from \"./model/Social\";\n\n// Data for import\nimport graphData from \"./socialNetwork.json\";\nimport positionGroups from \"./data/positionGroups.json\";\n\n// Styling for the app\nimport styles from \"./SocialApp.module.css\";\n\nimport { score_by_connections, score_by_influence } from \"./model/ScoringFunctions\";\n\nimport { size_by_connections, size_by_influence } from \"./model/SizingFunctions\";\nimport { faSlash } from \"@fortawesome/free-solid-svg-icons\";\n\nclass SocialApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Load in the Dried graph data from JSON\n    let social = Dry.parse(graphData);\n\n    if (!(social instanceof Social)) {\n      console.error(\"Could not parse!\");\n      social = new Social();\n    }\n\n    this.updateSize = this.updateSize.bind(this);\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n      commercialFiltered: false,\n      engineersFiltered: false,\n      spiralOrder: \"Influence\",\n      nodeSize: \"Influence\",\n      commercialNodeFilter: [],\n      engineerNodeFilter: [],\n      connectedNodes: null,\n      selectedShip: null,\n      selectedShipID: null,\n      isOverlayOpen: false,\n      searchText: \"\",\n      searchIncludeBios: true,\n      searchHighlightLinks: false,\n      menuVisible: false,\n      height: 0,\n      width: 0,\n    };\n\n    const ssGW = social.getProjects().getByName(\"SS Great Western\");\n    this.state.selectedShip = ssGW.getName();\n    this.state.selectedShipID = ssGW.getID();\n\n    // make sure that we start showing only the Great Western\n    this.state.social.toggleFilter(ssGW);\n\n    this.spiralOrders = Object.freeze({\n      Connections: score_by_connections,\n      Influence: score_by_influence,\n    });\n\n    this.nodeSizes = Object.freeze({\n      Influence: size_by_influence,\n      Connections: size_by_connections,\n    });\n\n    this.state.social.setSizingFunction(size_by_influence);\n\n    // Find the investors and engineers for easy filtering\n    // This requires the\n    this.findInvestorsAndEngineers();\n\n    this.state.social.setScoringFunction(this.spiralOrders[this.state.spiralOrder]);\n\n    this.socialGraph = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  updateSize() {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n    console.log(`WINDOW ${this.state.width}x${this.state.height}`);\n  }\n\n  slotSetAnchor(item) {\n    let social = this.state.social;\n\n    if (social.setAnchor(item)) {\n      this.setState({ social: social });\n    }\n  }\n\n  slotReadMore(item) {\n    this.setOverlay(\n      <BioOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        person={item}\n      />\n    );\n  }\n\n  slotShowShip(item) {\n    this.setOverlay(\n      <ShipOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        ship={item}\n      />\n    );\n  }\n\n  slotSetShip(item) {\n    if (!item._isAProjectObject) {\n      console.error(\"Cannot set item that is not a project.\");\n      return;\n    }\n\n    let social = this.state.social;\n    social.setFilter(\"project\", item);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({ selectedShip: item.getName(), selectedShipID: item.getID() });\n    this.setState({ social: social });\n  }\n\n  slotClearFilters() {\n    let social = this.state.social;\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    social.filterUnconnectedNodes(true);\n    social.filterNonContributingEngineers(true);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: false,\n      commercialFiltered: false,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n    });\n  }\n\n  toggleEngCommFilter() {\n    if (this.state.engineersFiltered) {\n      this.slotToggleFilterCommercial();\n    } else if (this.state.commercialFiltered) {\n      this.slotToggleFilterCommercial();\n    } else {\n      this.slotToggleFilterEngineer();\n    }\n  }\n\n  slotToggleNonContributingEngineers() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(!this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterNCEngineers: !this.state.filterNCEngineers,\n    });\n  }\n\n  slotToggleUnconnectedNodes() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(!this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterUnconnectedNodes: !this.state.filterUnconnectedNodes,\n    });\n  }\n\n  slotToggleFilterEngineer() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: !this.state.engineersFiltered,\n      commercialFiltered: false,\n    });\n  }\n\n  slotToggleFilterCommercial() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      commercialFiltered: !this.state.commercialFiltered,\n      engineersFiltered: false,\n    });\n  }\n\n  slotClicked(id) {\n    let social = this.state.social;\n\n    if (!id) {\n      let last_search = this.state.cachedSearch;\n\n      if (last_search === \"\") {\n        social.clearSelections();\n        social.clearHighlights();\n        this.setState({\n          social: social,\n          searchText: \"\",\n          cachedSearch: \"\",\n          searchWasItem: false,\n        });\n      } else {\n        this.performSearch(this.state.cachedSearch, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n      }\n    } else {\n      let item = social.get(id);\n\n      social.setSelected(id, true, true);\n      this.setState({\n        social: social,\n        searchText: item.getName(),\n        searchWasItem: true,\n      });\n    }\n  }\n\n  slotWindowChanged(window) {\n    let social = this.state.social;\n\n    if (social.setWindow(window)) {\n      this.setState({ social: social });\n    }\n  }\n\n  hasConnections(entity) {\n    return this.state.social.getConnections().gotConnections(entity.id);\n  }\n\n  findInvestorsAndEngineers() {\n    // Add nodes to the commercial or engineering groups. This\n    // creates filters that filter positions that we've matched\n    // as benig \"engineer\" or \"commercial\"\n    let commercialNodeFilter = this.state.commercialNodeFilter;\n    let engineerNodeFilter = this.state.engineerNodeFilter;\n\n    const social = this.state.social;\n\n    let positions = social.getPositions(false).items();\n\n    Object.keys(positions).forEach((name) => {\n      // Trim any extra characters or whitespace from the position string\n      const namedPosition = name\n        .toLowerCase()\n        .replace(/\\s/g, \"\")\n        .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n\n      // Here we need to check if they've already been saved to stop double counting\n      if (positionGroups[\"commercial\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!commercialNodeFilter.includes(positionID)) {\n          commercialNodeFilter.push(positionID);\n        }\n      }\n\n      if (positionGroups[\"engineering\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!engineerNodeFilter.includes(positionID)) {\n          engineerNodeFilter.push(positionID);\n        }\n      }\n    });\n  }\n\n  toggleSpiralOrder() {\n    const order = this.state.spiralOrder;\n\n    if (order === \"Influence\") {\n      this.setSpiralOrder(\"Connections\");\n    } else if (order === \"Connections\") {\n      this.setSpiralOrder(\"Influence\");\n    }\n  }\n\n  setSpiralOrder(order) {\n    if (order in this.spiralOrders) {\n      if (this.state.spiralOrder !== order) {\n        let social = this.state.social;\n        social.setScoringFunction(this.spiralOrders[order]);\n        this.setState({\n          social: social,\n          spiralOrder: order,\n        });\n      }\n    } else {\n      console.error(\"Invalid spiral order, valid orders are \", Object.keys(this.spiralOrders));\n    }\n  }\n\n  toggleNodeSize() {\n    const size = this.state.nodeSize;\n\n    if (size === \"Influence\") {\n      this.setNodeSize(\"Connections\");\n    } else if (size === \"Connections\") {\n      this.setNodeSize(\"Influence\");\n    }\n  }\n\n  setNodeSize(size) {\n    if (size in this.nodeSizes) {\n      if (this.state.nodeSize !== size) {\n        let social = this.state.social;\n        social.setSizingFunction(this.nodeSizes[size]);\n        this.setState({\n          social: social,\n          nodeSize: size,\n        });\n      }\n    } else {\n      console.error(\"Invalid sizing function, valid functions are \", Object.keys(this.nodeSizes));\n    }\n  }\n\n  setOverlay(item) {\n    this.setState({\n      overlayItem: item,\n      isOverlayOpen: true,\n    });\n  }\n\n  closeOverlay() {\n    this.setState({\n      isOverlayOpen: false,\n      overlayItem: null,\n    });\n  }\n\n  performSearch(text, include_bios, highlight_links) {\n    let social = this.state.social;\n\n    social.selectSearchMatching(text, include_bios, highlight_links);\n\n    this.setState({\n      social: social,\n      searchIncludeBios: include_bios,\n      searchHighlightLinks: highlight_links,\n      searchText: text,\n      searchWasItem: false,\n      cachedSearch: text,\n    });\n  }\n\n  slotShowMenu() {\n    this.setState({ menuVisible: true });\n  }\n\n  slotCloseMenu() {\n    this.setState({ menuVisible: false });\n  }\n\n  slotUpdateSearch(text) {\n    this.performSearch(text, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n  }\n\n  slotSearchBiosToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, toggled, this.state.searchHighlightLinks);\n    }\n  }\n\n  slotSearchHighlightToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, this.state.searchIncludeBios, toggled);\n    }\n  }\n\n  toggleOverlay() {\n    this.setState({ isOverlayOpen: !this.state.isOverlayOpen });\n  }\n\n  resetAll() {\n    window.location.reload(true);\n  }\n\n  render() {\n    let menu = (\n      <TextButton\n        onClick={() => {\n          this.slotShowMenu();\n        }}\n      >\n        Options\n      </TextButton>\n    );\n\n    let search = (\n      <SearchBar\n        emitUpdate={(text) => {\n          this.slotUpdateSearch(text);\n        }}\n        emitSearchHighlightToggled={(toggled) => {\n          this.slotSearchHighlightToggled(toggled);\n        }}\n        searchText={this.state.searchText}\n        searchHighlightToggled={this.state.searchHighlightLinks}\n        searchHighlightAvailable={!this.state.searchWasItem}\n      />\n    );\n\n    let help = (\n      <TextButton\n        onClick={() => {\n          this.setOverlay(\n            <HowDoIOverlay\n              close={() => {\n                this.closeOverlay();\n              }}\n            />\n          );\n        }}\n      >\n        Info\n      </TextButton>\n    );\n\n    let graph = (\n      <ForceGraph\n        social={this.state.social}\n        selected={this.state.selected_item}\n        highlighted={this.state.highlighted_item}\n        signalClicked={(id) => this.slotClicked(id)}\n        emitSetCenter={(id) => {\n          this.slotSetAnchor(id);\n        }}\n        emitReadMore={(id) => {\n          this.slotReadMore(id);\n        }}\n      />\n    );\n\n    let spiral_button = (\n      <LabelButton\n        label=\"Spiral Order\"\n        button={this.state.spiralOrder}\n        onClick={() => {\n          this.toggleSpiralOrder();\n        }}\n      />\n    );\n\n    let ship_button = (\n      <ShipSelector\n        projects={this.state.social.getProjects()}\n        emitSetShip={(item) => this.slotSetShip(item)}\n        emitShowShip={(item) => this.slotShowShip(item)}\n      />\n    );\n\n    let size_button = (\n      <LabelButton\n        label=\"Node Size\"\n        button={this.state.nodeSize}\n        onClick={() => {\n          this.toggleNodeSize();\n        }}\n      />\n    );\n\n    let filter_text = \"None\";\n\n    if (this.state.commercialFiltered) {\n      filter_text = \"Commercial\";\n    } else if (this.state.engineersFiltered) {\n      filter_text = \"Engineers\";\n    }\n\n    let filter_button = (\n      <LabelButton\n        label=\"Filter\"\n        button={filter_text}\n        onClick={() => {\n          this.toggleEngCommFilter();\n        }}\n      />\n    );\n\n    let unconnected_button = (\n      <LabelButton\n        label=\"Unconnected\"\n        button={this.state.filterUnconnectedNodes ? \"Invisible\" : \"Visible\"}\n        onClick={() => {\n          this.slotToggleUnconnectedNodes();\n        }}\n      />\n    );\n\n    let noncontrib_button = (\n      <LabelButton\n        label=\"Non-contributers\"\n        button={this.state.filterNCEngineers ? \"Invisible\" : \"Visible\"}\n        onClick={() => {\n          this.slotToggleNonContributingEngineers();\n        }}\n      />\n    );\n\n    let search_text = this.state.searchIncludeBios ? \"Biographies\" : \"Names\";\n\n    let toggle_search = () => {\n      this.slotSearchBiosToggled(!this.state.searchIncludeBios);\n    };\n\n    let search_button = (\n      <LabelButton\n        label=\"Search\"\n        button={search_text}\n        onClick={toggle_search}\n      />\n    );\n\n    let overlay = null;\n    if (this.state.isOverlayOpen) {\n      overlay = (\n        <Overlay\n          toggleOverlay={() => {\n            this.toggleOverlay();\n          }}\n        >\n          {this.state.overlayItem}\n        </Overlay>\n      );\n    }\n\n    let left_side = null;\n    let right_side = null;\n\n    if (this.state.width > 900) {\n      left_side = (\n        <HBox>\n          {spiral_button}\n          {filter_button}\n          {search_button}\n        </HBox>\n      );\n\n      right_side = (\n        <HBox>\n          {unconnected_button}\n          {noncontrib_button}\n          {size_button}\n        </HBox>\n      );\n    } else if (this.state.width > 700) {\n      left_side = (\n        <HBox>\n          {spiral_button}\n          {filter_button}\n        </HBox>\n      );\n\n      right_side = (\n        <HBox>\n          {noncontrib_button}\n          {size_button}\n        </HBox>\n      );\n    } else if (this.state.width > 550) {\n      left_side = spiral_button;\n      right_side = size_button;\n    }\n\n    let mainmenu = (\n      <SlidingPanel isOpen={this.state.menuVisible}\n        position=\"left\" height=\"100%\" width=\"10em\">\n        <MainMenu\n          close={() => {\n            this.slotCloseMenu();\n          }}\n          spiralOrder={this.state.spiralOrder}\n          filterText={filter_text}\n          sizeText={this.state.nodeSize}\n          searchText={search_text}\n\n          unconnectedNodesVisible={!this.state.filterUnconnectedNodes}\n          ncEngineersVisible={!this.state.filterNCEngineers}\n          engineersFiltered={this.state.engineersFiltered}\n          commercialFiltered={this.state.commercialFiltered}\n          searchHighlight={this.state.searchHighlightLinks}\n          searchBios={this.state.searchIncludeBios}\n          emitResetFilters={() => {\n            this.slotClearFilters();\n          }}\n          emitToggleSpiralOrder={() => this.toggleSpiralOrder()}\n          emitToggleFilter={() => this.toggleEngCommFilter()}\n          emitToggleNodeSize={() => this.toggleNodeSize()}\n          emitToggleSearch={toggle_search}\n\n          emitToggleFilterCommercial={() => this.slotToggleFilterCommercial()}\n          emitToggleFilterEngineering={() => this.slotToggleFilterEngineer()}\n          emitToggleUnconnectedNodesVisible={() => this.slotToggleUnconnectedNodes()}\n          emitToggleNCEngineersVisible={() => this.slotToggleNonContributingEngineers()}\n          emitSearchHighlightToggled={() => this.slotSearchHighlightToggled(!this.state.searchHighlightLinks)}\n          emitSearchBiosToggled={() => this.slotSearchBiosToggled(!this.state.searchIncludeBios)}\n        />\n      </SlidingPanel>\n    );\n\n    return (\n      <div>\n        {mainmenu}\n        <div className={styles.ui_main}>\n          <VBox>\n            <HBox>\n              {menu}\n              <BigBox>{search}</BigBox>\n              {help}\n            </HBox>\n\n            <BigBox>\n              <div className={styles.fullscreen}>{graph}</div>\n            </BigBox>\n\n            <HBox>\n              {left_side}\n              <BigBox>{ship_button}</BigBox>\n              {right_side}\n            </HBox>\n          </VBox>\n        </div>\n        {overlay}\n      </div>\n    );\n  }\n}\n\nexport default SocialApp;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"uob_logo_image\":\"ForceGraph_uob_logo_image__3l_1N\",\"bi_logo_image\":\"ForceGraph_bi_logo_image__uV2J8\",\"right_logo\":\"ForceGraph_right_logo__1Ekzw\",\"left_logo\":\"ForceGraph_left_logo__2DYAk\",\"svg_view\":\"ForceGraph_svg_view__2ME_c\",\"node\":\"ForceGraph_node__27s5W\",\"node_highlighted\":\"ForceGraph_node_highlighted__13qEh\",\"node_engineer\":\"ForceGraph_node_engineer__2bJqi\",\"node_engineer_highlighted\":\"ForceGraph_node_engineer_highlighted__Hf9Fk\",\"node_business\":\"ForceGraph_node_business__2Avwy\",\"node_business_highlighted\":\"ForceGraph_node_business_highlighted__3GCjy\",\"node_nc_engineer\":\"ForceGraph_node_nc_engineer__3XKdc\",\"node_nc_engineer_highlighted\":\"ForceGraph_node_nc_engineer_highlighted__28P7T\",\"node_selected\":\"ForceGraph_node_selected__3JS3X\",\"link\":\"ForceGraph_link__2qaVU\",\"linkWeak\":\"ForceGraph_linkWeak__2lOg3\",\"linkIndirect\":\"ForceGraph_linkIndirect__1hzat\",\"linkInvisible\":\"ForceGraph_linkInvisible__2lF55\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link_highlight\":\"ForceGraph_link_highlight__3uD71\",\"node_text\":\"ForceGraph_node_text__3ovHB\",\"node_text_highlight\":\"ForceGraph_node_text_highlight__2r00s\",\"node_text_select\":\"ForceGraph_node_text_select__1imLO\"};","module.exports = __webpack_public_path__ + \"static/media/uob_logo.69d10a8d.png\";","module.exports = __webpack_public_path__ + \"static/media/bi_logo.60f3dcf3.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"TextButton_button__2yNkD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bigbox\":\"BigBox_bigbox__2UnYn\",\"fill\":\"BigBox_fill__2HrJ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"vbox\":\"VBox_vbox__2jGLW\",\"child\":\"VBox_child__2_lfW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hbox\":\"HBox_hbox__3BAn8\",\"child\":\"HBox_child__2YyC5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"closeButton\":\"Popover_closeButton__1Msfq\",\"popOver\":\"Popover_popOver__10jzZ\",\"header\":\"Popover_header__2TOZN\",\"bio\":\"Popover_bio__3Ekto\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ShipSelector_container__3AFhA\",\"content\":\"ShipSelector_content__1xElP\",\"arrow_button\":\"ShipSelector_arrow_button__3fE9s\",\"ship_button\":\"ShipSelector_ship_button__3S73O\",\"ship_button_selected\":\"ShipSelector_ship_button_selected__1Fyze\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"LabelButton_label__2iyuT\",\"button\":\"LabelButton_button__1F1S6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HowDoIOverlay_container__NXP8l\",\"closeButton\":\"HowDoIOverlay_closeButton__1XerT\",\"textContainer\":\"HowDoIOverlay_textContainer__CwBr7\",\"header\":\"HowDoIOverlay_header__34qJ-\",\"intro\":\"HowDoIOverlay_intro__32MKa\",\"sectionHeader\":\"HowDoIOverlay_sectionHeader__2STY2\",\"body\":\"HowDoIOverlay_body__28B14\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Overlay_overlay__3n4WI\",\"overlayNoBackground\":\"Overlay_overlayNoBackground__17dWq\",\"container\":\"Overlay_container__Mgt_A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"SearchBar_form__3-Lq7\",\"searchBar\":\"SearchBar_searchBar__W2Qbi\",\"input\":\"SearchBar_input__3Mb6o\",\"clearButton\":\"SearchBar_clearButton__12EQd\",\"linkButton\":\"SearchBar_linkButton__3mGVL\",\"linkButtonHighlighted\":\"SearchBar_linkButtonHighlighted__2Tyc2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggled\":\"ToggleButton_toggled__vSC4i\",\"untoggled\":\"ToggleButton_untoggled__1WAc8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BioOverlay_container__JNbgi\",\"closeButton\":\"BioOverlay_closeButton__3kwkz\",\"image\":\"BioOverlay_image__pKZRH\",\"caption\":\"BioOverlay_caption__2KwLl\",\"content\":\"BioOverlay_content__3SQpI\",\"panel\":\"BioOverlay_panel__SrUJP\",\"name\":\"BioOverlay_name__xj4_r\",\"bio_heading\":\"BioOverlay_bio_heading__3FtQQ\",\"source_heading\":\"BioOverlay_source_heading__1d7iI\",\"bio\":\"BioOverlay_bio__1QjHO\",\"source\":\"BioOverlay_source__3hOOX\",\"source_name\":\"BioOverlay_source_name__LdNo7\",\"source_item\":\"BioOverlay_source_item__6TCmp\"};","var map = {\n\t\"./320px-SS_Great_Britain_diagram.jpg\": 96,\n\t\"./320px-SS_Great_Britain_transverse_section.jpg\": 97,\n\t\"./800px-Gutenberg_Bible.jpg\": 98,\n\t\"./A_Specimen_by_William_Caslon.jpg\": 99,\n\t\"./Brunel_letter_GWR.jpg\": 100,\n\t\"./Great_Western_maiden_voyage.jpg\": 101,\n\t\"./IllustriteZeitung_SS_GreatBritain.png\": 102,\n\t\"./RHowlett_IKB.jpg\": 103,\n\t\"./Sumerian_26th_c_Adab.jpg\": 104,\n\t\"./The_Steamer_Great_Western_small.jpg\": 105,\n\t\"./bg-128-168.jpg\": 106,\n\t\"./bi_logo.png\": 64,\n\t\"./ssgb_logo.png\": 107,\n\t\"./uob_logo.png\": 63\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 95;","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_diagram.898c32f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_transverse_section.7767cb60.jpg\";","module.exports = __webpack_public_path__ + \"static/media/800px-Gutenberg_Bible.89cc4cbe.jpg\";","module.exports = __webpack_public_path__ + \"static/media/A_Specimen_by_William_Caslon.6240f5ce.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Brunel_letter_GWR.ee7f061c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Great_Western_maiden_voyage.f85d382e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/IllustriteZeitung_SS_GreatBritain.946104e0.png\";","module.exports = __webpack_public_path__ + \"static/media/RHowlett_IKB.68e88d10.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Sumerian_26th_c_Adab.757d98b8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/The_Steamer_Great_Western_small.8756970f.jpg\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAPAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAgACAAwERAAIRAQMRAf/EAFIAAQEAAAAAAAAAAAAAAAAAAAAIAQEAAAAAAAAAAAAAAAAAAAAAEAABBAMAAAAAAAAAAAAAAADwATFBUaECIhEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AppNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwH//2Q==\"","module.exports = __webpack_public_path__ + \"static/media/ssgb_logo.ee48e16d.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ShipOverlay_container__3pB6b\",\"closeButton\":\"ShipOverlay_closeButton__126fc\",\"name\":\"ShipOverlay_name__2KJnm\",\"bio\":\"ShipOverlay_bio__EX0YP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleText\":\"MainMenu_titleText__3DZVN\",\"panel\":\"MainMenu_panel__2B8MV\",\"menu_label\":\"MainMenu_menu_label__bAmr2\",\"menu_button\":\"MainMenu_menu_button__Kt0uL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"ui_main\":\"SocialApp_ui_main__1aYwH\",\"drawerButton\":\"SocialApp_drawerButton__1yuvm\",\"fullscreen\":\"SocialApp_fullscreen__2xzWo\"};"],"sourceRoot":""}