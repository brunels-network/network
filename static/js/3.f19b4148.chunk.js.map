{"version":3,"sources":["components/TextButton.js","components/AnalysisPanel.js","components/AnalysisButton.js","components/BioOverlay.js","components/SourceOverlay.js","components/Overlay.js","components/OverlayWrapper.js","components/Popover.js","components/d3/ForceGraph.d3.js","components/ForceGraph.js","components/SocialGraph.js","components/Accordion.js","components/DefaultButton.js","components/CheckBox.js","components/ResponsiveList.js","components/GroupsList.js","components/ConnectionList.js","components/DateRangeButton.js","model/Errors.js","model/RoughDate.js","model/DateRange.js","components/SourceList.js","components/WeightsList.js","model/Person.js","model/People.js","model/Business.js","model/Businesses.js","model/Connection.js","model/Connections.js","model/Position.js","model/Positions.js","model/Affiliation.js","model/Affiliations.js","model/Source.js","model/Sources.js","model/Note.js","model/Notes.js","model/Project.js","model/Projects.js","model/Biographies.js","model/Social.js","components/InfoBox.js","components/NewTimeline.js","components/TimeLineBox.js","components/FilterBox.js","components/SlidingPanel.js","components/OverlayBox.js","components/BrunelMenu.js","components/ShipSelector.js","components/ShipTitle.js","components/SearchBar.js","components/SearchOverlay.js","components/OptionsOverlay.js","SocialApp.js","images/Great_Western_maiden_voyage.jpg","images sync /^/.//.*$","images/320px-SS_Great_Britain_diagram.jpg","images/320px-SS_Great_Britain_transverse_section.jpg","images/IllustriteZeitung_SS_GreatBritain.png","images/RHowlett_IKB.jpg","images/Sumerian_26th_c_Adab.jpg","images/ssgb_logo.png","components/TextButton.module.css","components/AnalysisPanel.module.css","components/AnalysisButton.module.css","components/Popover.module.css","components/BioOverlay.module.css","images/800px-Gutenberg_Bible.jpg","images/A_Specimen_by_William_Caslon.jpg","images/Brunel_letter_GWR.jpg","images/The_Steamer_Great_Western_small.jpg","images/bg-128-168.jpg","images/people/Joshua_field.jpg","components/SourceOverlay.module.css","components/Overlay.module.css","components/ForceGraph.module.css","components/Accordion.module.css","components/DefaultButton.module.css","components/CheckBox.module.css","components/ResponsiveList.module.css","components/GroupsList.module.css","components/ConnectionList.module.css","components/WeightsList.module.css","components/InfoBox.module.css","components/TimeLineBox.module.css","components/FilterBox.module.css","components/SlidingPanel.module.css","components/transitions/SlideFromLeft.module.css","components/transitions/SlideFromRight.module.css","components/transitions/SlideFromBottom.module.css","components/transitions/SlideFromTop.module.css","components/OverlayBox.module.css","components/BrunelMenu.module.css","components/ShipSelector.module.css","components/ShipTitle.module.css","components/SearchBar.module.css","components/SearchOverlay.module.css","components/OptionsOverlay.module.css","SocialApp.module.css"],"names":["TextButton","props","defaultCSS","background","border","fontFamily","color","cursor","fontSize","padding","textAlign","clickFn","css","this","textColor","hoverColor","onClick","className","styles","button","children","React","Component","AnalysisPanel","wholePanel","verticalSpaceTitle","titleText","verticalSpace","toggleSearchOverlay","togglePanel","toggleFilterPanel","toggleOptionsOverlay","AnalysisButon","BioOverlay","state","isVisible","person","id","getID","name","getName","bio","social","getBiographies","getByID","replace","filename","imageFilenames","sourceButton","toggleSourceOverlay","sourceButtonText","container","closeButton","toggleOverlay","style","nameHeader","positions","sources","dynamicHeader","divider","imageSection","key","src","require","alt","imageDescription","SourceOverlay","onChange","bind","currentImage","elemCodes","imageElements","sourceIDs","map","push","imageID","setState","showArrows","length","sourceID","source","get","bioButton","toggleBioOverlay","body","sourceName","getDescription","biography","value","slidesPerPage","arrows","arrowLeft","icon","faAngleDoubleLeft","arrowLeftDisabled","faAngleLeft","arrowRight","faAngleDoubleRight","arrowRightDisabled","faAngleRight","addArrowClickHandler","Overlay","useState","open","setOpen","overlay","useBackground","overylayNoBackground","e","stopPropagation","defaultProps","OverlayWrapper","socialSources","getSources","isOverlayOpen","isSourceOverlayOpen","entity","isBioOverlayOpen","Popover","setWrapperRef","handleClickOutside","document","addEventListener","removeEventListener","node","wrapperRef","event","contains","target","clearPopups","str","ellipsis","max","array","trim","split","slice","join","selectedShipID","label","readMoreButton","buttonStrings","nodeType","getPeople","TypeError","getBusinesses","console","error","truncate","left","top","innerWidth","window","innerHeight","popoverHeight","popoverWidth","x","y","ref","popOver","height","popoverHeightVH","width","popoverWidthVW","header","bioSection","readMore","sourceHeader","sourceSection","_null_function","constrain","w","r","Math","min","_resolve","item","ForceGraphD3","_updateSimulation","_updateLink","_updateNodeText","_updateNode","draw","drawFromScratch","setPositionColors","getPositionColor","update","updateGraph","drag","dragLink","getWeight","uid","uuidv4","selected","highlighted","lastPhysics","physicsEnabled","signalClicked","signalMouseOut","signalMouseOver","indirectLinksVisible","unconnectedNodesVisible","colors","groupTable","_size_changed","_graph_changed","_is_running","_is_drawn","_target_decay","_target_alpha","_tooltips","filter","getFilter","Object","keys","getConnections","find","gotConnections","h","graph","getGraph","l","lodash","cloneDeep","edges","edge","n","nodes","source_id","target_id","old_nodes","old","_graph","i","o","random","fixed","fx","fy","fixedLocation","randomShift","size_changed","lastShip","log","prototype","hasOwnProperty","call","group","positionGroups","toLowerCase","startsWith","positionCode","getPositionCode","splitGroup","namedPositions","getPositions","items","colorTable","entries","position","trimPosition","members","includes","positionGroup","simulation","_simulation","d3","on","d","restart","index","dx","dy","shipID","getSelectedShipID","weight","data","_mainGroup","select","selectAll","enter","append","attr","emitPopProps","text","node_text","log10","link","indirectStyle","linkIndirect","linkInvisible","type","linkWeak","stop","alpha","alphaTarget","alphaDecay","force","strength","distanceMin","distanceMax","links","distance","iterations","radius","size","getGroupForce","_link","dr","sqrt","_node","_label","restartSimulation","velocityDecay","alphaMin","remove","mainGroup","update_simulation","ForceGraph","popoversVisible","popups","tempProps","updateSize","offsetWidth","offsetHeight","prevState","assign","s","p","togglePopover","fastPhysics","slowPhysics","el","SocialGraph","getNetwork","emitClicked","wobble","BAccordion","accordion","preExpanded","allowMultipleExpanded","allowZeroExpanded","BAccordionItem","accordionItem","uuid","BAccordionTitle","accordionButton","BAccordionPanel","DefaultButton","href","CheckBox","checkBox","checked","checkMark","ResponsiveList","list","ResponsiveListItem","null_function","GroupsList","groups","title","emitSelected","emitToggleFilter","projects","forEach","is_filtered","isFiltered","project","projectHeader","projectBody","minWidth","ConnectionList","connections","listitems","DateRangeButton","_isARoughDateObject","_isADateRangeObject","isNull","toSimpleString","toDateRange","KeyError","args","Error","ValueError","MissingError","_toDate","val","def","_isAMomentObject","date","moment","isValid","_get_min","d1","d2","toDate","_get_max","RoughDate","start","end","raw","toISOString","delta","add","isFuzzy","format","getMonth","getDate","getFullYear","getEarliest","getLatest","DateRange","isExact","both","m","toMoment","other","s1","s2","getStart","getEnd","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","unDry","Dry","registerClass","_clean","hasBounds","isInstant","getStartString","getEndString","getEarliestStart","merge","getLatestEnd","hasStart","hasEnd","my_start","other_start","my_end","other_end","scale","getDelta","toString","tmp","dates","SourceList","output","daterange","mergeAll","WeightsList","weights","_filterWindow","values","ret","intersect","_filterProject","Person","titles","firstnames","surnames","suffixes","affiliations","alive","gender","notes","orig_name","_getHook","_isAPersonObject","ids","seen","nsources","nprojects","getAlive","hook","parts","part","getTitle","getFirstName","getSurname","getSuffix","scores","content","projectKey","isAnchor","shape","sort","fixedNodes","c","_generate_person_uid","substring","People","registry","_names","_isAPeopleObject","load","_updateHooks","names","canAdd","existing","getByName","clone","results","indexOf","funcs","people","timeline","getTimeLine","anchor","getNode","is_anchor","element","v","Business","_isABusinessObject","business","_generate_business_uid","Businesses","_isABusinessesObject","businesses","_mergeSources","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","nProjects","getDuration","getNode0Name","getNode1Name","getColorFromType","_generate_connection_uid","Connections","_isAConnectionsObject","connection","nnodes","_add","getNode0ID","getNode1ID","areNodesVisible","toEdge","Position","_isAPositionObject","canonical","makeCanonical","_generate_position_uid","Positions","_isAPositionsObject","_isApositionObject","Affiliation","_isAAffiliationObject","_generate_affiliation_uid","Affiliations","_isAAffiliationsObject","affiliation","Source","description","_isASourceObject","ne","_generate_source_uid","Sources","_isASourcesObject","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","Project","url","_isAProjectObject","start_time","end_time","project_id","_generate_project_uid","Projects","_isAProjectsObject","Biographies","bios","_isABiographiesObject","_push","enabled","timestep","Social","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","_rebuilding","_isASocialObject","getHook","biographies","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","getStartDate","getEndDate","fitted","_fitWindow","setWindow","clearCache","filtered","getNodeFilters","getEdgeFilters","f","_getType","result","getAffiliations","search","getProjects","getNodes","concat","getEdges","added","getNotes","default_text","getBiography","pages","a","InfoBox","image","default_image","person_image","business_image","source_image","asources","getAffiliationSources","csources","getCorrespondanceSources","getWeights","getType","analysis_image","extractData","tabs","panes","tabId","tabPanel","tab","tabFor","heroImage","vertical","defaultTab","tablist","NewTimeline","setFilter","itemRenderer","defaultTimeStart","defaultTimeEnd","textStyle","overflow","paddingLeft","textOverflow","whiteSpace","dateHeaderStyle","backgroundColor","shipName","resetFilters","itemContext","getItemProps","resizing","borderStyle","borderWidth","onMouseDown","timeline_items","getNewTimeLine","sidebarWidth","itemTouchSendsClick","stackItems","lineHeight","itemHeightRatio","showCursorLine","canMove","canResize","traditionalZoom","timeSteps","year","unit","intervals","headerContext","getRootProps","getIntervalProps","interval","borderLeft","startTime","TimeLineBox","dimensions","deactivate","activate","tabList","shipSelect","centerContainer","filterList","maxWidth","FilterBox","filter_text","getFilterText","emitClearFilters","filter_info","filterContainer","filterText","SlidingPanel","isOpen","defaultSize","minSize","maxSize","rightContainer","transition","SlideFromRight","horiz_size","vert_size","maxHeight","bottomContainer","SlideFromBottom","topContainer","SlideFromTop","leftContainer","SlideFromLeft","CSSTransition","in","timeout","classNames","unmountOnExit","OverlayBox","loading","getURL","fadeIn","emitClose","BrunelMenu","viewAbout","viewSource","setOverlay","focus","sidebar","logo","clickReset","ShipSelector","ssGW","shipFilter","disabledButton","ShipTitle","shipTitle","SearchResults","SearchBar","suggestions","searching","nextProps","searchText","emitResults","createButton","setSuggestions","setResults","setTimeout","startSearch","startSuggestion","isSearching","autocomplete","isEmpty","which","keyCode","searchFor","searchContainer","resultContainer","searchPending","display","closeResultButton","stopSearch","searchResult","searchBox","onKeyPress","onEnter","placeholder","isSearchingComponent","isSuggesting","isSuggestingComponent","hasResults","resultsComponent","SearchOverlay","haveResults","selectedEntity","infoOverlay","smallContainer","emitHighlighted","OptionsOverlay","optionsContainer","optionsHeader","indirectTitle","indirectCheckbox","toggleIndirectLinksVisible","physicsTitle","physicsCheckbox","togglePhysicsEnabled","SocialApp","parse","graph_data","setAnchor","setMaxWindow","highlighted_item","selected_item","overlayItem","isInfoPanelOpen","isTimeLinePanelOpen","isFilterPanelOpen","isHamburgerMenuOpen","isSearchOverlayOpen","isOptionsOverlayOpen","unconnectedNodes","isAnalysisOpen","selectedShip","findUnconnectedNodes","socialGraph","slotToggleFilter","toggleProjectFilter","clearProjectFilter","toggleFilter","toggleNodeFilter","showInfo","closePanels","b","slotToggleNodeFilter","location","reload","searchOverlay","slotSelected","slotHighlighted","slotClicked","optionsOverlay","onoff","onRequestClose","closeOverlay","contentLabel","modal","overlayClassName","base","modalOverlay","afterOpen","modalOverlayAfterOpen","beforeClose","modalOverlayBeforeClose","closeTimeoutMS","appElement","getElementById","closeOverlayButton","hamburgerContainer","hamburgerButton","resetButtonContainer","resetAll","toggleUnconnectedNodesVisible","closePanelButton","slotSetFilter","slotClearFilters","clickSource","shipNameContainer","mainContainer","graphContainer","wobbleEnabled","rightSidePanel","AnalysisButton","toggleAnalysisPanel","toggleTimeLinePanel","module","exports","webpackContext","req","webpackContextResolve","__webpack_require__","code","resolve"],"mappings":"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","file":"static/js/3.f19b4148.chunk.js","sourcesContent":["/** @jsx jsx */\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport { jsx } from \"@emotion/core\";\n\nimport styles from \"./TextButton.module.css\";\n\nclass TextButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.defaultCSS = {\n      background: \"none\",\n      border: \"none\",\n      fontFamily: \"Playfair Display SC\",\n      color: \"#f1f1f1\",\n      cursor: \"pointer\",\n      fontSize: \"3vh\",\n      padding: \"1vh 1vw 1vh 1.4vw\",\n      textAlign: \"left\",\n      \"&:hover\": { color: \"black\" },\n    };\n  }\n  render() {\n    const css = this.defaultCSS;\n\n    if (this.props.textColor) {\n      css[\"color\"] = this.props.textColor;\n    }\n\n    if (this.props.hoverColor) {\n      css[\"&:hover\"][\"color\"] = this.props.hoverColor;\n    }\n\n    if (this.props.fontSize) {\n      css[\"fontSize\"] = this.props.fontSize;\n    }\n\n    if (this.props.padding) {\n      css[\"padding\"] = this.props.padding;\n    }\n\n    if (this.props.fontFamily) {\n      css[\"fontFamily\"] = this.props.fontFamily;\n    }\n\n    let clickFn;\n    if (this.props.onClick) {\n      clickFn = this.props.onClick;\n    } else {\n      clickFn = () => null;\n    }\n\n    return (\n      <button className={styles.button} css={css} onClick={clickFn}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n\nTextButton.propTypes = {\n  children: PropTypes.any,\n  hoverColor: PropTypes.string,\n  textColor: PropTypes.string,\n  onClick: PropTypes.func,\n  style: PropTypes.object,\n};\n\nexport default TextButton;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport TextButton from \"./TextButton\";\nimport styles from \"./AnalysisPanel.module.css\";\n\nclass AnalysisPanel extends React.Component {\n  render() {\n    const buttonPadding = \"1vh 1vw 1vh 1vw\";\n\n    return (\n      <div className={styles.wholePanel}>\n        <div className={styles.verticalSpaceTitle}></div>\n        <div className={styles.titleText}>Analysis</div>\n        <div className={styles.verticalSpace}></div>\n        <TextButton\n          padding={buttonPadding}\n          onClick={() => {\n            this.props.toggleSearchOverlay();\n            this.props.togglePanel();\n          }}\n        >\n          Search\n        </TextButton>\n        <TextButton\n          padding={buttonPadding}\n          onClick={() => {\n            this.props.toggleFilterPanel();\n            this.props.togglePanel();\n          }}\n        >\n          Filters\n        </TextButton>\n        {/* // Remove timeline for now */}\n        {/* <TextButton\n          padding={buttonPadding}\n          onClick={() => {\n            this.props.toggleTimeLinePanel();\n            this.props.togglePanel();\n          }}\n        >\n          Timeline\n        </TextButton> */}\n        <TextButton\n          padding={buttonPadding}\n          className={styles.button}\n          onClick={() => {\n            this.props.toggleOptionsOverlay();\n            this.props.togglePanel();\n          }}\n        >\n          Options\n        </TextButton>\n        <div className={styles.verticalSpace}></div>\n        <TextButton\n          padding={buttonPadding}\n          onClick={() => {\n            this.props.togglePanel();\n          }}\n        >\n          Close\n        </TextButton>\n      </div>\n    );\n  }\n}\n\nAnalysisPanel.propTypes = {\n  toggleSearchOverlay: PropTypes.func.isRequired,\n  toggleFilterPanel: PropTypes.func.isRequired,\n  toggleTimeLinePanel: PropTypes.func.isRequired,\n  togglePanel: PropTypes.func.isRequired,\n  toggleOptionsOverlay: PropTypes.func.isRequired,\n};\n\nexport default AnalysisPanel;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./AnalysisButton.module.css\";\n\nclass AnalysisButon extends React.Component {\n  render() {\n    return (\n      <button className={styles.button} onClick={this.props.togglePanel}>\n        Analysis\n      </button>\n    );\n  }\n}\n\nAnalysisButon.propTypes = {\n  togglePanel: PropTypes.func.isRequired,\n};\n\nexport default AnalysisButon;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport imageFilenames from \"../data/entityImageFilenames.json\";\n\nimport TextButton from \"./TextButton\";\n\nimport styles from \"./BioOverlay.module.css\";\n\nclass BioOverlay extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { isVisible: false };\n  }\n\n  render() {\n    // const sources = this.props.sources;\n    const person = this.props.person;\n    const id = person.getID();\n    const name = person.getName();\n    const biographies = this.props.social.getBiographies();\n\n    // Get biography and strip name\n    let bio = biographies.getByID(id);\n    bio = bio.replace(name + \". \", \"\");\n\n    const filename = imageFilenames[id][\"filename\"];\n\n    let sourceButton = (\n      <TextButton\n        textColor=\"black\"\n        hoverColor=\"#808080\"\n        fontSize=\"1.8vh\"\n        padding=\"0px 4px 4px 4px\"\n        onClick={this.props.toggleSourceOverlay}\n      >\n        {this.props.sourceButtonText}\n      </TextButton>\n    );\n\n    // const filename = \"The_Steamer_Great_Western_of_Bristol_RMG_A7626.jpg\";\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.closeButton}>\n          <button onClick={this.props.toggleOverlay} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n            x\n          </button>\n        </div>\n        <div className={styles.nameHeader}>{person.getName()}</div>\n        <div className={styles.positions}>{}</div>\n        <div className={styles.bio}>{bio}</div>\n        <div className={styles.sources}>\n          <div className={styles.dynamicHeader}>\n            Sources\n            <br />\n            <br />\n            <br />\n          </div>\n          <div>{sourceButton}</div>\n        </div>\n        <div className={styles.divider} />\n        <div className={styles.imageSection}>\n          <div>\n            <img key={id} src={require(`../images/${filename}`)} alt=\"Manuscript\" />\n          </div>\n          <div className={styles.imageDescription}>Image description</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nBioOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  toggleOverlay: PropTypes.func.isRequired,\n  person: PropTypes.object.isRequired,\n  toggleSourceOverlay: PropTypes.func.isRequired,\n  sourceButtonText: PropTypes.string.isRequired,\n};\n\nexport default BioOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Carousel from \"@brainhubeu/react-carousel\";\n\nimport styles from \"./SourceOverlay.module.css\";\nimport \"@brainhubeu/react-carousel/lib/style.css\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faAngleLeft,\n  faAngleDoubleLeft,\n  faAngleDoubleRight,\n  faAngleRight,\n  faWindowClose,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport TextButton from \"./TextButton\";\n\nimport imageFilenames from \"../data/sourceImageFilenames.json\";\n\nclass SourceOverlay extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n\n    this.state = { isVisible: false, currentImage: 0, elemCodes: [], imageElements: [] };\n\n    this.state.imageElements = this.props.sourceIDs.map((id) => {\n      const filename = imageFilenames[id][\"filename\"];\n\n      this.state.elemCodes.push(id);\n\n      return <img key={id} src={require(`../images/${filename}`)} alt=\"Manuscript\" />;\n    });\n  }\n\n  onChange(imageID) {\n    this.setState({ currentImage: imageID });\n  }\n\n  render() {\n    const sources = this.props.sources;\n    const person = this.props.person;\n\n    let showArrows = this.state.elemCodes.length > 1 ? true : false;\n\n    const sourceID = this.state.elemCodes[this.state.currentImage];\n    const source = sources.get(sourceID);\n\n    const bioButton = (\n      <TextButton\n        onClick={this.props.toggleBioOverlay}\n        textColor=\"black\"\n        hoverColor=\"#808080\"\n        fontSize=\"1.8vh\"\n        padding=\"2px 2px 2px 2px\"\n        fontFamily=\"Playfair Display Medium\"\n      >\n        Open biography\n      </TextButton>\n    );\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.closeButton}>\n          <button onClick={this.props.toggleOverlay} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n            x\n          </button>\n        </div>\n        <div className={styles.nameHeader}>{person.getName()}</div>\n\n        <div className={styles.body}>\n          <div className={styles.sourceName}>{source.getName()}</div>\n          <div>{source.getDescription()}</div>\n        </div>\n        <div className={styles.biography}>{bioButton}</div>\n        <div className={styles.divider} />\n        <div className={styles.imageSection}>\n          <Carousel\n            value={this.state.currentImage}\n            onChange={this.onChange}\n            slidesPerPage={1}\n            arrows={showArrows}\n            arrowLeft={<FontAwesomeIcon icon={faAngleDoubleLeft} />}\n            arrowLeftDisabled={<FontAwesomeIcon icon={faAngleLeft} />}\n            arrowRight={<FontAwesomeIcon icon={faAngleDoubleRight} />}\n            arrowRightDisabled={<FontAwesomeIcon icon={faAngleRight} />}\n            addArrowClickHandler\n          >\n            {this.state.imageElements}\n          </Carousel>\n        </div>\n      </div>\n    );\n  }\n}\n\nSourceOverlay.propTypes = {\n  sources: PropTypes.object.isRequired,\n  sourceIDs: PropTypes.array.isRequired,\n  toggleOverlay: PropTypes.func.isRequired,\n  toggleBioOverlay: PropTypes.func.isRequired,\n  person: PropTypes.object.isRequired,\n};\n\nexport default SourceOverlay;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./Overlay.module.css\";\n\n// Based on https://stackoverflow.com/a/55003301\nfunction Overlay(props) {\n  const { useState } = React;\n  const [open, setOpen] = useState(true);\n  if (open) {\n    let style = styles.overlay;\n\n    if (!props.useBackground) {\n      style = styles.overylayNoBackground;\n    }\n\n    return (\n      <div\n        className={style}\n        onClick={() => {\n          props.toggleOverlay();\n          setOpen(false);\n        }}\n      >\n        <div\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {props.children}\n        </div>\n      </div>\n    );\n  }\n  return null;\n}\n\nOverlay.defaultProps = {\n  useBackground: true,\n};\n\nexport default Overlay;\n\nOverlay.propTypes = {\n  toggleOverlay: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n  useBackground: PropTypes.bool,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BioOverlay from \"./BioOverlay\";\nimport SourceOverlay from \"./SourceOverlay\";\nimport Overlay from \"./Overlay\";\n\nclass OverlayWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const sourceButtonText = this.props.sourceButtonText;\n    const socialSources = this.props.social.getSources();\n\n    if (!this.props.sourceIDs) {\n      return null;\n    }\n\n    let overlay = null;\n    if (this.props.isOverlayOpen && this.props.isSourceOverlayOpen) {\n      overlay = (\n        <Overlay toggleOverlay={this.props.toggleOverlay}>\n          <SourceOverlay\n            sources={socialSources}\n            person={this.props.entity}\n            sourceIDs={this.props.sourceIDs}\n            toggleOverlay={this.props.toggleOverlay}\n            toggleBioOverlay={this.props.toggleBioOverlay}\n          />\n        </Overlay>\n      );\n    } else if (this.props.isOverlayOpen && this.props.isBioOverlayOpen) {\n      overlay = (\n        <Overlay toggleOverlay={this.props.toggleOverlay}>\n          <BioOverlay\n            sources={socialSources}\n            person={this.props.entity}\n            social={this.props.social}\n            toggleOverlay={this.props.toggleOverlay}\n            toggleSourceOverlay={this.props.toggleSourceOverlay}\n            sourceButtonText={sourceButtonText}\n          />\n        </Overlay>\n      );\n    }\n\n    return overlay;\n  }\n}\n\nOverlayWrapper.propTypes = {\n  entity: PropTypes.object.isRequired,\n  isBioOverlayOpen: PropTypes.bool.isRequired,\n  isOverlayOpen: PropTypes.bool.isRequired,\n  isSourceOverlayOpen: PropTypes.bool.isRequired,\n  social: PropTypes.object.isRequired,\n  sourceButtonText: PropTypes.string.isRequired,\n  sourceIDs: PropTypes.array.isRequired,\n  toggleBioOverlay: PropTypes.func.isRequired,\n  toggleOverlay: PropTypes.func.isRequired,\n  toggleSourceOverlay: PropTypes.func.isRequired,\n};\n\nexport default OverlayWrapper;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport TextButton from \"./TextButton\";\n\nimport styles from \"./Popover.module.css\";\n\nimport tempImage from \"../images/Great_Western_maiden_voyage.jpg\";\nimport OverlayWrapper from \"./OverlayWrapper\";\n\n// The detection of outside clicks in this class taken from\n// https://stackoverflow.com/a/42234988\n\nclass Popover extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n\n    this.toggleSourceOverlay = this.toggleSourceOverlay.bind(this);\n    this.toggleBioOverlay = this.toggleBioOverlay.bind(this);\n\n    this.toggleOverlay = this.toggleOverlay.bind(this);\n\n    this.state = { isOverlayOpen: false };\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      this.props.clearPopups();\n    }\n  }\n\n  toggleOverlay() {\n    this.setState({ isOverlayOpen: !this.state.isOverlayOpen });\n    this.props.clearPopups();\n  }\n\n  toggleSourceOverlay() {\n    this.setState({ isOverlayOpen: true, isSourceOverlayOpen: true, isBioOverlayOpen: false });\n  }\n\n  toggleBioOverlay() {\n    this.setState({ isOverlayOpen: true, isSourceOverlayOpen: false, isBioOverlayOpen: true });\n  }\n\n  truncate(str, max = 10) {\n    const array = str.trim().split(\" \");\n\n    let ellipsis;\n    if (array.length > max) {\n      ellipsis = \"...\";\n      //   this.setState({ readMoreEnabled: true });\n    } else {\n      ellipsis = \"\";\n    }\n\n    return array.slice(0, max).join(\" \") + ellipsis;\n  }\n\n  render() {\n    const node = this.props.node;\n    const selectedShipID = this.props.selectedShipID;\n\n    const name = node.label;\n    const social = this.props.social;\n    const socialSources = social.getSources();\n\n    let readMoreButton = (\n      <TextButton\n        textColor=\"#9B1C31\"\n        hoverColor=\"#808080\"\n        fontSize=\"1.5vh\"\n        padding=\"0px 2px 2px 2px\"\n        fontFamily=\"Playfair Display Medium\"\n        onClick={this.toggleBioOverlay}\n      >\n        Read more\n      </TextButton>\n    );\n\n    const buttonStrings = [];\n\n    let nodeType = node[\"type\"];\n\n    let entity;\n    if (nodeType === \"person\") {\n      entity = this.props.social.getPeople().get(node.id);\n    } else if (nodeType === \"business\") {\n      entity = this.props.social.getBusinesses().get(node.id);\n    } else {\n      throw new TypeError(\"Incorrect type or no type on node\");\n    }\n\n    const sourceIDs = entity.getSources()[selectedShipID];\n\n    let sourceButtonText = \"\";\n    if (!sourceIDs) {\n      console.error(\"Cannot find sources for this project : \", selectedShipID, \"\\n Sources : \", socialSources);\n    } else {\n      for (const id of sourceIDs) {\n        buttonStrings.push(socialSources.get(id).getName());\n      }\n    }\n\n    sourceButtonText = buttonStrings.join(\", \");\n\n    // Get biography for node\n    let bio = social.getBiographies().getByID(node.id);\n    bio = bio.replace(name + \".  \", \"\");\n\n    bio = this.truncate(bio, 40);\n\n    // Get the location of the click within the viewport so we can open the popover\n    // in the correct location\n    const innerWidth = window.innerWidth; // px\n    const innerHeight = window.innerHeight; // px\n\n    const popoverHeightVH = 30; // vh\n    const popoverWidthVW = 15; // vw\n\n    const popoverHeight = innerHeight * (popoverHeightVH / 100); // px\n    const popoverWidth = innerWidth * (popoverWidthVW / 100); // px\n\n    let left;\n    if (node.x > innerWidth - popoverWidth) {\n      left = node.x - 20 - popoverWidth + \"px\";\n    } else {\n      left = node.x + 10 + \"px\";\n    }\n\n    let top;\n    if (node.y > innerHeight - popoverHeight) {\n      top = node.y - 10 - popoverHeight + \"px\";\n    } else {\n      top = node.y + \"px\";\n    }\n\n    return (\n      <div ref={this.setWrapperRef}>\n        <div\n          className={styles.popOver}\n          style={{ top: top, left: left, height: popoverHeightVH + \"vh\", width: popoverWidthVW + \"vw\" }}\n        >\n          <div className={styles.header}>{name}</div>\n          <div className={styles.bioSection}>{bio}</div>\n          <div className={styles.readMore}>{readMoreButton}</div>\n          <div className={styles.sourceHeader}>Sources</div>\n          <div className={styles.sourceSection}>\n            <TextButton\n              textColor=\"black\"\n              hoverColor=\"#808080\"\n              fontSize=\"1.5vh\"\n              padding=\"0px 4px 4px 4px\"\n              onClick={this.toggleSourceOverlay}\n            >\n              {sourceButtonText}\n            </TextButton>\n          </div>\n        </div>\n        <OverlayWrapper\n          isBioOverlayOpen={this.state.isBioOverlayOpen}\n          isOverlayOpen={this.state.isOverlayOpen}\n          isSourceOverlayOpen={this.state.isSourceOverlayOpen}\n          toggleOverlay={this.toggleOverlay}\n          toggleBioOverlay={this.toggleBioOverlay}\n          toggleSourceOverlay={this.toggleSourceOverlay}\n          node={node}\n          social={social}\n          entity={entity}\n          sourceButtonText={sourceButtonText}\n          sourceIDs={sourceIDs}\n        />\n      </div>\n    );\n  }\n}\n\nPopover.propTypes = {\n  social: PropTypes.object.isRequired,\n  node: PropTypes.object.isRequired,\n  togglePopover: PropTypes.func.isRequired,\n  selectedShipID: PropTypes.string,\n  clearPopups: PropTypes.func.isRequired,\n};\n\nexport default Popover;\n","import * as d3 from \"d3\";\n\nimport React from \"react\";\n\nimport lodash from \"lodash\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport styles from \"../ForceGraph.module.css\";\n\nimport positionGroups from \"../../data/positionGroups.json\";\n\nfunction _null_function() {}\n\nfunction constrain(x, w, r = 20) {\n  return Math.max(3 * r, Math.min(w - r, x));\n}\n\nfunction handleMouseClick(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id) {\n      return;\n    }\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    THIS.state.signalClicked(id);\n    d3.event.stopPropagation();\n  }\n\n  return handle;\n}\n\nfunction handleMouseOver(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    node.raise();\n\n    let id = node.attr(\"id\");\n\n    if (!id) {\n      return;\n    }\n\n    //highlight the node\n    let items = svg.selectAll(`#${id}`);\n    items.classed(styles.highlight, true);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a target\n    items.each((d) => {\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, true);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, true);\n\n    //highlight the nodes with this node as a source\n    items.each((d) => {\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, true);\n    });\n\n    if (node.attr(\"source_id\")) {\n      svg.selectAll(`#${node.attr(\"source_id\")}`).classed(styles.highlight, true);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`).classed(styles.highlight, true);\n    }\n\n    THIS.state.signalMouseOver(id);\n  }\n\n  return handle;\n}\n\nfunction handleMouseOut(THIS) {\n  function handle() {\n    let svg = THIS._mainGroup;\n    if (!svg) {\n      return;\n    }\n\n    let node = d3.select(this);\n    let id = node.attr(\"id\");\n\n    let items = svg.selectAll(`#${id}`);\n\n    items.classed(styles.highlight, false);\n\n    //highlight the connection lines with this node as a source\n    items = svg.selectAll(`[source_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a target\n    items.each((d) => {\n      let target_id = d.target.id;\n      svg.selectAll(`#${target_id}`).classed(styles.highlight, false);\n    });\n\n    //highlight the connection lines with this node as a target\n    items = svg.selectAll(`[target_id=${id}]`);\n    items.classed(styles.highlight, false);\n\n    //highlight the nodes with this node as a source\n    items.each((d) => {\n      let source_id = d.source.id;\n      svg.selectAll(`#${source_id}`).classed(styles.highlight, false);\n    });\n\n    if (node.attr(\"source_id\")) {\n      svg.selectAll(`#${node.attr(\"source_id\")}`).classed(styles.highlight, false);\n\n      svg.selectAll(`#${node.attr(\"target_id\")}`).classed(styles.highlight, false);\n    }\n\n    THIS.state.signalMouseOut(id);\n  }\n\n  return handle;\n}\n\nfunction _resolve(item) {\n  if (!item) {\n    return null;\n  } else if (item.getID) {\n    return item.getID();\n  } else {\n    return item;\n  }\n}\n\nclass ForceGraphD3 extends React.Component {\n  constructor(props) {\n    super(props);\n    this._updateSimulation = this._updateSimulation.bind(this);\n    this._updateLink = this._updateLink.bind(this);\n    this._updateNodeText = this._updateNodeText.bind(this);\n    this._updateNode = this._updateNode.bind(this);\n    this.draw = this.draw.bind(this);\n    this.drawFromScratch = this.drawFromScratch.bind(this);\n    this.setPositionColors = this.setPositionColors.bind(this);\n    this.getPositionColor = this.getPositionColor.bind(this);\n    this.update = this.update.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n    // this.mouseoverNode = this.mouseoverNode.bind(this);\n\n    this.drag = this.drag.bind(this);\n    this.dragLink = this.dragLink.bind(this);\n    this.getWeight = this.getWeight.bind(this);\n\n    // generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {\n      width: null,\n      height: null,\n      social: null,\n      selected: null,\n      highlighted: null,\n      lastPhysics: \"fast\",\n      physicsEnabled: this.props.physicsEnabled,\n      signalClicked: _null_function,\n      signalMouseOut: _null_function,\n      signalMouseOver: _null_function,\n      indirectLinksVisible: false,\n      unconnectedNodesVisible: false,\n      colors: {},\n      groupTable: {},\n      uid: uid.slice(uid.length - 8),\n    };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n    this._is_drawn = false;\n\n    // Set parameters for the force simulation\n    this._target_decay = 0.1;\n    this._target_alpha = 0.3;\n\n    this._tooltips = [];\n    // this.updateGraph = this.updateGraph.bind(this);\n    // this.update = this.update.bind(this);\n\n    this.update(props);\n  }\n\n  getSelectedShipID() {\n    const filter = this.state.social.getFilter();\n\n    if (filter[\"project\"]) {\n      const projectCode = Object.keys(filter[\"project\"])[0];\n\n      return projectCode;\n    }\n  }\n\n  getNodeBio(id) {\n    return this.state.social.getBiographies().getByID(id);\n  }\n\n  getNodeConnections(id) {\n    return this.state.social.getConnections().find(id);\n  }\n\n  gotConnections(id) {\n    return this.state.social.getConnections().gotConnections(id);\n  }\n\n  updateGraph(social) {\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h) {\n      return;\n    }\n\n    let graph = null;\n\n    if (social) {\n      graph = social.getGraph();\n    }\n\n    // The social object will cache the 'getGraph' result, meaning\n    // that any change in this object signals that the graph needs\n    // to be redrawn\n    if (graph !== this.state.graph) {\n      //save the cached graph\n      this.state.graph = graph;\n      //   this.setState({ graph: graph });\n\n      // This view needs to clone its own copy of the graph, as\n      // D3 will update the graph object. We need to clone in case\n      // two ForceGraph.d3 views are viewing the same Social graph\n      graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in graph.edges) {\n        let edge = graph.edges[l];\n        for (let n in graph.nodes) {\n          let node = graph.nodes[n];\n          if (edge.source === node.id) {\n            edge.source = n;\n            edge.source_id = node.id;\n          } else if (edge.target === node.id) {\n            edge.target = n;\n            edge.target_id = node.id;\n          }\n        }\n      }\n\n      //index any old nodes\n      let old_nodes = [];\n      let old = {};\n\n      if (this._graph) {\n        old_nodes = this._graph.nodes;\n\n        for (let n in old_nodes) {\n          old[old_nodes[n].id] = n;\n        }\n      }\n\n      for (let n in graph.nodes) {\n        let node = graph.nodes[n];\n\n        let i = old[node.id];\n\n        if (i) {\n          let o = old_nodes[i];\n          node.x = o.x;\n          node.y = o.y;\n        } else if (this.gotConnections(node.id)) {\n          node.x = w * Math.random();\n          node.y = h * Math.random();\n        } else {\n          node.x = w - 0.15 * w;\n          node.y = h * Math.random();\n        }\n\n        // Brunel anchor point\n        if (node.fixed) {\n          if (i) {\n            node.fx = node.x;\n            node.fy = node.y;\n          } else if (node.fixedLocation) {\n            node.fx = w * node.fixedLocation[\"x\"] * this.randomShift();\n            node.fy = h * node.fixedLocation[\"y\"] * this.randomShift();\n          } else {\n            node.fx = w * 0.66;\n            node.fy = h * 0.5;\n          }\n        }\n      }\n\n      this._graph = graph;\n      this._graph_changed = true;\n    }\n  }\n\n  randomShift(min = 0.01, max = 0.15) {\n    // Adds a small bit of randomness to the placement of the fixed nodes so it\n    // doesn't look so fixed\n    return 1 - Math.random() * (max - min) + max;\n  }\n\n  update(props) {\n    let size_changed = false;\n\n    if (!this.state.physicsEnabled) {\n      this.state.physicsEnabled = this.props.physicsEnabled;\n    }\n\n    if (!this.state.unconnectedNodesVisible) {\n      this.state.unconnectedNodesVisible = this.props.unconnectedNodesVisible;\n    }\n\n    if (props.selectedShipID && props.selectedShipID !== this.state.lastShip) {\n      console.log(\"Changing to \", props.selectedShipID, \" in force graph itself\");\n      this.state.lastShip = props.selectedShipID;\n      this._graph_changed = true;\n    }\n\n    if (props.indirectLinksVisible !== this.state.indirectLinksVisible) {\n      this.state.indirectLinksVisible = props.indirectLinksVisible;\n      this._graph_changed = true;\n    }\n\n    let hasWidth = Object.prototype.hasOwnProperty.call(props, \"width\");\n\n    if (hasWidth) {\n      if (this.state.width !== props.width) {\n        this.state.width = props.width;\n        // this.setState({ width: props.width });\n        size_changed = true;\n      }\n    }\n\n    let hasHeight = Object.prototype.hasOwnProperty.call(props, \"height\");\n\n    if (hasHeight) {\n      if (this.state.height !== props.height) {\n        this.state.height = props.height;\n        // this.setState({ height: props.height });\n        size_changed = true;\n      }\n    }\n\n    if (size_changed) {\n      this._size_changed = true;\n    }\n\n    let hasSignalClicked = Object.prototype.hasOwnProperty.call(props, \"signalClicked\");\n\n    if (hasSignalClicked) {\n      if (this.state.signalClicked) {\n        this.state.signalClicked = props.signalClicked;\n        // this.setState({ signalClicked: props.signalClicked });\n      } else {\n        this.state.signalClicked = _null_function;\n        // this.setState({ signalClicked: _null_function });\n      }\n    }\n\n    let hasSignalMouseOut = Object.prototype.hasOwnProperty.call(props, \"signalMouseOut\");\n\n    if (hasSignalMouseOut) {\n      if (this.state.signalMouseOut) {\n        this.state.signalMouseOut = props.signalMouseOut;\n        // this.setState({ signalMouseOut: props.signalMouseOut });\n      } else {\n        this.state.signalMouseOut = _null_function;\n        // this.setState({ signalMouseOut: _null_function });\n      }\n    }\n\n    let hasSignalMouseOver = Object.prototype.hasOwnProperty.call(props, \"signalMouseOver\");\n\n    if (hasSignalMouseOver) {\n      if (this.state.signalMouseOver) {\n        this.state.signalMouseOver = props.signalMouseOver;\n        // this.setState({ signalMouseOver: props.signalMouseOver });\n      } else {\n        this.state.signalMouseOver = _null_function;\n        // this.setState({ signalMouseOver: _null_function });\n      }\n    }\n\n    let hasSocial = Object.prototype.hasOwnProperty.call(props, \"social\");\n\n    if (hasSocial) {\n      this.updateGraph(props.social);\n    }\n\n    // We can setup the colours object\n    this.setPositionColors();\n\n    let hasSelected = Object.prototype.hasOwnProperty.call(props, \"selected\");\n\n    if (hasSelected) {\n      this.state.selected = _resolve(props.selected);\n      //   this.setState({ selected: _resolve(props.selected) });\n    }\n\n    let hasHighlighted = Object.prototype.hasOwnProperty.call(props, \"highlighted\");\n\n    if (hasHighlighted) {\n      this.state.highlighted = _resolve(props.highlighted);\n      //   this.setState({ highlighted: _resolve(props.highlighted) });\n    }\n  }\n\n  className() {\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  getPositionColor(entity) {\n    // This takes an entity (a person or a business) and finds the\n    // colour that's given in the positions_groups.json file\n    const positions = entity[\"positions\"];\n    const group = entity[\"group\"];\n\n    if (group === \"anchor\") {\n      return positionGroups[\"anchor\"][\"color\"];\n    }\n\n    // If we get an undefined position return white\n    if (!positions) {\n      const entity_id = entity[\"id\"].toLowerCase();\n\n      if (entity_id.startsWith(\"b\")) {\n        return positionGroups[\"business\"][\"color\"];\n      } else {\n        console.error(\"No colour available for this entity : \", entity);\n        return \"#FFFFFF\";\n      }\n    }\n\n    const positionCode = this.getPositionCode(positions, group);\n\n    return this.state.colors[positionCode];\n  }\n\n  getPositionCode(positions, group) {\n    // Split string by colon, for now just use the first value\n    if (group === \"anchor\") {\n      console.error(\"We got an anchor here somehow\", positions, group);\n      return \"unkown\";\n    }\n\n    let positionCode;\n    // Split the string and try both\n    const splitGroup = group.split(\":\");\n\n    try {\n      // As some of the positions objects don't have a value for both\n      // projects (called groups here) we have to check both\n      try {\n        positionCode = positions[splitGroup[0]][0];\n      } catch (error) {\n        positionCode = positions[splitGroup[1]][0];\n      }\n    } catch (error) {\n      console.error(\"Error with position \", positions, \" with group : \", group, \"splitGroup : \", splitGroup, error);\n      positionCode = \"unknown\";\n    }\n\n    return positionCode.toLowerCase();\n  }\n\n  setPositionColors() {\n    // Read all the positions for this graph\n    const namedPositions = this.state.social.getPositions().items();\n\n    let colorTable = {};\n    let groupTable = {};\n\n    // TODO - a lot of this could be made easier by just assigning fixed UIDs to\n    // positions, could make a small object that did that and a notebook to output\n    // a JSON that's read in here for groups etc?\n\n    // Read the positions and colours from a JSON file that can be easily updated\n    for (let [position, uid] of Object.entries(namedPositions)) {\n      uid = uid.toLowerCase();\n      // Process these to remove whitespace and non letter/number characters so we have less likelihood of errors\n      let trimPosition = position\n        .replace(/\\s/g, \"\")\n        .toLowerCase()\n        .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n      // .replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\");\n\n      // Here positionGroups is the import JSON object containing\n      // which positions are in which group and the colour assigned to them\n      for (let [group, members] of Object.entries(positionGroups)) {\n        if (members[\"members\"].includes(trimPosition)) {\n          colorTable[uid] = members[\"color\"];\n          groupTable[uid] = group;\n          break;\n        } else {\n          // Assign bright blue to any we don't recognize, but this\n          // shouldn't (hopefully) happen if the JSON is correct\n          colorTable[uid] = \"blue\";\n        }\n      }\n    }\n\n    // Set the colour for the anchor\n    colorTable[\"anchor\"] = positionGroups[\"anchor\"][\"color\"];\n\n    this.state.colors = colorTable;\n    this.state.groupTable = groupTable;\n  }\n\n  getGroupForce(entity) {\n    if (!entity.positions) {\n      const entity_id = entity[\"id\"].toLowerCase();\n\n      // Need a better way of handling businesses\n      if (entity_id.startsWith(\"b\")) {\n        return -0.11;\n      } else {\n        console.error(\"Undefined positions for entity \", entity);\n        return 0;\n      }\n    }\n\n    if (!this.gotConnections(entity.id)) {\n      return 0;\n    }\n\n    const leftForce = [\"engineering\"];\n    const rightForce = [\"commercial\"];\n    const noForce = [\"other\", \"anchor\", \"business\", \"unknown\"];\n\n    // Get the position codes for this entity\n    const positionCode = this.getPositionCode(entity.positions, entity.group);\n    // The groupTable tells us which group this entity belongs to and so determines its force\n    const positionGroup = this.state.groupTable[positionCode];\n\n    // TODO - clunky, fix\n    if (leftForce.includes(positionGroup)) {\n      return -0.17;\n    } else if (rightForce.includes(positionGroup)) {\n      return 0.1;\n    } else if (noForce.includes(positionGroup)) {\n      return 0.1;\n    }\n\n    return 0;\n  }\n\n  drag() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        // simulation.alphaTarget(this._target_alpha).velocityDecay(this._target_decay).restart();\n        // simulation.restart();\n        // simulation.alpha(1).alphaTarget(0.5).alphaMin(0.2).alphaDecay(0.001).restart();\n\n        d.fx = d.x;\n        d.fy = d.y;\n      })\n      .on(\"drag\", (d) => {\n        if (!this._is_running) simulation.restart();\n\n        let w = this.state.width;\n        let h = this.state.height;\n\n        d.fx = constrain(d3.event.x, w, d.r);\n        d.fy = constrain(d3.event.y, h, d.r);\n      })\n      .on(\"end\", (d) => {\n        // simulation.alphaTarget(0).restart();\n\n        if (!d.fixed) {\n          d.fx = null;\n          d.fy = null;\n        }\n      });\n  }\n\n  dragLink() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        // simulation.alphaTarget(0.2).alphaDecay(0.001).restart();\n        // simulation.restart();\n\n        //find the two nodes connected to this edge\n        let source = this._graph.nodes[d.source.index];\n        let target = this._graph.nodes[d.target.index];\n\n        //fix those nodes in place\n        source.fx = source.x;\n        source.fy = source.y;\n\n        target.fx = target.x;\n        target.fy = target.y;\n      })\n      .on(\"drag\", (d) => {\n        if (!this._is_running) simulation.restart();\n\n        //find the two nodes connected to this edge\n        let source = this._graph.nodes[d.source.index];\n        let target = this._graph.nodes[d.target.index];\n\n        //moves those nodes with the event - move the center point of the\n        //line connecting these two nodes...\n        let dx = 0.5 * (target.x - source.x);\n        let dy = 0.5 * (target.y - source.y);\n\n        source.fx = constrain(d3.event.x - dx, this.state.width, source.r);\n        source.fy = constrain(d3.event.y - dy, this.state.height, source.r);\n\n        target.fx = constrain(d3.event.x + dx, this.state.width, target.r);\n        target.fy = constrain(d3.event.y + dy, this.state.height, target.r);\n      })\n      .on(\"end\", (d) => {\n        // simulation.alphaTarget(0).restart();\n\n        //find the two nodes connected to this edge\n        let source = this._graph.nodes[d.source.index];\n        let target = this._graph.nodes[d.target.index];\n\n        if (!source.fixed) {\n          source.fx = null;\n          source.fy = null;\n        }\n\n        if (!target.fixed) {\n          target.fx = null;\n          target.fy = null;\n        }\n      });\n  }\n\n  getWeight(item) {\n    const shipID = this.getSelectedShipID();\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    let weight = sizeScale * item[\"weight\"][shipID];\n\n    if (!weight) weight = 2;\n\n    return weight;\n  }\n\n  _updateNode(data) {\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"circle\").attr(\"class\", `node ${styles.node}`),\n        (update) => update.attr(\"class\", `node ${styles.node}`)\n      )\n      // Here size is the weight given to that entity\n      .attr(\"r\", (d) => {\n        // If no project selected keep previous weight\n        // Otherwise update using the selected project code\n        return this.getWeight(d);\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"fill\", (d) => {\n        return this.getPositionColor(d);\n      })\n      .on(\"click\", (d) => this.props.emitPopProps(d))\n      //   .on(\"mouseover\", (d) => this.mouseoverNode(d))\n      //   .on(\"mouseout\", this.mouseoutNode)\n      .call(this.drag());\n\n    return node;\n  }\n\n  _updateNodeText(data) {\n    let text = this._mainGroup.select(\".node_text-group\").selectAll(\".node_text\");\n\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    text = text\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"text\").attr(\"class\", `node_text ${styles.node_text}`),\n        (update) => update.attr(\"class\", `node_text ${styles.node_text}`)\n      )\n      .text((d) => d.label)\n      .style(\"font-size\", (d) => {\n        return Math.max(1.2, 2 * Math.log10(this.getWeight(d))) + \"vh\";\n      })\n      .attr(\"dx\", (d) => {\n        return this.getWeight(d) + \"px\";\n      })\n      .attr(\"dy\", (d) => {\n        return -1 * (3 + sizeScale * this.getWeight(d)) + \"px\";\n      })\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .on(\"click\", (d) => this.props.emitPopProps(d))\n      //   .on(\"mouseover\", handleMouseOver(this))\n      //   .on(\"mouseout\", handleMouseOut(this))\n      .call(this.drag());\n\n    return text;\n  }\n\n  _updateLink(data) {\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    // Add prop here\n    let indirectStyle = this.state.indirectLinksVisible ? styles.linkIndirect : styles.linkInvisible;\n\n    const weightCutoff = 4;\n\n    link = link\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"path\").attr(\"class\", `link ${styles.link}`),\n        (update) => update.attr(\"class\", `link ${styles.link}`)\n      )\n      .attr(\"class\", (d) => {\n        // Here we're using the weight of the edges between\n        // nodes to  change the properties of the line drawn\n        if (d.type === \"direct\") {\n          if (d.value > weightCutoff) {\n            return `link ${styles.link}`;\n          } else {\n            return `link ${styles.linkWeak}`;\n          }\n        } else {\n          return `link ${indirectStyle}`;\n        }\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"source_id\", (d) => {\n        return d.source_id;\n      })\n      .attr(\"target_id\", (d) => {\n        return d.target_id;\n      })\n      //   .on(\"click\", handleMouseClick(this))\n      //   .on(\"mouseover\", handleMouseOver(this))\n      //   .on(\"mouseout\", handleMouseOut(this))\n      .call(this.dragLink());\n\n    return link;\n  }\n\n  _updateSimulation() {\n    if (this._simulation) {\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let simulation = d3\n      .forceSimulation(this._graph.nodes)\n      .alpha(0.4)\n      .alphaTarget(0)\n      .alphaDecay(0.05)\n      //   .velocityDecay(0.8)\n      .force(\"charge\", d3.forceManyBody().strength(-5).distanceMin(4).distanceMax(25))\n      .force(\n        \"link\",\n        d3\n          .forceLink()\n          .links(this._graph.edges)\n          //   .strength((d) => {\n          //     return 0.1 * (1 + d.value);\n          //   })\n          .distance((d) => {\n            return 75 * (1 + d.value);\n          })\n          .iterations(5)\n      )\n      .force(\n        \"collision\",\n        d3\n          .forceCollide()\n          .radius((d) => {\n            return 3 * (1 + d.size);\n          })\n          .strength(1.0)\n          .iterations(5)\n      )\n      // This forces the groupings given in position_groups.json left/right\n      .force(\n        \"X\",\n        d3.forceX().strength((d) => {\n          return this.getGroupForce(d);\n        })\n      )\n      // This function with help from https://stackoverflow.com/a/13456081\n      .on(\"tick\", () => {\n        this._link.attr(\"d\", (d) => {\n          const curveFactor = 2;\n          const dx = d.target.x - d.source.x;\n          const dy = d.target.y - d.source.x;\n          const dr = curveFactor * Math.sqrt(dx * dx + dy * dy);\n\n          return \"M\" + d.source.x + \",\" + d.source.y + \"A\" + dr + \",\" + dr + \" 0 0,1 \" + d.target.x + \",\" + d.target.y;\n        });\n        this._node\n          .attr(\"cx\", (d) => {\n            return (d.x = constrain(d.x, w, d.r));\n          })\n          .attr(\"cy\", (d) => {\n            return (d.y = constrain(d.y, h, d.r));\n          });\n\n        this._label.attr(\"x\", (d) => d.x).attr(\"y\", (d) => d.y);\n      })\n      .on(\"end\", () => {\n        this.restartSimulation();\n      });\n\n    this._is_running = true;\n\n    // Save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  slowPhysics() {\n    if (this._simulation && this.state.physicsEnabled === true) {\n      this.state.physicsEnabled = false;\n      this._simulation.alpha(0.1).alphaTarget(0).alphaDecay(0.05).velocityDecay(0.8).restart();\n    }\n  }\n\n  fastPhysics() {\n    if (this._simulation && this.state.physicsEnabled === false) {\n      this.state.physicsEnabled = true;\n      this._simulation.alpha(1).alphaTarget(0.5).alphaMin(0.2).alphaDecay(0.001).restart();\n    }\n  }\n\n  restartSimulation() {\n    if (this._simulation) {\n      this._simulation.restart();\n      this._is_running = true;\n    }\n  }\n\n  stopSimulation() {\n    this._simulation.stop();\n    this._is_running = false;\n  }\n\n  isRunning() {\n    return this._is_running;\n  }\n\n  updateLinks(indirectLinksVisible) {\n    if (this._graph.edges) {\n      this.setState({ indirectLinksVisible: indirectLinksVisible });\n      this._updateLink(this._graph.edges);\n    }\n  }\n\n  drawFromScratch() {\n    console.log(\"DRAW FROM SCRATCH\");\n    let graph = this._graph;\n\n    if (!graph) {\n      if (this.state.social) {\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph) {\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container) {\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    console.log(`REDRAW ${width}x${height}`);\n\n    if (!width || !height) {\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container\n      .append(\"svg\")\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .attr(\"id\", \"svg-viz\")\n      .attr(\"align\", \"center\")\n      .on(\"click\", () => {\n        this.state.signalClicked(null);\n      });\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this._updateSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this._updateLink(graph.edges);\n    this._node = this._updateNode(graph.nodes);\n    this._label = this._updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw() {\n    if (!this._is_drawn) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    let update_simulation = false;\n\n    if (this._size_changed) {\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      this._size_changed = false;\n      update_simulation = true;\n      this._label = this._updateNodeText(this._graph.nodes);\n    }\n\n    if (this._graph_changed) {\n      this._node = this._updateNode(this._graph.nodes);\n      this._label = this._updateNodeText(this._graph.nodes);\n      this._link = this._updateLink(this._graph.edges);\n      this._graph_changed = false;\n      update_simulation = true;\n    }\n\n    if (update_simulation) {\n      this._updateSimulation();\n    }\n  }\n}\n\nexport default ForceGraphD3;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport Popover from \"./Popover\";\nimport ForceGraphD3 from \"./d3/ForceGraph.d3.js\";\n\nimport lodash from \"lodash\";\n\nclass ForceGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      popoversVisible: false,\n      popups: {},\n    };\n\n    // We want to add to the props so we need to clone the props\n    // that are passed in as that object is read-only\n    let tempProps = lodash.cloneDeep(props);\n\n    this.updateSize = this.updateSize.bind(this);\n    this.emitPopProps = this.emitPopProps.bind(this);\n    this.clearPopups = this.clearPopups.bind(this);\n\n    // TODO - look up better way of doing this\n    // Bring this into the class above it?\n    // This feels very clunky\n    tempProps[\"emitPopProps\"] = this.emitPopProps;\n    this.graph = new ForceGraphD3(tempProps);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  componentDidUpdate() {\n    this.graph.update(this.props);\n    this.graph.draw();\n  }\n\n  updateSize() {\n    if (this.container && this.graph) {\n      this.graph.update({\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      });\n      this.graph.draw();\n    }\n  }\n\n  // Used for multiple popups\n  updatePopupState(id, node) {\n    this.setState((prevState) => {\n      let popups = Object.assign({}, prevState.popups);\n      popups[id] = node;\n      return { popups: popups };\n    });\n  }\n\n  emitPopProps(node) {\n    // this.clearPopups();\n    this.setState({ popups: { id: node } });\n\n    // Keep code for multiple popups\n    // if (this.state.popups[id]) {\n    //   this.updatePopupState(id, false);\n    // } else {\n    //   this.updatePopupState(id, node);\n    // }\n  }\n\n  clearPopups() {\n    this.setState({ popups: {} });\n  }\n\n  render() {\n    let s = this.graph.className();\n\n    let popups = [];\n\n    for (let [id, node] of Object.entries(this.state.popups)) {\n      if (node !== false) {\n        let p = (\n          <Popover\n            key={id}\n            togglePopover={this.emitPopProps}\n            node={node}\n            social={this.props.social}\n            selectedShipID={this.props.selectedShipID}\n            clearPopups={this.clearPopups}\n          />\n        );\n        popups.push(p);\n      }\n    }\n\n    if (!this.props.physicsEnabled) {\n      this.graph.slowPhysics();\n    } else {\n      this.graph.fastPhysics();\n    }\n\n    return (\n      <div ref={(el) => (this.container = el)} style={{ width: \"100%\", height: \"100%\" }}>\n        <div id={s} className={s}>\n          {popups}\n        </div>\n      </div>\n    );\n  }\n}\n\nForceGraph.propTypes = {\n  social: PropTypes.object.isRequired,\n  selectedShipID: PropTypes.string,\n  indirectLinksVisible: PropTypes.bool.isRequired,\n  physicsEnabled: PropTypes.bool.isRequired,\n  unconnectedNodesVisible: PropTypes.bool.isRequired,\n};\n\nexport default ForceGraph;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport ForceGraph from \"./ForceGraph\";\n\nclass SocialGraph extends React.Component {\n  getGraph() {\n    const social = this.props.social;\n\n    if (social) {\n      return social.getGraph();\n    }\n    return null;\n  }\n\n  getNetwork() {\n    const social = this.props.social;\n\n    if (social) {\n      return social.getNetwork();\n    }\n    return null;\n  }\n\n  render() {\n    if (this.props.social) {\n      return (\n        <div style={{ width: \"100%\", height: \"100%\" }}>\n          <ForceGraph\n            social={this.props.social}\n            signalClicked={this.props.emitClicked}\n            highlighted={this.props.highlighted}\n            selected={this.props.selected}\n            wobble={this.props.wobble}\n            selectedShipID={this.props.selectedShipID}\n            indirectLinksVisible={this.props.indirectLinksVisible}\n            physicsEnabled={this.props.physicsEnabled}\n            unconnectedNodesVisible={this.props.unconnectedNodesVisible}\n          />\n        </div>\n      );\n    } else {\n      return <div>No data to display!!!</div>;\n    }\n  }\n}\n\nSocialGraph.propTypes = {\n  emitClicked: PropTypes.func.isRequired,\n  highlighted: PropTypes.func,\n  selected: PropTypes.func,\n  social: PropTypes.object.isRequired,\n  wobble: PropTypes.bool.isRequired,\n  indirectLinksVisible: PropTypes.bool.isRequired,\n  selectedShipID: PropTypes.string,\n  physicsEnabled: PropTypes.bool.isRequired,\n  unconnectedNodesVisible: PropTypes.bool.isRequired,\n};\n\nexport default SocialGraph;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from \"react-accessible-accordion\";\n\nimport styles from \"./Accordion.module.css\";\n\nfunction BAccordion(props) {\n  return (\n    <Accordion\n      className={styles.accordion}\n      preExpanded={props.preExpanded}\n      allowMultipleExpanded={props.allowMultipleExpanded}\n      allowZeroExpanded={props.allowZeroExpanded}\n    >\n      {props.children}\n    </Accordion>\n  );\n}\n\nBAccordion.propTypes = {\n  preExpanded: PropTypes.bool,\n  allowMultipleExpanded: PropTypes.bool,\n  allowZeroExpanded: PropTypes.bool,\n  children: PropTypes.string,\n};\n\nfunction BAccordionItem(props) {\n  return (\n    <AccordionItem className={styles.accordionItem} style={props.style} uuid={props.uuid}>\n      {props.children}\n    </AccordionItem>\n  );\n}\n\nBAccordionItem.propTypes = {\n  style: PropTypes.string,\n  uuid: PropTypes.string,\n  children: PropTypes.string,\n};\n\nfunction BAccordionTitle(props) {\n  return (\n    <AccordionItemHeading style={props.style}>\n      <AccordionItemButton className={styles.accordionButton}>{props.children}</AccordionItemButton>\n    </AccordionItemHeading>\n  );\n}\n\nBAccordionTitle.propTypes = {\n  style: PropTypes.string,\n  children: PropTypes.string,\n};\n\nfunction BAccordionPanel(props) {\n  return <AccordionItemPanel style={props.style}>{props.children}</AccordionItemPanel>;\n}\n\nBAccordionPanel.propTypes = {\n  style: PropTypes.string,\n  children: PropTypes.string,\n};\n\nexport {\n  BAccordion as Accordion,\n  BAccordionItem as AccordionItem,\n  BAccordionTitle as AccordionTitle,\n  BAccordionPanel as AccordionPanel,\n  BAccordion as default,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./DefaultButton.module.css\";\n\nfunction DefaultButton(props) {\n  return (\n    <button href=\"#\" className={styles.button} onClick={props.onClick} style={props.style}>\n      {props.children}\n    </button>\n  );\n}\n\nDefaultButton.propTypes = {\n  onClick: PropTypes.func,\n  style: PropTypes.object,\n  children: PropTypes.string,\n};\n\nexport default DefaultButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./CheckBox.module.css\";\n\nfunction CheckBox(props) {\n  return (\n    <label className={styles.checkBox} style={props.style}>\n      <input type=\"checkbox\" checked={props.checked} onChange={props.onChange} />\n      <span className={styles.checkMark} />\n    </label>\n  );\n}\n\nCheckBox.propTypes = {\n  style: PropTypes.string,\n  checked: PropTypes.bool,\n  onChange: PropTypes.func,\n};\n\nexport default CheckBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./ResponsiveList.module.css\";\n\nfunction ResponsiveList(props) {\n  return <div className={styles.list}>{props.children}</div>;\n}\n\nResponsiveList.propTypes = {\n  children: PropTypes.elementType.isRequired,\n};\n\nfunction ResponsiveListItem(props) {\n  return (\n    <div className={styles.item} key={props.key}>\n      {props.children}\n    </div>\n  );\n}\n\nResponsiveListItem.propTypes = {\n  key: PropTypes.string.isRequired,\n  children: PropTypes.elementType.isRequired,\n};\n\nexport { ResponsiveListItem, ResponsiveList, ResponsiveList as default };\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./GroupsList.module.css\";\n\nfunction null_function() {}\n\nfunction GroupsList({\n  groups,\n  title = null,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n}) {\n  if (!groups) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(groups).forEach((key) => {\n    let items = [];\n\n    for (let index in groups[key]) {\n      let group = social.get(groups[key][index]);\n      let is_filtered = social.isFiltered(group);\n\n      items.push(\n        <ResponsiveListItem key={group.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(group);\n            }}\n            style={{ width: \"70%\" }}\n          >\n            {group.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(group);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </ResponsiveListItem>\n      );\n    }\n\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton\n            style={{ width: \"75%\" }}\n            onClick={() => {\n              emitSelected(project);\n            }}\n          >\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(project);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </div>\n        <div className={styles.projectBody}>\n          <ResponsiveList style={{ minWidth: \"100%\" }}>{items}</ResponsiveList>\n        </div>\n      </div>\n    );\n  });\n\n  if (title) {\n    return (\n      <div>\n        <div className={styles.title}>{title}</div>\n        {projects}\n      </div>\n    );\n  } else {\n    return projects;\n  }\n}\n\nexport default GroupsList;\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./ConnectionList.module.css\";\n\nfunction null_function() {}\n\nfunction ConnectionList({\n  connections,\n  title,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n}) {\n  if (!connections || connections.length === 0) {\n    return null;\n  }\n\n  const listitems = connections.map((item) => {\n    let i = item;\n    let name = item.getName();\n\n    let is_filtered = false;\n\n    if (social) {\n      is_filtered = social.isFiltered(item);\n    }\n\n    return (\n      <ResponsiveListItem key={name}>\n        <DefaultButton\n          onClick={() => {\n            emitSelected(i);\n          }}\n          style={{ width: \"70%\" }}\n        >\n          {name}\n        </DefaultButton>\n        <CheckBox\n          onChange={() => {\n            emitToggleFilter(i);\n          }}\n          checked={is_filtered}\n          style={{ width: \"20%\" }}\n        />\n      </ResponsiveListItem>\n    );\n  });\n\n  if (title) {\n    return (\n      <div className={styles.connections}>\n        <div className={styles.title}>{title}</div>\n        <ResponsiveList>{listitems}</ResponsiveList>\n      </div>\n    );\n  } else {\n    return (\n      <div className={styles.connections}>\n        <ResponsiveList>{listitems}</ResponsiveList>\n      </div>\n    );\n  }\n}\n\nexport default ConnectionList;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport DefaultButton from \"./DefaultButton\";\n\nfunction _null_function() {}\n\nfunction DateRangeButton(props) {\n  let d = props.value;\n\n  if (!d) {\n    return null;\n  }\n\n  if (!(d._isARoughDateObject || d._isADateRangeObject)) {\n    return null;\n  }\n\n  if (d.isNull()) {\n    return null;\n  }\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected) {\n    emitSelected = _null_function;\n  }\n\n  let s = d.toSimpleString();\n\n  if (d._isARoughDateObject) {\n    d = d.toDateRange();\n  }\n\n  return (\n    <DefaultButton\n      onClick={() => {\n        emitSelected(d);\n      }}\n      style={props.style}\n    >\n      {s}\n    </DefaultButton>\n  );\n}\n\nDateRangeButton.propTypes = {\n  value: PropTypes.func,\n  emitSelected: PropTypes.func,\n  style: PropTypes.string,\n};\n\nexport default DateRangeButton;\n","class KeyError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, KeyError);\n  }\n}\n\nclass ValueError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, ValueError);\n  }\n}\n\nclass DuplicateError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, DuplicateError);\n  }\n}\n\nclass MissingError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, MissingError);\n  }\n}\n\nexport { KeyError, ValueError, DuplicateError, MissingError };\n","import Dry from \"json-dry\";\nimport moment from \"moment\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction _toDate(val, def = null) {\n  if (val) {\n    if (val._isAMomentObject) {\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()) {\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def) {\n      return null;\n    } else {\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() < d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() > d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2) {\n  if (!s1) {\n    return s2;\n  } else if (!s2) {\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state) {\n    if (!state || state === \"null\" || state === null) {\n      this.state = { start: null };\n      return;\n    } else if (state._isARoughDateObject) {\n      this.state = { ...state.state };\n      return;\n    } else if (state._isADateRangeObject) {\n      this.state = state.toDate();\n      return;\n    } else if (state._isAMomentObject) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (state.toISOString) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n      this.state = { start: state.value };\n      return;\n    } else if (typeof state === \"string\") {\n      this.state = { start: _toDate(state), raw: state };\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start) {\n      this.state = { start: null };\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()) {\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item) {\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2) {\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2) {\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2) {\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2) {\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other) {\n    if (item._isARoughDateObject && other._isARoughDateObject) {\n      return (\n        item.getEarliestString() === other.getEarliestString() && item.getLatestString() === other.getLatestString()\n      );\n    } else {\n      return false;\n    }\n  }\n\n  static lt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2) {\n    return !RoughDate.eq(d1, d2);\n  }\n\n  add(delta) {\n    if (this.state.start) {\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end) {\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta) {\n    this.add(-delta);\n  }\n\n  isNull() {\n    if (this.state.start) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isFuzzy() {\n    if (this.state.end) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isExact() {\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString() {\n    if (this.isNull()) {\n      return \"Date:unknown\";\n    } else if (this.isFuzzy()) {\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString() {\n    if (this.isNull()) {\n      return \"unknown\";\n    } else if (this.isFuzzy()) {\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 && s.getDate() === 1 && e.getDate() === 31) {\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()) {\n          return s.getFullYear();\n        } else {\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      } else {\n        return `${s.getDate()}/${s.getMonth() + 1}/${s.getFullYear()}-${e.getDate()}/${\n          e.getMonth() + 1\n        }/${e.getFullYear()}`;\n      }\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest() {\n    let state = { start: this.state.start };\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest() {\n    if (this.state.end) {\n      let state = { start: this.state.end };\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    } else {\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestDate() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEarliestString() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestString() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  toRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isExact()) {\n      return new DateRange({ both: this.state.start });\n    } else {\n      return new DateRange({ start: this.state.start, end: this.state.end });\n    }\n  }\n\n  toDateRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isFuzzy()) {\n      return new DateRange({ start: this.getEarliest(), end: this.getLatest() });\n    } else {\n      return new DateRange({ both: this.getEarliest() });\n    }\n  }\n\n  toDate() {\n    let m = this.toMoment();\n\n    if (m) {\n      try {\n        return m.toDate();\n      } catch (error) {\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n//   toUnixTimestamp() {\n//     return parseInt((this.toDate().getTime() / 1000).toFixed(0));\n//   }\n\n  toMoment() {\n    if (this.isNull()) {\n      return null;\n    } else if (this.isExact()) {\n      return this.state.start;\n    } else {\n      throw new ValueError(`Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw() {\n    return this.state.raw;\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    if (this.state.end) {\n      return this.state.end;\n    } else {\n      return this.state.start;\n    }\n  }\n\n  merge(other) {\n    let state = {\n      start: _get_min(this.getStart(), other.getStart()),\n      end: _get_max(this.getEnd(), other.getEnd()),\n      raw: _merge_raw(this.getRaw(), other.getRaw()),\n    };\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function (value) {\n  return new RoughDate(value);\n};\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\nimport { ValueError } from \"./Errors\";\n\nfunction _clean(val) {\n  if (!val || val._isADateRangeObject) {\n    return val;\n  } else if (val._isARoughDateObject) {\n    return val.toDateRange();\n  } else if (\n    Object.prototype.hasOwnProperty.call(val, \"start\") ||\n    Object.prototype.hasOwnProperty.call(val, \"end\") ||\n    Object.prototype.hasOwnProperty.call(val, \"both\") ||\n    Object.prototype.hasOwnProperty.call(val, \"value\")\n  ) {\n    return new DateRange(val);\n  } else {\n    return new DateRange({ both: new RoughDate(val) });\n  }\n}\n\nclass DateRange {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n    };\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return `DateRange(${this.getStartString()})`;\n      } else {\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    } else {\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return this.getStart().toSimpleString();\n      } else {\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    } else if (this.hasStart()) {\n      return `${this.getStart().toSimpleString()}<=>future`;\n    } else if (this.hasEnd()) {\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    } else {\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item) {\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other) {\n    if (item === other) {\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()) {\n      if (!RoughDate.eq(item.getStart(), other.getStart())) {\n        return false;\n      }\n    } else if (item.hasStart() || other.hasStart()) {\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()) {\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())) {\n        return false;\n      }\n    } else if (item.hasEnd() || other.hasEnd()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates) {\n    if (!dates) {\n      return null;\n    } else if (dates._isARoughDateObject || dates._isARoughDateObject) {\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0) {\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1) {\n      for (let i = 1; i < dates.length; ++i) {\n        if (!dates[i].isNull()) {\n          if (date.isNull()) {\n            date = dates[i];\n          } else {\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()) {\n      return null;\n    } else {\n      return date;\n    }\n  }\n\n  merge(other) {\n    if (!other) {\n      return this;\n    } else if (other._isARoughDateObject) {\n      other = other.toDateRange();\n    }\n\n    return new DateRange({\n      start: RoughDate.min(this.getEarliestStart(), other.getEarliestStart()),\n      end: RoughDate.max(this.getLatestEnd(), other.getLatestEnd()),\n    });\n  }\n\n  hasBounds() {\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd() {\n    if (this.state.end) {\n      return !this.state.end.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  hasStart() {\n    if (this.state.start) {\n      return !this.state.start.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  isInstant() {\n    return this.hasStart() && this.state.start === this.state.end;\n  }\n\n  // Returns a DateRange object\n  toDate() {\n    if (this.hasStart()) {\n      if (this.hasEnd()) {\n        return this.getStart().merge(this.getEnd());\n      } else {\n        return this.getStart();\n      }\n    } else {\n      return this.getEnd();\n    }\n  }\n\n  contains(date) {\n    date = _clean(date);\n\n    if (!date) {\n      return true;\n    } else if (date._isADateRangeObject) {\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start) {\n        if (RoughDate.gt(my_start, other_start)) {\n          return false;\n        }\n      } else if (other_start) {\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end) {\n        if (RoughDate.lt(my_end, other_end)) {\n          return false;\n        }\n      } else if (my_end) {\n        return false;\n      }\n\n      return true;\n    } else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other) {\n    other = _clean(other);\n\n    if (!other) {\n      return this;\n    }\n\n    if (!other.hasBounds()) {\n      return this;\n    } else if (!this.hasBounds()) {\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)) {\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)) {\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  union(other) {\n    other = _clean(other);\n    if (!other) {\n      return this;\n    } else if (!other._isADateRangeObject) {\n      other = new DateRange({ value: other });\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  getDelta() {\n    if (this.hasStart() && this.hasEnd()) {\n      try {\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      } catch (error) {\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  zoomIn(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() / (2.0 + scale);\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() * scale;\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = -this.getDelta(); //milliseconds\n      } else {\n        delta = -3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = this.getDelta(); //milliseconds\n      } else {\n        delta = 3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    return this.state.end;\n  }\n\n  getEarliestStart() {\n    if (this.hasStart()) {\n      return this.getStart().getEarliest();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestEnd() {\n    if (this.hasEnd()) {\n      return this.getEnd().getLatest();\n    } else {\n      return null;\n    }\n  }\n\n  getStartDate() {\n    let e = this.getEarliestStart();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEndDate() {\n    let e = this.getLatestEnd();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getStartString() {\n    if (this.state.start) {\n      return this.state.start.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  getEndString() {\n    if (this.state.end) {\n      return this.state.end.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      if (state === \"null\" || state === null) {\n        this.state = { start: null, end: null };\n        return;\n      } else if (state._isADateRangeObject) {\n        this.state = { ...state.state };\n      } else if (state._isARoughDateObject) {\n        this.state = { start: state, end: state };\n      } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n        this.setState(state.value);\n        return;\n      } else if (Object.prototype.hasOwnProperty.call(state, \"both\")) {\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      } else if (typeof state === \"string\") {\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      } else {\n        let start = null;\n\n        if (state.start) {\n          start = new RoughDate(state.start);\n\n          if (start.isNull()) {\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end) {\n          end = new RoughDate(state.end);\n\n          if (end.isNull()) {\n            end = null;\n          }\n        }\n\n        if (start && end) {\n          if (RoughDate.gt(start, end)) {\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)) {\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    } else {\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry() {\n    return this.state;\n  }\n}\n\nDateRange.unDry = function (value) {\n  return new DateRange(value);\n};\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport DateRangeButton from \"./DateRangeButton\";\nimport DateRange from \"../model/DateRange\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\n\nimport styles from \"./SourceList.module.css\";\n\nfunction _null_function() {}\n\nfunction SourceList(props) {\n  let social = props.social;\n  let sources = props.sources;\n  let emitSelected = props.emitSelected;\n  let title = props.title;\n\n  if (!social || !sources) {\n    return null;\n  }\n\n  if (!emitSelected) {\n    emitSelected = _null_function;\n  }\n\n  let output = Object.keys(sources).map((key) => {\n    let source = social.get(key);\n    let daterange = DateRange.mergeAll(sources[key]);\n\n    if (daterange) {\n      return (\n        <ResponsiveListItem key={source.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(source);\n            }}\n            style={{ width: \"50%\" }}\n          >\n            {source.getName()}\n          </DefaultButton>\n          <DateRangeButton style={{ width: \"40%\" }} value={daterange} emitSelected={emitSelected} />\n        </ResponsiveListItem>\n      );\n    } else {\n      return (\n        <ResponsiveListItem key={source.getName()}>\n          <DefaultButton\n            onClick={() => {\n              emitSelected(source);\n            }}\n          >\n            {source.getName()}\n          </DefaultButton>\n        </ResponsiveListItem>\n      );\n    }\n  });\n\n  if (!output || output.length === 0) {\n    return null;\n  }\n\n  if (title) {\n    return (\n      <div className={styles.container}>\n        <div className={styles.title}>{title}</div>\n        <div className={styles.body}>\n          <ResponsiveList>{output}</ResponsiveList>\n        </div>\n      </div>\n    );\n  } else {\n    return <ResponsiveList>{output}</ResponsiveList>;\n  }\n}\n\nSourceList.propTypes = {\n  emitSelected: PropTypes.func.isRequired,\n  social: PropTypes.func.isRequired,\n  sources: PropTypes.object.isRequired,\n  title: PropTypes.string,\n};\n\nexport default SourceList;\n","import React from \"react\";\n\nimport DefaultButton from \"./DefaultButton\";\nimport CheckBox from \"./CheckBox\";\n\nimport styles from \"./WeightsList.module.css\";\n\nfunction null_function() {}\n\nfunction WeightsList({\n  weights,\n  title = null,\n  emitSelected = null_function,\n  emitToggleFilter = null_function,\n  social = null,\n  type = null,\n}) {\n  if (!weights) {\n    return null;\n  }\n\n  let projects = [];\n\n  Object.keys(weights).forEach((key) => {\n    let project = social.get(key);\n    let is_filtered = social.isFiltered(project);\n\n    let weight = weights[key];\n\n    projects.push(\n      <div className={styles.project} key={project.getName()}>\n        <div className={styles.projectHeader}>\n          <DefaultButton\n            style={{ width: \"75%\" }}\n            onClick={() => {\n              emitSelected(project);\n            }}\n          >\n            {project.getName()}\n          </DefaultButton>\n          <CheckBox\n            onChange={() => {\n              emitToggleFilter(project);\n            }}\n            style={{ width: \"20%\" }}\n            checked={is_filtered}\n          />\n        </div>\n        <div className={styles.projectBody}>\n          Weight = {weight}, Type = {type}\n        </div>\n      </div>\n    );\n  });\n\n  if (title) {\n    return (\n      <div>\n        <div className={styles.title}>{title}</div>\n        {projects}\n      </div>\n    );\n  } else {\n    return projects;\n  }\n}\n\nexport default WeightsList;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport fixedNodes from \"../data/fixedNodes.json\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props) {\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n      weight: 1,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item) {\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window) {\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\") {\n        throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive() {\n    return this.state.alive;\n  }\n\n  getFirstName() {\n    if (this.state.firstnames) {\n      return this.state.firstnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getTitle() {\n    if (this.state.titles) {\n      return this.state.titles.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSurname() {\n    if (this.state.surnames) {\n      return this.state.surnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSuffix() {\n    if (this.state.suffixes) {\n      return this.state.suffixes.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getName() {\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part) {\n      parts.push(part);\n    }\n\n    if (parts.length > 0) {\n      return parts.join(\" \");\n    } else {\n      return \"null\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getPositions() {\n    if (!this.state.positions) {\n      console.error(\"No positions for \", this.getName());\n    }\n    return this.state.positions;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getBorn() {\n    if (this.state.alive) {\n      return this.state.alive.getStart();\n    } else {\n      return null;\n    }\n  }\n\n  getDied() {\n    if (this.state.alive) {\n      return this.state.alive.getEnd();\n    } else {\n      return null;\n    }\n  }\n\n  getTimeLine() {\n    const alive = this.getAlive();\n\n    if (!alive) {\n      return null;\n    } else {\n      return {\n        start: alive.getStart(),\n        end: alive.getEnd(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    }\n  }\n\n  getWeight() {\n    return this.state.weight;\n  }\n\n  getProjectWeight(projectKey) {\n    const weight = this.state.weight[projectKey];\n\n    if (!weight) {\n      console.error(\"No weight for \" + this.getName() + this.getID() + \" for project with key \" + projectKey);\n      return 1;\n    }\n\n    return weight;\n  }\n\n  getNode(isAnchor = false) {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      fixed: false,\n      shape: \"circle\",\n    };\n\n    const weight = this.getWeight();\n    const name = this.getName();\n\n    node[\"weight\"] = weight;\n    node[\"type\"] = \"person\";\n\n    // Position will be used to set the colour used\n    // for the node representing this person\n    node[\"positions\"] = this.getPositions();\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0) {\n      node[\"group\"] = keys.sort().join(\":\");\n    } else {\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (isAnchor) {\n      node[\"shape\"] = \"rect\";\n      node[\"fixed\"] = true;\n      node[\"group\"] = \"anchor\";\n    }\n\n    if (name in fixedNodes) {\n      node[\"fixed\"] = true;\n      node[\"fixedLocation\"] = fixedNodes[name];\n    }\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPerson.unDry = function (value) {\n  return new Person(value);\n};\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Person from \"./Person\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_person_uid() {\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length - 7);\n}\n\nclass People {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Person || item._isAPersonObject;\n  }\n\n  add(person) {\n    if (!this.canAdd(person)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(person.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    } else {\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Person || name._isAPersonObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Person matches '${name}. Available People are '${keys}'`);\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        for (let i = 0; i < funcs.length; ++i) {\n          person = funcs[i](person);\n          if (!person) {\n            break;\n          }\n        }\n\n        if (person) {\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (person) {\n        let timeline = person.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    if (anchor.getID) {\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        let node = null;\n        if (key === anchor) {\n          node = person.getNode({ is_anchor: true });\n        } else {\n          node = person.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let person = this.state.registry[id];\n\n    if (!person) {\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPeople.unDry = function (value) {\n  let people = new People();\n  people.state = value;\n  people._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n};\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport fixedNodes from \"../data/fixedNodes.json\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n      weight: 1,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item) {\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n\n    if (affiliations !== this.state.affiliations) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n\n    if (affiliations !== this.state.affiliations) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  getWeight() {\n    return this.state.weight;\n  }\n\n  toString() {\n    return `Business(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getNode(is_anchor = false) {\n    let node = { id: this.getID(), label: this.getName(), title: this.getName(), shape: \"circle\" };\n\n    const weight = this.getWeight();\n\n    node[\"size\"] = 0.5 * weight;\n    node[\"weight\"] = weight;\n    node[\"type\"] = \"business\";\n\n    let keys = Object.keys(this.state.projects);\n\n    if (keys.length > 0) {\n      node[\"group\"] = keys.sort().join(\":\");\n    } else {\n      node[\"group\"] = \"unknown\";\n    }\n\n    if (is_anchor) {\n      node[\"shape\"] = \"rect\";\n      node[\"physics\"] = false;\n      node[\"group\"] = \"anchor\";\n      node[\"size\"] = 20.0;\n    }\n\n    if (this.getName() in fixedNodes) {\n      node[\"fixed\"] = true;\n    }\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusiness.unDry = function (value) {\n  return new Business(value);\n};\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Business from \"./Business\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_business_uid() {\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length - 7);\n}\n\nclass Businesses {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Business || item._isABusinessObject;\n  }\n\n  add(business) {\n    if (!this.canAdd(business)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(business.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    } else {\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Business || name._isABusinessObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Business matches '${name}. Available Businesses are '${keys}'`);\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        for (let i = 0; i < funcs.length; ++i) {\n          business = funcs[i](business);\n          if (!business) {\n            break;\n          }\n        }\n\n        if (business) {\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (business) {\n        let timeline = business.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        let node = null;\n        if (key === anchor) {\n          node = business.getNode({ is_anchor: true });\n        } else {\n          node = business.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let business = this.state.registry[id];\n\n    if (!business) {\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusinesses.unDry = function (value) {\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n};\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key) {\n  state = state[key];\n  other = other[key];\n\n  Object.keys(other).forEach((key) => {\n    if (!(key in state)) {\n      state[key] = other[key];\n    } else {\n      for (let item in other[key]) {\n        if (!(item in state[key])) {\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props) {\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getName() {\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1) {\n      return `${n0}<=>${n1}`;\n    } else {\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0() {\n    if (this._getHook) {\n      return this._getHook(this.state.n0);\n    } else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1() {\n    if (this._getHook) {\n      return this._getHook(this.state.n1);\n    } else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID() {\n    return this.state.n0;\n  }\n\n  getNode1ID() {\n    return this.state.n1;\n  }\n\n  areNodesVisible(n) {\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name() {\n    let node0 = this.getNode0();\n\n    try {\n      return node0.getName();\n    } catch (error) {\n      return node0;\n    }\n  }\n\n  getNode1Name() {\n    let node1 = this.getNode1();\n\n    try {\n      return node1.getName();\n    } catch (error) {\n      return node1;\n    }\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getAffiliationSources() {\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources() {\n    return this.state.correspondances;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key) => {\n      if (this.state.affiliations[key] || this.state.correspondances[key]) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    // Filter this connection by project ID\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nProjects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nProjects) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (!window) {\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration) {\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.correspondances = setState(state.correspondances, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1) {\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other) {\n    if (!this._getHook) {\n      if (other._getHook) {\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key) => {\n      if (!(key in state.shared)) {\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key) => {\n      if (!(key in state.notes)) {\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString() {\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType() {\n    switch (this.state.type) {\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return \"red\";\n    }\n  }\n\n  getType() {\n    return this.state.type;\n  }\n\n  getWeights() {\n    return this.state.weights;\n  }\n\n  getWeight() {\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key) => {\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType() {\n    let weight = this.getWeight();\n\n    switch (this.state.type) {\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  toEdge() {\n    let color = this.getColorFromType();\n    // let weight = this.getWeightFromType();\n    let weight = this.getWeight();\n\n    let edge = {\n      id: this.getID(),\n      source: this.state.n0,\n      target: this.state.n1,\n      value: weight,\n      type: this.state.type,\n      color: color,\n    };\n\n    return edge;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnection.unDry = function (value) {\n  return new Connection(value);\n};\n\nConnection.load = function (data) {\n  return new Connection({ name: data.name });\n};\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Connection from \"./Connection\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_connection_uid() {\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length - 7);\n}\n\nclass Connections {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAConnectionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Connection || item._isAConnectionObject;\n  }\n\n  add(connection) {\n    if (!this.canAdd(connection)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(connection.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(connection);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = connection.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    } else {\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    this._names[connection.getName()] = connection.getID();\n    this.state.registry[connection.getID()] = connection;\n\n    return connection;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Connection || name._isAConnectionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new TypeError(`No connection matches '${name}. Available Connections are '${keys}'`);\n  }\n\n  gotConnections(id) {\n    return !(this.find(id).length == 0);\n  }\n\n  get(id) {\n    let connection = this.state.registry[id];\n\n    if (!connection) {\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let connection = this.state.registry[key];\n\n      if (connection) {\n        for (let i = 0; i < funcs.length; ++i) {\n          connection = funcs[i](connection);\n          if (!connection) {\n            break;\n          }\n        }\n\n        if (connection) {\n          registry[key] = connection;\n          names[connection.getName()] = key;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  getConnectionsTo(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id) {\n      if (!(id in seen)) {\n        seen[id] = 1;\n      } else {\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        _add(connection.getNode1ID());\n      } else if (connection.getNode1ID() in item) {\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook) {\n      Object.keys(seen).forEach((key) => {\n        try {\n          if (seen[key] === nnodes) {\n            connections.push(this._getHook(key));\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    } else {\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  getEdges(ids = null) {\n    let edges = [];\n\n    if (ids) {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)) {\n          edges.push(connection.toEdge());\n        }\n      });\n    } else {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnections.unDry = function (value) {\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n  });\n\n  return connections;\n};\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw new ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Position(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPosition.unDry = function (value) {\n  return new Position(value);\n};\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Position from \"./Position\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_position_uid() {\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length - 7);\n}\n\nclass Positions {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  items() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Position || item._isAPositionObject;\n  }\n\n  add(position) {\n    if (!this.canAdd(position)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(position.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    } else {\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No position with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Position || name._isApositionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No position matches '${name}. Available Positions are '${keys}'`);\n  }\n\n  get(id) {\n    let position = this.state.registry[id];\n\n    if (!position) {\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPositions.unDry = function (value) {\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n};\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item) {\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliation.unDry = function (value) {\n  return new Affiliation(value);\n};\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Affiliation from \"./Affiliation\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_affiliation_uid() {\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length - 7);\n}\n\nclass Affiliations {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Affiliation || item._isAAffiliationObject;\n  }\n\n  add(affiliation) {\n    if (!this.canAdd(affiliation)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(affiliation.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    } else {\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Affiliation || name._isAAffiliationObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No affiliation matches '${name}. Available Affiliations are '${keys}'`);\n  }\n\n  get(id) {\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation) {\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliations.unDry = function (value) {\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n};\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item) {\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getDate() {\n    return this.state.date;\n  }\n\n  updateDate(date, force = false) {\n    if (!(date instanceof RoughDate || date._isARoughDateObject)) {\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()) {\n      return false;\n    }\n\n    if (this.getDate().isNull()) {\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)) {\n      if (force) {\n        this.state.date = this.getDate().merge(date);\n        return true;\n      } else {\n        console.log(`Disagreement of date for ${this}: ${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Source(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSource.unDry = function (value) {\n  return new Source(value);\n};\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Source from \"./Source\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_source_uid() {\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length - 7);\n}\n\nclass Sources {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Source || item._isASourceObject;\n  }\n\n  add(source) {\n    if (!this.canAdd(source)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(source.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    } else {\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      console.error(`No source with name ${name}`);\n    }\n  }\n\n  search(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description) {\n        description = \"\";\n      }\n\n      try {\n        if (item.getName().toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        } else if (description.toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  find(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No source matches '${name}. Available sources are '${keys}'`);\n  }\n\n  get(id) {\n    let source = this.state.registry[id];\n\n    if (!source) {\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSources.unDry = function (value) {\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n};\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props) {\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item) {\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  toString() {\n    return `Note(${this.getText()})`;\n  }\n\n  getText() {\n    return this.state.text;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNote.unDry = function (value) {\n  return new Note(value);\n};\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_note_uid() {\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length - 7);\n}\n\nclass Notes {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Note || item._isANoteObject;\n  }\n\n  add(note) {\n    if (!this.canAdd(note)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(note.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    } else {\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Note || name._isANoteObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Note matches '${name}. Available Notes are '${keys}'`);\n  }\n\n  get(id) {\n    let Note = this.state.registry[id];\n\n    if (!Note) {\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNotes.unDry = function (value) {\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n};\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item) {\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({ value: state.duration });\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Project(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getURL() {\n    return this.state.url;\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start: duration.getEarliestStart().toDate(),\n        end: duration.getLatestEnd().toDate(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getNewTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start_time: duration.getEarliestStart().toMoment(),\n        end_time: duration.getLatestEnd().toMoment(),\n        project_id: this.getID(),\n        title: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProject.unDry = function (value) {\n  return new Project(value);\n};\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Project from \"./Project\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_project_uid() {\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length - 7);\n}\n\nclass Projects {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Project || item._isAProjectObject;\n  }\n\n  add(project) {\n    if (!this.canAdd(project)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(project.getName());\n    } catch (error) {\n      console.error(\"Cannot get project\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    } else {\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Project || name._isAProjectObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No project matches '${name}. Available projects are '${keys}'`);\n  }\n\n  get(id) {\n    let project = this.state.registry[id];\n\n    if (!project) {\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let project = this.state.registry[key];\n      if (project) {\n        let timeline = project.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProjects.unDry = function (value) {\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n};\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nclass Biographies {\n  constructor() {\n    this.state = {\n      bios: {},\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  static clone(item) {\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node) {\n    if (!node) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getByID(id) {\n    if (!id) return null;\n\n    return this.state.bios[id];\n  }\n\n  getNode(id) {\n    if (this._getHook) {\n      return this._getHook(id);\n    } else {\n      return id;\n    }\n  }\n\n  search(text) {\n    if (!text) {\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key) => {\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1) {\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  add(node, biography) {\n    if (!node || !biography) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio) {\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function (value) {\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n};\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport People from \"./People\";\nimport Businesses from \"./Businesses\";\nimport Connections from \"./Connections\";\nimport Positions from \"./Positions\";\nimport Affiliations from \"./Affiliations\";\nimport Sources from \"./Sources\";\nimport Notes from \"./Notes\";\nimport Projects from \"./Projects\";\nimport Biographies from \"./Biographies\";\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nconst fast_physics = {\n  enabled: true,\n  timestep: 0.5,\n};\n\nconst slow_physics = { ...fast_physics };\nslow_physics.timestep = 0.1;\n\nfunction _push(values, list) {\n  if (!list) {\n    return;\n  }\n\n  if (values.length) {\n    for (let i = 0; i < values.length; ++i) {\n      list.push(values[i]);\n    }\n  } else {\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props) {\n      this.state = props;\n    } else {\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item) {\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => {\n      return this.get(id);\n    };\n\n    let state = { ...this.state };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    } else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    } else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    } else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    } else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    } else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    } else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)) {\n      state.projects = new Projects();\n    } else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)) {\n      state.biographies = new Biographies();\n    } else {\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try {\n        this.state[key]._updateHooks(getHook);\n      } catch (error) {\n        console.error(\"For key : \", key, \"\\nError: \", error);\n      }\n    }\n  }\n\n  clearCache() {\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters() {\n    if (this.state.cache.node_filters) {\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // Must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          return item.filterWindow(window);\n        } catch (error) {\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = { ...node_filter };\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[node.getID()] = 1;\n      }\n\n      this.state.cache.node_filters.push((item) => {\n        if (item.getID() in filter) {\n          return item;\n        } else {\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          if (item.inGroup(group_filter)) {\n            return item;\n          } else {\n            return null;\n          }\n        } catch (error) {\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters() {\n    if (!this.state.cache.edge_filters) {\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterWindow(window);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterProject(project_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterSource(source_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow() {\n    return this.state.window;\n  }\n\n  getMaxWindow() {\n    return this.state.max_window;\n  }\n\n  _fitWindow(window) {\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && new_window.getDelta() === delta) {\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()) {\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()) {\n      return new DateRange({\n        start: this.state.max_window.getStartDate(),\n        end: this.state.max_window.getStartDate() + delta,\n      });\n    } else {\n      return new DateRange({\n        start: this.state.max_window.getEndDate() - delta,\n        end: this.state.max_window.getEndDate(),\n      });\n    }\n  }\n\n  setMaxWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window) {\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()) {\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window) {\n        this.setWindow(fitted);\n      }\n    } else {\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)) {\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)) {\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.people) {\n        console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people = this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.people;\n    } else {\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.businesses) {\n        console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses = this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.businesses;\n    } else {\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.connections) {\n        console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections = this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.connections;\n    } else {\n      return this.state.connections;\n    }\n  }\n\n  getBiographies() {\n    return this.state.biographies;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return { ...this.state.filter };\n  }\n\n  getFilterText() {\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`connected to ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`with source ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in group ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in project ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1) {\n      return filter[0];\n    } else if (filter.length > 1) {\n      return `[${filter.join(\"] and [\")}]`;\n    } else {\n      return null;\n    }\n  }\n\n  _getType(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    if (item[0] === \"P\" || item[0] === \"B\") {\n      return \"node\";\n    } else if (item[0] === \"J\") {\n      return \"project\";\n    } else if (item[0] === \"S\") {\n      return \"source\";\n    } else {\n      return \"group\";\n    }\n  }\n\n  isFiltered(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter) {\n      return item in filter;\n    } else {\n      return false;\n    }\n  }\n\n  find(text) {\n    let result = [];\n\n    try {\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getPositions().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getAffiliations().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getSources().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBiographies().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    return result;\n  }\n\n  resetFilters() {\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  setAnchor(anchor) {\n    if (anchor) {\n      anchor = this.getPeople().find(anchor);\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n  }\n\n  toggleFilter(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    let type = this._getType(item);\n\n    if (!(type in this.state.filter)) {\n      this.state.filter[type] = {};\n    }\n\n    console.log(\"Filtering item \", type, item);\n\n    if (item in this.state.filter[type]) {\n      delete this.state.filter[type][item];\n\n      console.log(\"Deleting filters for \", type, item);\n\n      if (Object.keys(this.state.filter[type]).length === 0) {\n        delete this.state.filter[type];\n      }\n    } else {\n      this.state.filter[type][item] = 1;\n    }\n\n    this.clearCache();\n  }\n\n  clearProjectFilter() {\n    this.state.filter[\"project\"] = {};\n  }\n\n  toggleProjectFilter(project) {\n    if (!(\"project\" in this.state.filter)) {\n      this.state.filter[\"project\"] = {};\n    }\n\n    if (project in this.state.filter[\"project\"]) {\n      delete this.state.filter[\"project\"][project];\n    } else {\n      this.state.filter[\"project\"][project] = 1;\n    }\n  }\n\n  toggleNodeFilter(nodes) {\n    let type = \"node\";\n\n    for (const item of nodes) {\n      if (!(type in this.state.filter)) {\n        this.state.filter[type] = {};\n      }\n\n      if (item in this.state.filter[type]) {\n        delete this.state.filter[type][item];\n\n        if (Object.keys(this.state.filter[type]).length === 0) {\n          delete this.state.filter[type];\n        }\n      } else {\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  getProjectTimeLine() {\n    if (this.state.cache.projectTimeLine !== null) {\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine() {\n    if (this.state.cache.itemTimeLine !== null) {\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item) => {\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  getGraph() {\n    if (this.state.cache.graph !== null) {\n      return this.state.cache.graph;\n    }\n\n    const anchor = this.state.anchor;\n    let nodes = this.getPeople().getNodes({ anchor: anchor });\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    let n = {};\n    for (let i in nodes) {\n      n[nodes[i].id] = 1;\n    }\n\n    let edges = this.getConnections().getEdges(n);\n\n    this.state.cache.graph = { nodes: nodes, edges: edges };\n    return this.state.cache.graph;\n  }\n\n  add(item) {\n    if (!item) {\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key) => {\n      if (!added) {\n        let group = this.state[key];\n        if (group && group.canAdd) {\n          if (group.canAdd(item)) {\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added) {\n      throw new ValueError(`Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered = true) {\n    if (id.getID) {\n      id = id.getID();\n    }\n\n    if (this._rebuilding) {\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try {\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      } else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      } else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      } else if (id[0] === \"Q\") {\n        return this.getPositions().get(id);\n      } else if (id[0] === \"A\") {\n        return this.getAffiliations().get(id);\n      } else if (id[0] === \"S\") {\n        return this.getSources().get(id);\n      } else if (id[0] === \"N\") {\n        return this.getNotes().get(id);\n      } else if (id[0] === \"J\") {\n        return this.getProjects().get(id);\n      } else {\n        return id;\n      }\n    } catch (error) {\n      if (filtered) {\n        return this.get(id, false);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n};\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;\n","import React from \"react\";\n\nimport { Tabs, Tab, TabPanel, TabList } from \"react-web-tabs\";\n\nimport { Accordion, AccordionItem, AccordionTitle, AccordionPanel } from \"./Accordion\";\n\nimport GroupsList from \"./GroupsList\";\nimport ConnectionList from \"./ConnectionList\";\nimport SourceList from \"./SourceList\";\nimport WeightsList from \"./WeightsList\";\nimport DateRangeButton from \"./DateRangeButton\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport Social from \"../model/Social\";\n\nimport styles from \"./InfoBox.module.css\";\n\nimport default_image from \"../images/RHowlett_IKB.jpg\";\nimport person_image from \"../images/IllustriteZeitung_SS_GreatBritain.png\";\nimport business_image from \"../images/320px-SS_Great_Britain_diagram.jpg\";\nimport source_image from \"../images/Sumerian_26th_c_Adab.jpg\";\nimport analysis_image from \"../images/320px-SS_Great_Britain_transverse_section.jpg\";\n\nlet default_title = \"Isambard's Social Network\";\n\nlet default_text = (\n  <div>\n    This is an interactive viewer of Isambard Kingdom Brunel&apos;s social network. Please click in the nodes and have\n    fun!\n  </div>\n);\n\nfunction null_function() {}\n\nfunction getBiography({ item, social, emitSelected = null_function, emitToggleFilter = null_function }) {\n  let pages = [];\n  let affiliations = {};\n  let positions = {};\n  let sources = {};\n  let connections = [];\n\n  try {\n    connections = social.getConnectionsTo(item);\n  } catch (error) {\n    console.log(`CONNECTIONS ERROR ${error}`);\n  }\n\n  if (item.getAffiliations) {\n    affiliations = item.getAffiliations();\n  }\n\n  if (item.getPositions) {\n    positions = item.getPositions();\n  }\n\n  if (item.getSources) {\n    sources = item.getSources();\n  }\n\n  let alive = null;\n\n  if (item.getAlive) {\n    let a = item.getAlive();\n    if (a) {\n      alive = (\n        <p>\n          They were alive from&nbsp;\n          {a.getStartString()}&nbsp; until {a.getEndString()}.\n        </p>\n      );\n    }\n  }\n\n  let bio = null;\n\n  try {\n    bio = social.getBiographies().get(item);\n  } catch (error) {\n    bio = null;\n  }\n\n  pages.push([\n    \"Biography\",\n    <div key=\"biography\">\n      <div>{bio}</div>\n      <div>{alive}</div>\n    </div>,\n  ]);\n\n  if (connections.length > 0) {\n    pages.push([\n      \"Connections\",\n      <div key=\"connections\">\n        <ConnectionList\n          connections={connections}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Connections\", \"None\"]);\n  }\n\n  if (Object.keys(positions).length > 0) {\n    pages.push([\n      \"Positions\",\n      <div key=\"positions\">\n        <GroupsList\n          groups={positions}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Positions\", \"None\"]);\n  }\n\n  if (Object.keys(affiliations).length > 0) {\n    pages.push([\n      \"Affiliations\",\n      <div key=\"affiliations\">\n        <GroupsList\n          groups={affiliations}\n          emitSelected={emitSelected}\n          emitToggleFilter={emitToggleFilter}\n          social={social}\n        />\n      </div>,\n    ]);\n  } else {\n    pages.push([\"Affiliations\", \"None\"]);\n  }\n\n  if (Object.keys(sources).length > 0) {\n    pages.push([\n      \"Sources\",\n      <div key=\"sources\">\n        <GroupsList groups={sources} emitSelected={emitSelected} emitToggleFilter={emitToggleFilter} social={social} />\n      </div>,\n    ]);\n  }\n\n  pages.push([\"Analysis\", <div key=\"analysis\">Here is space for graphs and analysis of {item.getName()}</div>]);\n\n  return pages;\n}\n\nfunction extractData({ item, social, emitSelected = null_function, emitToggleFilter = null_function }) {\n  let data = {\n    title: default_title,\n    image: default_image,\n    pages: [[\"Title\", default_text]],\n  };\n\n  if (!(social instanceof Social)) {\n    return data;\n  }\n\n  if (!item) {\n    return data;\n  }\n\n  //refresh the item in case of updates...\n  if (item.getID) {\n    item = item.getID();\n  }\n\n  try {\n    item = social.get(item);\n  } catch (error) {\n    item = null;\n  }\n\n  if (!item) {\n    return data;\n  }\n\n  if (item._isAPersonObject) {\n    data.title = (\n      <DefaultButton\n        onClick={() => {\n          emitToggleFilter(item);\n        }}\n      >\n        {item.getName()}\n      </DefaultButton>\n    );\n    data.pages = getBiography({\n      item: item,\n      social: social,\n      emitSelected: emitSelected,\n      emitToggleFilter: emitToggleFilter,\n    });\n\n    data.image = person_image;\n  } else if (item._isABusinessObject) {\n    data.title = (\n      <DefaultButton\n        onClick={() => {\n          emitToggleFilter(item);\n        }}\n      >\n        {item.getName()}\n      </DefaultButton>\n    );\n    data.pages = getBiography({\n      item: item,\n      social: social,\n      emitSelected: emitSelected,\n      emitToggleFilter: emitToggleFilter,\n    });\n\n    data.image = business_image;\n  } else if (item._isASourceObject) {\n    data.title = item.getName();\n    let description = item.getDescription();\n    if (!description) {\n      description = \"No description\";\n    }\n    data.pages = [\n      [\"Description\", description],\n      [\"Analysis\", \"Analysis for this source - where else has it been cited?\"],\n    ];\n    data.image = source_image;\n  } else if (item._isAConnectionObject) {\n    data.title = null;\n\n    let n0 = item.getNode0();\n    if (n0.getName) {\n      let node = n0;\n      n0 = (\n        <DefaultButton\n          onClick={() => {\n            emitSelected(node);\n          }}\n        >\n          {n0.getName()}\n        </DefaultButton>\n      );\n    }\n\n    let n1 = item.getNode1();\n    if (n1.getName) {\n      let node = n1;\n      n1 = (\n        <DefaultButton\n          onClick={() => {\n            emitSelected(node);\n          }}\n        >\n          {n1.getName()}\n        </DefaultButton>\n      );\n    }\n\n    let asources = item.getAffiliationSources();\n    let csources = item.getCorrespondanceSources();\n    let duration = item.getDuration();\n\n    if (duration) {\n      duration = (\n        <div>\n          <div>during</div>\n          <DateRangeButton value={duration} emitSelected={emitSelected} />\n        </div>\n      );\n    }\n\n    if (asources) {\n      asources = (\n        <AccordionItem uuid=\"asources\">\n          <AccordionTitle>Affiliation</AccordionTitle>\n          <AccordionPanel>\n            <SourceList social={social} sources={asources} emitSelected={emitSelected} />\n          </AccordionPanel>\n        </AccordionItem>\n      );\n    }\n\n    if (csources) {\n      csources = (\n        <AccordionItem uuid=\"csources\">\n          <AccordionTitle>Correspondance</AccordionTitle>\n          <AccordionPanel>\n            <SourceList social={social} sources={csources} emitSelected={emitSelected} />\n          </AccordionPanel>\n        </AccordionItem>\n      );\n    }\n\n    let accordion = null;\n\n    if (asources || csources) {\n      accordion = (\n        <Accordion allowMultipleExpanded={true} allowZeroExpanded={true} preExpanded={[\"asources\", \"csources\"]}>\n          {asources}\n          {csources}\n        </Accordion>\n      );\n    }\n\n    let pages = [];\n    pages.push([\n      \"Connection\",\n      <div key=\"connection\" style={{ textAlign: \"center\" }}>\n        {n0}\n        <div>||</div>\n        {n1}\n        <div>&nbsp;</div>\n        <div>{duration}</div>\n      </div>,\n    ]);\n\n    pages.push([\"Sources\", <div key=\"sources\">{accordion}</div>]);\n\n    pages.push([\n      \"Projects\",\n      <WeightsList\n        key=\"projects\"\n        weights={item.getWeights()}\n        type={item.getType()}\n        social={social}\n        emitSelected={emitSelected}\n        emitToggleFilter={emitToggleFilter}\n      />,\n    ]);\n\n    pages.push([\"Analysis\", \"Space for analysis of this Connection\"]);\n\n    data.image = analysis_image;\n\n    data.pages = pages;\n  }\n\n  return data;\n}\n\nfunction InfoBox(props) {\n  let data = {};\n\n  try {\n    data = extractData(props);\n  } catch (error) {\n    data = {\n      title: default_title,\n      image: default_image,\n      pages: [[\"Title\", default_text]],\n    };\n    console.log(`ERROR ${error}`);\n  }\n\n  const pages = data.pages;\n\n  if (pages.length > 1) {\n    let tabs = [];\n    let panes = [];\n\n    for (let i = 0; i < pages.length; ++i) {\n      panes.push(\n        <TabPanel key={pages[i][0]} tabId={pages[i][0]} className={styles.tabPanel}>\n          {pages[i][1]}\n        </TabPanel>\n      );\n      tabs.push(\n        <Tab key={pages[i][0]} className={styles.tab} tabFor={pages[i][0]}>\n          {pages[i][0]}\n        </Tab>\n      );\n    }\n\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image} />\n        <div className={styles.title}>{data.title}</div>\n        <Tabs\n          key={panes.length}\n          vertical\n          onChange={(tabId) => {\n            console.log(tabId);\n          }}\n          defaultTab={pages[0][0]}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tablist}>{tabs}</TabList>\n          {panes}\n        </Tabs>\n      </div>\n    );\n  } else {\n    return (\n      <div className={styles.container}>\n        <img className={styles.heroImage} alt=\"\" src={data.image} />\n        <div className={styles.title}>{data.title}</div>\n        {pages[0][1]}\n      </div>\n    );\n  }\n}\n\nexport default InfoBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport moment from \"moment\";\n\nimport Timeline, { TimelineHeaders, CustomHeader } from \"react-calendar-timeline\";\n\nimport \"./TimelineCSSOverride.css\";\n\nclass NewTimeline extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setFilter = this.setFilter.bind(this);\n    this.itemRenderer = this.itemRenderer.bind(this);\n\n    this.state = {\n      defaultTimeStart: moment(\"1829-01-01\"),\n      defaultTimeEnd: moment(\"1846-12-31\"),\n      lastShip: null,\n    };\n\n    this.textStyle = {\n      overflow: \"hidden\",\n      paddingLeft: 3,\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n    };\n\n    this.dateHeaderStyle = {\n      color: \"black\",\n      fontSize: \"16px\",\n      backgroundColor: \"#E8CEAA\",\n      //   backgroundColor: \"#E3D8A0\",\n      fontFamily: \"Playfair Display SC\",\n      border: \"white\",\n    };\n  }\n\n  setFilter(id, shipName) {\n    if (shipName === this.state.lastShip) {\n      this.props.resetFilters();\n      // Allows the ship to be selected again\n      this.setState({ lastShip: \"\" });\n      return;\n    }\n\n    this.setState({ lastShip: shipName });\n    this.props.onClick(id, shipName);\n  }\n\n  openOverview() {\n    return;\n  }\n\n  itemRenderer({ item, itemContext, getItemProps }) {\n    const background = itemContext.selected ? \"#3F592F\" : \"#003366\";\n    const border = itemContext.resizing ? \"#3F592F\" : \"#003366\";\n\n    return (\n      <div\n        {...getItemProps({\n          style: {\n            background,\n            border,\n            borderStyle: \"solid\",\n            fontSize: \"18px\",\n            fontFamily: \"Playfair Display SC\",\n            borderWidth: 0,\n          },\n          onMouseDown: () => {\n            this.setFilter(item[\"project_id\"], item[\"title\"]);\n          },\n        })}\n      >\n        <div style={this.textStyle}>{itemContext.title}</div>\n      </div>\n    );\n  }\n\n  render() {\n    const projects = this.props.projects;\n\n    const timeline_items = projects.values().map((project, index) => {\n      let item = project.getNewTimeLine();\n\n      item[\"id\"] = index;\n      item[\"group\"] = 1;\n\n      return item;\n    });\n\n    const groups = [{ id: 1, title: \"Projects\" }];\n\n    return (\n      <Timeline\n        groups={groups}\n        items={timeline_items}\n        sidebarWidth={0}\n        itemTouchSendsClick={true}\n        stackItems\n        lineHeight={60}\n        itemHeightRatio={0.8}\n        showCursorLine\n        canMove={false}\n        canResize={false}\n        traditionalZoom={true}\n        timeSteps={{ year: 1 }}\n        itemRenderer={this.itemRenderer}\n        defaultTimeStart={this.state.defaultTimeStart}\n        defaultTimeEnd={this.state.defaultTimeEnd}\n      >\n        <TimelineHeaders>\n          {/* <DateHeader unit=\"primaryHeader\" style={this.dateHeaderStyle} /> */}\n          <CustomHeader height={30} unit=\"year\">\n            {({ headerContext: { intervals }, getRootProps, getIntervalProps }) => {\n              return (\n                <div {...getRootProps()}>\n                  {intervals.map((interval, index) => {\n                    const intervalStyle = {\n                      lineHeight: \"30px\",\n                      textAlign: \"center\",\n                      borderLeft: \"1px solid white\",\n                      cursor: \"pointer\",\n                      backgroundColor: \"#E9CEAB\",\n                      color: \"black\",\n                      fontFamily: \"Playfair Display SC\",\n                    };\n                    return (\n                      <div\n                        key={index}\n                        {...getIntervalProps({\n                          interval,\n                          style: intervalStyle,\n                        })}\n                      >\n                        <div className=\"sticky\">{interval.startTime.format(\"YYYY\")}</div>\n                      </div>\n                    );\n                  })}\n                </div>\n              );\n            }}\n          </CustomHeader>\n        </TimelineHeaders>\n      </Timeline>\n    );\n  }\n}\n\nNewTimeline.propTypes = {\n  projects: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  resetFilters: PropTypes.func.isRequired,\n};\n\nexport default NewTimeline;\n","import PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport { Tabs, Tab, TabPanel, TabList } from \"react-web-tabs\";\n\nimport NewTimeline from \"./NewTimeline\";\n\nimport styles from \"./TimeLineBox.module.css\";\n\nclass TimeLineBox extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: { height: 300, width: 600 },\n    };\n\n    this.tabs = {};\n    this.container = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", () => {\n      this.updateSize();\n    });\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", () => {\n      this.updateSize();\n    });\n  }\n\n  activate(tabId) {\n    Object.keys(this.tabs).forEach((key) => {\n      if (key !== tabId) {\n        let tab = this.tabs[key];\n        if (tab) {\n          tab.deactivate();\n        }\n      }\n    });\n\n    if (this.tabs[tabId]) {\n      this.tabs[tabId].activate();\n    }\n  }\n\n  updateSize() {\n    if (this.container) {\n      this.setState({\n        dimensions: {\n          width: this.container.offsetWidth,\n          height: this.container.offsetHeight,\n        },\n      });\n    }\n\n    Object.keys(this.tabs).forEach((key) => {\n      let tab = this.tabs[key];\n      if (tab) {\n        tab.updateSize(this.state.dimensions);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div ref={(el) => (this.container = el)} className={styles.container}>\n        <Tabs\n          key=\"timeline-tabs\"\n          onChange={(tabId) => {\n            this.activate(tabId);\n            this.updateSize();\n          }}\n          className={styles.tabs}\n        >\n          <TabList className={styles.tabList}>\n            <Tab className={styles.tab} key=\"items\" tabFor=\"items\">\n              Timeline\n            </Tab>\n            {/* <Tab className={styles.tab} key=\"projects\" tabFor=\"projects\">\n              Projects\n            </Tab> */}\n            <Tab className={styles.tab} key=\"analysis\" tabFor=\"analysis\">\n              Analysis\n            </Tab>\n          </TabList>\n\n          <TabPanel key=\"items\" tabId=\"items\" className={styles.tabPanel}>\n            <NewTimeline\n              projects={this.props.projects}\n              onClick={this.props.shipSelect}\n              resetFilters={this.props.resetFilters}\n            />\n          </TabPanel>\n\n          {/* <TabPanel key=\"projects\" tabId=\"projects\" className={styles.tabPanel}>\n            <NewTimeline\n              projects={this.props.projects}\n              onClick={this.props.shipSelect}\n              resetFilters={this.props.resetFilters}\n            />\n          </TabPanel> */}\n\n          <TabPanel key=\"analysis\" tabId=\"analysis\" className={styles.tabPanel}>\n            <div className={styles.centerContainer}>\n              <p>This will contain tools and graphs for temporal social network analysis.</p>\n            </div>\n          </TabPanel>\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nTimeLineBox.propTypes = {\n  projects: PropTypes.object.isRequired,\n  shipSelect: PropTypes.func.isRequired,\n  resetFilters: PropTypes.func.isRequired,\n  //   emitClicked: PropTypes.func.isRequired,\n  //   emitSelected: PropTypes.func.isRequired,\n  //   emitWindowChanged: PropTypes.func.isRequired,\n  //   getItemTimeLine: PropTypes.func.isRequired,\n  //   getItemWindow: PropTypes.func.isRequired,\n  //   getMaxWindow: PropTypes.func.isRequired,\n  //   getProjectTimeLine: PropTypes.func.isRequired,\n  //   getProjectWindow: PropTypes.func.isRequired,\n  //   selected: PropTypes.func,\n};\n\nexport default TimeLineBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Accordion, AccordionItem, AccordionTitle, AccordionPanel } from \"./Accordion\";\n\nimport { ResponsiveList, ResponsiveListItem } from \"./ResponsiveList\";\nimport CheckBox from \"./CheckBox\";\nimport DefaultButton from \"./DefaultButton\";\n\nimport styles from \"./FilterBox.module.css\";\n\nfunction null_function() {}\n\nfunction filterList(items, props) {\n  let social = props.social;\n\n  let emitSelected = props.emitSelected;\n\n  if (!emitSelected) {\n    emitSelected = null_function;\n  }\n\n  let emitToggleFilter = props.emitToggleFilter;\n\n  if (!emitToggleFilter) {\n    emitToggleFilter = null_function;\n  }\n\n  let output = items.values().map((item) => {\n    let is_filtered = social.isFiltered(item);\n\n    return (\n      <ResponsiveListItem key={item.getName()}>\n        <DefaultButton\n          style={{ position: \"relative\", maxWidth: \"80%\" }}\n          onClick={() => {\n            emitSelected(item);\n          }}\n        >\n          {item.getName()}\n        </DefaultButton>\n        &nbsp;\n        <CheckBox\n          checked={is_filtered}\n          onChange={() => {\n            emitToggleFilter(item);\n          }}\n        />\n      </ResponsiveListItem>\n    );\n  });\n\n  return <ResponsiveList>{output}</ResponsiveList>;\n}\n\nfilterList.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSelected: PropTypes.func,\n  emitToggleFilter: PropTypes.func,\n};\n\nfunction FilterBox(props) {\n  let social = props.social;\n\n  if (!social) {\n    return <div>No social to display!</div>;\n  }\n\n  let filter_text = social.getFilterText();\n\n  if (!filter_text) {\n    filter_text = \"No filters\";\n  }\n\n  let emitClearFilters = props.emitClearFilters;\n\n  if (!emitClearFilters) {\n    emitClearFilters = null_function;\n  }\n\n  let filter_info = (\n    <AccordionItem uuid=\"filterinfo\">\n      <AccordionTitle>Current Filter</AccordionTitle>\n      <AccordionPanel>\n        <div className={styles.filterContainer}>\n          <div className={styles.filterText}>{filter_text}</div>\n          <div>\n            <DefaultButton onClick={emitClearFilters}>Clear Filters</DefaultButton>\n          </div>\n        </div>\n      </AccordionPanel>\n    </AccordionItem>\n  );\n\n  let projects = filterList(social.getProjects(false), props);\n  let sources = filterList(social.getSources(false), props);\n  let positions = filterList(social.getPositions(false), props);\n  let affiliations = filterList(social.getAffiliations(false), props);\n  let people = filterList(social.getPeople(false), props);\n  let businesses = filterList(social.getBusinesses(false), props);\n\n  return (\n    <Accordion allowMultipleExpanded={false} allowZeroExpanded={true}>\n      {filter_info}\n\n      <AccordionItem uuid=\"projects\">\n        <AccordionTitle>Projects</AccordionTitle>\n        <AccordionPanel>{projects}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"sources\">\n        <AccordionTitle>Sources</AccordionTitle>\n        <AccordionPanel>{sources}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"people\">\n        <AccordionTitle>People</AccordionTitle>\n        <AccordionPanel>{people}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"businesses\">\n        <AccordionTitle>Businesses</AccordionTitle>\n        <AccordionPanel>{businesses}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"positions\">\n        <AccordionTitle>Positions</AccordionTitle>\n        <AccordionPanel>{positions}</AccordionPanel>\n      </AccordionItem>\n\n      <AccordionItem uuid=\"affiliations\">\n        <AccordionTitle>Affiliations</AccordionTitle>\n        <AccordionPanel>{affiliations}</AccordionPanel>\n      </AccordionItem>\n    </Accordion>\n  );\n}\n\nFilterBox.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSelected: PropTypes.func,\n  emitClearFilters: PropTypes.func,\n};\n\nexport default FilterBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport styles from \"./SlidingPanel.module.css\";\nimport SlideFromLeft from \"./transitions/SlideFromLeft.module.css\";\nimport SlideFromRight from \"./transitions/SlideFromRight.module.css\";\nimport SlideFromBottom from \"./transitions/SlideFromBottom.module.css\";\nimport SlideFromTop from \"./transitions/SlideFromTop.module.css\";\n\nclass SlidingPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      position: \"right\",\n      defaultSize: \"40%\",\n      minSize: \"300px\",\n      maxSize: null,\n    };\n  }\n\n  render() {\n    let container = styles.rightContainer;\n    let transition = SlideFromRight;\n\n    let width = this.props.width;\n    let height = this.props.height;\n\n    if (height && !width) {\n      width = \"100%\";\n    }\n\n    if (width && !height) {\n      height = \"100%\";\n    }\n\n    let horiz_size = { width: width };\n    let vert_size = { height: height };\n\n    let style = { width: width, height: height, minSize: this.state.minSize };\n\n    if (this.props.maxSize) {\n      horiz_size.maxWidth = this.props.maxSize;\n      vert_size.maxHeight = this.props.maxSize;\n    }\n\n    // let style = horiz_size;\n    // Get the passed in position\n    let position = this.props.position;\n\n    if (position === \"right\") {\n      container = styles.rightContainer;\n      transition = SlideFromRight;\n    } else if (position === \"bottom\") {\n      container = styles.bottomContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"top\") {\n      container = styles.topContainer;\n      transition = SlideFromTop;\n    } else if (position === \"left\") {\n      container = styles.leftContainer;\n      transition = SlideFromLeft;\n    }\n\n    container = `${container} ${styles.container}`;\n\n    return (\n      <CSSTransition in={this.props.isOpen} timeout={200} classNames={transition} unmountOnExit>\n        <div className={container} style={style}>\n          {this.props.children}\n        </div>\n      </CSSTransition>\n    );\n  }\n}\n\nSlidingPanel.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\n  isOpen: PropTypes.bool,\n  maxSize: PropTypes.string,\n  minSize: PropTypes.string,\n  position: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nexport default SlidingPanel;\n","import React from \"react\";\nimport Spinner from \"react-spinkit\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./OverlayBox.module.css\";\n\nclass OverlayBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n  }\n\n  hideSpinner() {\n    this.setState({\n      loading: false,\n    });\n  }\n\n  render() {\n    let item = this.props.item;\n    let url = null;\n\n    if (item && item.getURL) {\n      url = item.getURL();\n    }\n\n    if (!url) {\n      return (\n        <div className={styles.container}>\n          <div className={styles.centerContainer}>\n            {item}\n            <div>\n              <button className={styles.button} onClick={this.props.emitClose}>\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.url}>{url}</div>\n        {this.state.loading ? (\n          <div className={styles.centerContainer}>\n            <div>Loading page...</div>\n            <div>\n              <Spinner name=\"ball-grid-pulse\" color=\"#003366\" fadeIn=\"none\" />\n            </div>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nOverlayBox.propTypes = {\n  item: PropTypes.elementType,\n  emitClose: PropTypes.func.isRequired,\n};\nexport default OverlayBox;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport TextButton from \"./TextButton\";\n\nimport styles from \"./BrunelMenu.module.css\";\nimport logo from \"../images/ssgb_logo.png\";\n\nclass BrunelMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.viewAbout = this.viewAbout.bind(this);\n    this.viewSource = this.viewSource.bind(this);\n  }\n\n  viewAbout() {\n    let item = (\n      <div>\n        <div>\n          This is a demo of the application to view Brunel&apos;s temporal social network. This is an incomplete\n          application containing incomplete data and should not be relied on or viewed as being accurate.\n        </div>\n        <div>\n          If you want more information, then please visit the{\" \"}\n          <a href=\"https://github.com/chryswoods/brunel\">GitHub repository</a>\n        </div>\n      </div>\n    );\n\n    this.props.setOverlay(item);\n  }\n\n  viewSource() {\n    var win = window.open(\"https://github.com/gareth-j/brunel\", \"_blank\");\n    win.focus();\n  }\n\n  render() {\n    return (\n      <div className={styles.sidebar}>\n        <div className={styles.logo}>\n          <img src={logo} alt=\"SS Great Britain logo\"></img>\n        </div>\n        <div className={styles.verticalSpace}></div>\n        <TextButton className={styles.button} onClick={this.viewAbout}>\n          About\n        </TextButton>\n        <TextButton className={styles.button} onClick={this.viewSource}>\n          Source\n        </TextButton>\n        <TextButton className={styles.button} onClick={this.props.clickReset}>\n          Reset\n        </TextButton>\n      </div>\n    );\n  }\n}\n\nBrunelMenu.propTypes = {\n  clickReset: PropTypes.func.isRequired,\n  setOverlay: PropTypes.func.isRequired,\n};\n\nexport default BrunelMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./ShipSelector.module.css\";\n\nclass ShipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const projects = this.props.projects;\n\n    // We want the graph to start with the GW selected\n    const ssGW = projects.getByName(\"SS Great Western\");\n    this.props.shipFilter(ssGW);\n\n    this.state = { lastShip: ssGW.getName() };\n  }\n\n  setFilter(item) {\n    const shipName = item.getName();\n\n    if (shipName === this.state.lastShip) {\n      //   this.props.resetFilters();\n      //   this.setState({ lastShip: \"\" });\n      return;\n    }\n\n    this.setState({ lastShip: shipName });\n    this.props.shipFilter(item);\n  }\n\n  render() {\n    let projects = this.props.projects;\n\n    console.log(this.state.lastShip);\n\n    let output = projects.values().map((item) => {\n      if (item.getName() === \"SS Great Eastern\") {\n        return (\n          <button href=\"#\" key={item.getName()} className={styles.disabledButton}>\n            {item.getName()}\n          </button>\n        );\n      } else {\n        return (\n          <button href=\"#\" key={item.getName()} className={styles.button} onClick={() => this.setFilter(item)}>\n            {item.getName()}\n          </button>\n        );\n      }\n    });\n\n    return output;\n  }\n}\n\nShipSelector.propTypes = {\n  projects: PropTypes.object.isRequired,\n  resetFilters: PropTypes.func.isRequired,\n  shipFilter: PropTypes.func.isRequired,\n};\n\nexport default ShipSelector;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./ShipTitle.module.css\";\n\nfunction ShipTitle(props) {\n  if (props.name == null) {\n    return null;\n  } else {\n    return <button className={styles.shipTitle}>{props.name}</button>;\n  }\n}\n\nShipTitle.propTypes = {\n  shipTitle: PropTypes.string,\n  style: PropTypes.string,\n};\n\nexport default ShipTitle;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Spinner from \"react-spinkit\";\n\nimport TextButton from \"./TextButton\";\n\nimport styles from \"./SearchBar.module.css\";\n\n// This class is heavily inspired by react-search-field\n// from https://github.com/nutboltu/react-search-field\n\nfunction _null_function() {}\n\nfunction SearchResults(props) {\n  let results = props.results;\n\n  if (!results) {\n    return null;\n  }\n\n  let items = [];\n\n  results.forEach((item, index) => {\n    items.push(<li key={index}>{item}</li>);\n  });\n\n  return <ul>{items}</ul>;\n}\n\nSearchResults.propTypes = {\n  results: PropTypes.any,\n};\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\",\n      suggestions: null,\n      searching: null,\n      results: null,\n    };\n  }\n\n  componentDidUpdate(nextProps) {\n    if (this.props.searchText !== nextProps.searchText) {\n      this.setState({\n        value: nextProps.searchText,\n      });\n    }\n  }\n\n  setResults(results) {\n    this.props.emitResults();\n    this.setState({ searching: null, suggestions: null, results: results });\n  }\n\n  setSuggestions(suggestions) {\n    this.props.emitResults();\n    this.setState({ searching: null, suggestions: suggestions, results: null });\n  }\n\n  createButton(item, index) {\n    const name = item.getName();\n    return (\n      <TextButton\n        key={name.concat(\"_\", index)}\n        textColor=\"#f1f1f1\"\n        hoverColor=\"#111\"\n        fontSize=\"2vh\"\n        onClick={() => {\n          this.props.emitSelected(item);\n        }}\n      >\n        {name}\n      </TextButton>\n    );\n  }\n\n  startSuggestion(text) {\n    let social = this.props.social;\n    if (!social) {\n      return;\n    }\n\n    let items = null;\n\n    try {\n      items = social.find(text);\n    } catch (error) {\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected) {\n      emitSelected = _null_function;\n    }\n\n    if (items) {\n      let results = items.map((item, index) => {\n        return this.createButton(item, index);\n      });\n\n      this.setSuggestions(results);\n    } else {\n      this.setSuggestions(null);\n    }\n  }\n\n  startSearch(text) {\n    let social = this.props.social;\n\n    if (!social) {\n      this.setResults([<div key=\"noresults\">No results!</div>]);\n      return;\n    }\n\n    let items = null;\n\n    try {\n      items = social.find(text);\n    } catch (error) {\n      console.error(error);\n      items = null;\n    }\n\n    let emitSelected = this.props.emitSelected;\n\n    if (!emitSelected) {\n      emitSelected = _null_function;\n    }\n\n    if (items) {\n      let results = items.map((item, index) => {\n        return this.createButton(item, index);\n      });\n\n      this.setResults(results);\n    } else {\n      this.setResults([<div key=\"rnoresults\">Really no results!</div>]);\n    }\n  }\n\n  searchFor(text) {\n    if (text && text.length > 0) {\n      this.setState({ searching: text, suggestions: null, results: null });\n\n      setTimeout(() => {\n        this.startSearch(text);\n      }, 10);\n    } else {\n      this.setState({ suggestions: null, searching: null, results: null });\n    }\n  }\n\n  autocomplete(text) {\n    if (text && text.length > 0) {\n      this.startSuggestion(text);\n    } else {\n      this.setState({ suggestions: null, searching: null, results: null });\n    }\n  }\n\n  isSearching() {\n    return this.state.searching !== null;\n  }\n\n  isSuggesting() {\n    return this.state.suggestions !== null;\n  }\n\n  hasResults() {\n    return this.state.results !== null;\n  }\n\n  stopSearch() {\n    this.setState({ searching: null, suggestions: null, results: null });\n  }\n\n  onChange(event) {\n    if (this.isSearching()) {\n      return;\n    }\n\n    this.setState({ value: event.target.value });\n    this.autocomplete(event.target.value);\n  }\n\n  onEnter(event) {\n    if (this.isSearching() || this.isEmpty()) {\n      return;\n    }\n\n    const enterKey = 13;\n    const isEnterPressed = event.which === enterKey || event.keyCode === enterKey;\n\n    if (isEnterPressed) {\n      this.searchFor(event.target.value);\n    }\n  }\n\n  onSearch() {\n    if (this.isSearching() || this.isEmpty()) {\n      return;\n    }\n\n    this.searchFor(this.state.value);\n  }\n\n  isEmpty() {\n    return !(this.state.value && this.state.value.length > 0);\n  }\n\n  isSearchingComponent() {\n    return (\n      <div className={styles.searchContainer}>\n        <div className={styles.resultContainer}>\n          <div className={styles.searchPending}>\n            <div>Searching for &quot;{this.state.searching}&quot;...</div>\n            <div style={{ display: \"inline-block\" }}>\n              <Spinner name=\"ball-grid-pulse\" color=\"green\" fadeIn=\"none\" />\n            </div>\n          </div>\n          <div\n            className={styles.closeResultButton}\n            onClick={() => {\n              this.stopSearch();\n            }}\n          >\n            X\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  isSuggestingComponent() {\n    return (\n      <div className={styles.searchContainer}>\n        <div className={styles.resultContainer}>\n          <div className={styles.searchResult}>\n            <SearchResults results={this.state.suggestions} />\n          </div>\n          <div\n            className={styles.closeResultButton}\n            onClick={() => {\n              this.setState({ suggestions: null });\n            }}\n          >\n            X\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  resultsComponent() {\n    return (\n      <div className={styles.searchContainer}>\n        <div className={styles.resultContainer}>\n          <div className={styles.searchResult}>\n            <SearchResults results={this.state.results} />\n          </div>\n          <div\n            className={styles.closeResultButton}\n            onClick={() => {\n              this.setState({ results: null });\n            }}\n          >\n            X\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div className={styles.searchContainer}>\n          <input\n            className={styles.searchBox}\n            onChange={(event) => {\n              this.onChange(event);\n            }}\n            onKeyPress={(event) => {\n              this.onEnter(event);\n            }}\n            placeholder={this.props.placeholder}\n            type=\"text\"\n            value={this.state.value}\n          />\n        </div>\n        {this.isSearching() ? this.isSearchingComponent() : null}\n        {this.isSuggesting() ? this.isSuggestingComponent() : null}\n        {this.hasResults() ? this.resultsComponent() : null}\n      </div>\n    );\n  }\n}\n\n// TODO - finish this\nSearchBar.propTypes = {\n  emitSelected: PropTypes.func.isRequired,\n  social: PropTypes.object.isRequired,\n  placeholder: PropTypes.string,\n  searchText: PropTypes.string,\n};\n\nexport default SearchBar;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport SearchBar from \"./SearchBar\";\nimport Overlay from \"./Overlay\";\n\nimport styles from \"./SearchOverlay.module.css\";\nimport OverlayWrapper from \"./OverlayWrapper\";\n\nclass SearchOverlay extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.emitResults = this.emitResults.bind(this);\n    this.state = {\n      isOverlayOpen: true,\n      isBioOverlayOpen: true,\n      isSourceOverlayOpen: false,\n      haveResults: false,\n      selectedEntity: null,\n    };\n\n    this.toggleSourceOverlay = this.toggleSourceOverlay.bind(this);\n    this.toggleBioOverlay = this.toggleBioOverlay.bind(this);\n    this.emitSelected = this.emitSelected.bind(this);\n\n    this.toggleOverlay = this.toggleOverlay.bind(this);\n  }\n\n  emitResults() {\n    this.setState({ haveResults: true });\n  }\n\n  emitSelected(item) {\n    this.setState({ selectedEntity: item });\n  }\n\n  toggleOverlay() {\n    this.setState({ isOverlayOpen: !this.state.isOverlayOpen });\n  }\n\n  toggleSourceOverlay() {\n    this.setState({ isOverlayOpen: true, isSourceOverlayOpen: true, isBioOverlayOpen: false });\n  }\n\n  toggleBioOverlay() {\n    this.setState({ isOverlayOpen: true, isSourceOverlayOpen: false, isBioOverlayOpen: true });\n  }\n\n  render() {\n    // let searchStyle = this.state.haveResults ? styles.resultsContainer : styles.smallContainer;\n\n    const placeholderText = \"Search...\";\n    const socialSources = this.props.social.getSources();\n\n    // TODO - rework these classes, code duplication with Popover.js here\n    const selectedShipID = this.props.selectedShipID;\n\n    let infoOverlay = null;\n    if (this.state.selectedEntity) {\n      infoOverlay = <div style={{ background: \"white\", width: \"75%\", height: \"75%\", fontSize: \"5vh\" }}>Wooooo</div>;\n      const entity = this.state.selectedEntity;\n\n      // If we can't find it in the selected ship then get the sources for the other ship\n      const sourceIDs = entity.getSources()[selectedShipID];\n\n      let buttonStrings = [];\n      let sourceButtonText = \"\";\n\n      if (!sourceIDs) {\n        console.error(\"Cannot find sources for this project : \", selectedShipID, \"\\n Sources : \", socialSources);\n      } else {\n        for (const id of sourceIDs) {\n          buttonStrings.push(socialSources.get(id).getName());\n        }\n      }\n      sourceButtonText = buttonStrings.join(\", \");\n\n      infoOverlay = (\n        <OverlayWrapper\n          entity={entity}\n          isBioOverlayOpen={this.state.isBioOverlayOpen}\n          isOverlayOpen={this.state.isOverlayOpen}\n          isSourceOverlayOpen={this.state.isSourceOverlayOpen}\n          social={this.props.social}\n          sourceButtonText={sourceButtonText}\n          sourceIDs={sourceIDs}\n          toggleBioOverlay={this.toggleBioOverlay}\n          toggleOverlay={this.toggleOverlay}\n          toggleSourceOverlay={this.toggleSourceOverlay}\n        />\n      );\n    }\n\n    return (\n      <Overlay toggleOverlay={this.props.toggleSearchOverlay}>\n        <div className={styles.container}>\n          <div className={styles.smallContainer}>\n            <SearchBar\n              social={this.props.social}\n              emitHighlighted={this.props.emitHighlighted}\n              emitClicked={this.props.emitClicked}\n              emitResults={this.emitResults}\n              emitSelected={this.emitSelected}\n              placeholder={placeholderText}\n            ></SearchBar>\n          </div>\n          {infoOverlay}\n        </div>\n      </Overlay>\n    );\n  }\n}\n\nSearchOverlay.propTypes = {\n  toggleSearchOverlay: PropTypes.func.isRequired,\n  emitHighlighted: PropTypes.func.isRequired,\n  emitSelected: PropTypes.func.isRequired,\n  emitClicked: PropTypes.func.isRequired,\n  social: PropTypes.object.isRequired,\n  selectedShipID: PropTypes.string.isRequired,\n};\n\nexport default SearchOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport Overlay from \"./Overlay\";\n\nimport styles from \"./OptionsOverlay.module.css\";\n\nclass OptionsOverlay extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Overlay toggleOverlay={this.props.toggleOptionsOverlay}>\n        <div className={styles.optionsContainer}>\n          <div className={styles.optionsHeader}>Graph options</div>\n          <div className={styles.indirectTitle}>Show indirect connections</div>\n          <div className={styles.indirectCheckbox}>\n            <input\n              name=\"indirectVisible\"\n              type=\"checkbox\"\n              checked={this.props.indirectLinksVisible}\n              onChange={this.props.toggleIndirectLinksVisible}\n            />\n          </div>\n          <div className={styles.physicsTitle}>Physics enabled</div>\n          <div className={styles.physicsCheckbox}>\n            <input\n              name=\"physicsEnabled\"\n              type=\"checkbox\"\n              checked={this.props.physicsEnabled}\n              onChange={this.props.togglePhysicsEnabled}\n            />\n          </div>\n        </div>\n      </Overlay>\n    );\n  }\n}\n\nOptionsOverlay.propTypes = {\n  toggleOptionsOverlay: PropTypes.func.isRequired,\n  toggleIndirectLinksVisible: PropTypes.func.isRequired,\n  togglePhysicsEnabled: PropTypes.func.isRequired,\n  indirectLinksVisible: PropTypes.bool.isRequired,\n  physicsEnabled: PropTypes.bool.isRequired,\n};\n\nexport default OptionsOverlay;\n","// package imports\nimport React from \"react\";\nimport Dry from \"json-dry\";\nimport ReactModal from \"react-modal\";\n\n// Brunel components\nimport AnalysisPanel from \"./components/AnalysisPanel\";\nimport AnalysisButton from \"./components/AnalysisButton\";\nimport SocialGraph from \"./components/SocialGraph\";\nimport InfoBox from \"./components/InfoBox\";\nimport TimeLineBox from \"./components/TimeLineBox\";\nimport FilterBox from \"./components/FilterBox\";\nimport SlidingPanel from \"./components/SlidingPanel\";\nimport OverlayBox from \"./components/OverlayBox\";\nimport BrunelMenu from \"./components/BrunelMenu\";\nimport ShipSelector from \"./components/ShipSelector\";\nimport ShipTitle from \"./components/ShipTitle\";\nimport SearchOverlay from \"./components/SearchOverlay\";\nimport OptionsOverlay from \"./components/OptionsOverlay\";\nimport TextButton from \"./components/TextButton\";\n\n// Brunel model\nimport Social from \"./model/Social\";\n\n// Data for import\nimport graph_data from \"./dataWeights.json\";\n\n// Styling for the app\nimport styles from \"./SocialApp.module.css\";\nimport DateRange from \"./model/DateRange\";\n\nclass SocialApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.togglePhysicsEnabled = this.togglePhysicsEnabled.bind(this);\n    this.resetFilters = this.resetFilters.bind(this);\n    this.setOverlay = this.setOverlay.bind(this);\n\n    // Load in the Dried graph data from JSON\n    let social = Dry.parse(graph_data);\n\n    if (!(social instanceof Social)) {\n      console.error(\"Could not parse!\");\n      social = new Social();\n    }\n\n    // Special cases for Brunel project...\n    social.setAnchor(\"Brunel\");\n    social.setMaxWindow(new DateRange({ start: \"1800-01-01\", end: \"1860-12-31\" }));\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      overlayItem: null,\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: false,\n      isHamburgerMenuOpen: false,\n      isSearchOverlayOpen: false,\n      isOptionsOverlayOpen: false,\n      indirectLinksVisible: false,\n      unconnectedNodesVisible: false,\n      unconnectedNodes: null,\n      timeline: new TimeLineBox(),\n      isOverlayOpen: false,\n      isAnalysisOpen: false,\n      physicsEnabled: false,\n      selectedShip: null,\n      selectedShipID: null,\n    };\n\n    // Find the unconnected nodes for filtering\n    this.findUnconnectedNodes();\n\n    // TODO - work out a cleaner way of doing this\n    // Is set in ShipSelector correctly\n    const ssGW = social.getProjects().getByName(\"SS Great Western\");\n    this.state.selectedShip = ssGW.getName();\n    this.state.selectedShipID = ssGW.getID();\n\n    this.socialGraph = null;\n  }\n\n  resetFilters() {\n    let social = this.state.social;\n    social.resetFilters();\n    this.setState({ social: social });\n    // this.setState({ social: social, selectedShip: null, selectedShipID: null });\n  }\n\n  closePanels() {\n    this.setState({\n      isInfoPanelOpen: false,\n      isTimeLinePanelOpen: false,\n      isHamburgerMenuOpen: false,\n      isFilterPanelOpen: false,\n      isAnalysisOpen: false,\n      highlighted_item: null,\n    });\n  }\n\n  closeOverlay() {\n    this.setState({\n      isOverlayOpen: false,\n      overlayItem: null,\n    });\n  }\n\n  showInfo(item) {\n    if (item._isAProjectObject) {\n      this.setState({\n        overlayItem: item,\n        isOverlayOpen: true,\n      });\n    } else {\n      this.setState({\n        selected_item: item,\n        isInfoPanelOpen: true,\n      });\n    }\n  }\n\n  slotClearFilters() {\n    this.resetFilters();\n  }\n\n  slotSetFilter(item) {\n    // this.resetFilters();\n    this.slotToggleFilter(item);\n    this.setState({ selectedShip: item.getName(), selectedShipID: item.getID() });\n  }\n\n  clearShipSelection() {\n    this.setState({ selectedShip: null, selectedShipID: null });\n  }\n\n  slotSetFilterbyID(id, name) {\n    // this.resetFilters();\n    this.slotToggleFilter(id);\n    this.setState({ selectedShip: name, selectedShipID: id });\n  }\n\n  slotToggleProjectFilter(project) {\n    let social = this.state.social;\n    social.toggleProjectFilter(project);\n\n    this.setState({ social: social });\n  }\n\n  slotToggleFilter(item) {\n    if (!item) {\n      return;\n    }\n\n    let social = this.state.social;\n\n    // This feels clunky, is there a cleaner way of doing this?\n    // Currently we only want one ship selectable at a time\n    if (item._isAProjectObject) {\n      social.clearProjectFilter();\n    }\n\n    social.toggleFilter(item);\n\n    this.setState({ social: social });\n  }\n\n  slotToggleNodeFilter(nodes) {\n    if (!nodes) {\n      return;\n    }\n\n    let social = this.state.social;\n    social.toggleNodeFilter(nodes);\n\n    this.setState({ social: social });\n  }\n\n  slotHighlighted(id) {\n    if (!id) {\n      return;\n    }\n\n    if (id._isADateRangeObject) {\n      return;\n    }\n\n    this.setState({ highlighted_item: id });\n  }\n\n  slotSelected(id) {\n    if (!id) {\n      this.closePanels();\n      return;\n    }\n\n    if (id._isADateRangeObject) {\n      let social = this.state.social;\n      if (social.setWindow(id)) {\n        this.setState({ social: social });\n      }\n      return;\n    }\n\n    const social = this.state.social;\n    const item = social.get(id);\n    this.showInfo(item);\n  }\n\n  slotWindowChanged(window) {\n    let social = this.state.social;\n\n    if (social.setWindow(window)) {\n      this.setState({ social: social });\n    }\n  }\n\n  gotConnections(id) {\n    return this.state.social.getConnections().gotConnections(id);\n  }\n\n  findUnconnectedNodes() {\n    // Loop through and find the unconnected nodes and create a list of them\n    let unconnectedNodes = [];\n\n    const people = this.state.social.getPeople().getNodes(\"noanchor\");\n\n    for (const p of people) {\n      if (this.gotConnections(p.id)) {\n        unconnectedNodes.push(p.id);\n      }\n    }\n\n    const businesses = this.state.social.getBusinesses().getNodes(\"noanchor\");\n\n    for (const b of businesses) {\n      if (this.gotConnections(b.id)) {\n        unconnectedNodes.push(b.id);\n      }\n    }\n\n    this.state.unconnectedNodes = unconnectedNodes;\n  }\n\n  toggleUnconnectedNodesVisible() {\n    if (!this.state.unconnectedNodesVisible) {\n      this.resetFilters();\n      this.slotToggleNodeFilter(this.state.unconnectedNodes);\n      this.slotToggleFilter(this.state.selectedShipID);\n      this.setState({ unconnectedNodesVisible: true });\n    } else {\n      this.resetFilters();\n      this.slotToggleFilter(this.state.selectedShipID);\n      this.setState({ unconnectedNodesVisible: false });\n    }\n  }\n\n  toggleInfoPanel() {\n    this.setState({ isInfoPanelOpen: !this.state.isInfoPanelOpen });\n  }\n\n  toggleTimeLinePanel() {\n    this.setState({\n      isFilterPanelOpen: false,\n      isTimeLinePanelOpen: !this.state.isTimeLinePanelOpen,\n    });\n  }\n\n  toggleFilterPanel() {\n    this.setState({\n      isTimeLinePanelOpen: false,\n      isFilterPanelOpen: !this.state.isFilterPanelOpen,\n    });\n  }\n\n  toggleAnalysisPanel() {\n    this.setState({ isAnalysisOpen: !this.state.isAnalysisOpen });\n  }\n\n  toggleSearchOverlay() {\n    this.setState({ isSearchOverlayOpen: !this.state.isSearchOverlayOpen });\n  }\n\n  togglePhysicsEnabled() {\n    this.setState({ physicsEnabled: !this.state.physicsEnabled });\n  }\n\n  toggleOptionsOverlay() {\n    this.setState({ isOptionsOverlayOpen: !this.state.isOptionsOverlayOpen });\n  }\n\n  toggleIndirectLinksVisible() {\n    this.setState({ indirectLinksVisible: !this.state.indirectLinksVisible });\n  }\n\n  setOverlay(item) {\n    this.setState({\n      overlayItem: item,\n      isOverlayOpen: true,\n    });\n  }\n\n  resetAll() {\n    console.log(\"Reset all\");\n    window.location.reload(true);\n  }\n\n  render() {\n    const selected = this.state.selected_item;\n    const highlighted = this.state.highlighted_item;\n    const overlayItem = this.state.overlayItem;\n    const social = this.state.social;\n\n    let searchOverlay = null;\n\n    if (this.state.isSearchOverlayOpen) {\n      searchOverlay = (\n        <SearchOverlay\n          social={social}\n          toggleSearchOverlay={() => this.toggleSearchOverlay()}\n          emitSelected={(item) => {\n            this.slotSelected(item);\n          }}\n          emitHighlighted={(item) => {\n            this.slotHighlighted(item);\n          }}\n          emitClicked={(item) => {\n            this.slotClicked(item);\n          }}\n          selectedShipID={this.state.selectedShipID}\n        />\n      );\n    }\n\n    let optionsOverlay = null;\n    if (this.state.isOptionsOverlayOpen) {\n      optionsOverlay = (\n        <OptionsOverlay\n          indirectLinksVisible={this.state.indirectLinksVisible}\n          physicsEnabled={this.state.physicsEnabled}\n          togglePhysicsEnabled={this.togglePhysicsEnabled}\n          toggleIndirectLinksVisible={() => this.toggleIndirectLinksVisible()}\n          toggleOptionsOverlay={() => this.toggleOptionsOverlay()}\n        />\n      );\n    }\n\n    let onoff = this.state.unconnectedNodesVisible ? \"ON\" : \"OFF\";\n\n    return (\n      <div>\n        <ReactModal\n          isOpen={this.state.isOverlayOpen}\n          onRequestClose={() => {\n            this.closeOverlay();\n          }}\n          contentLabel=\"Information overlay\"\n          className={styles.modal}\n          overlayClassName={{\n            base: styles.modalOverlay,\n            afterOpen: styles.modalOverlayAfterOpen,\n            beforeClose: styles.modalOverlayBeforeClose,\n          }}\n          closeTimeoutMS={200}\n          appElement={document.getElementById(\"root\")}\n        >\n          <div\n            className={styles.closeOverlayButton}\n            onClick={() => {\n              this.closeOverlay();\n            }}\n          >\n            X\n          </div>\n          <OverlayBox\n            item={overlayItem}\n            emitClose={() => {\n              this.closeOverlay();\n            }}\n          />\n        </ReactModal>\n\n        <div className={styles.hamburgerContainer}>\n          <button\n            className={styles.hamburgerButton}\n            onClick={() => {\n              this.setState({\n                isHamburgerMenuOpen: !this.state.isHamburgerMenuOpen,\n              });\n            }}\n          >\n            ☰\n          </button>\n        </div>\n\n        <div className={styles.resetButtonContainer}>\n          <TextButton hoverColor=\"#9CB6A4\" padding=\"2px 2px 2px 2px\" onClick={() => this.resetAll()}>\n            Reset\n          </TextButton>\n          <TextButton\n            hoverColor=\"#9CB6A4\"\n            padding=\"2px 2px 2px 2px\"\n            onClick={() => this.toggleUnconnectedNodesVisible()}\n          >\n            Toggle\n          </TextButton>\n          <TextButton\n            hoverColor=\"#9CB6A4\"\n            padding=\"2px 2px 2px 2px\"\n            onClick={() => this.toggleUnconnectedNodesVisible()}\n          >\n            {onoff}\n          </TextButton>\n        </div>\n\n        <SlidingPanel isOpen={this.state.isTimeLinePanelOpen} position=\"bottom\" height=\"15%\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isTimeLinePanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <TimeLineBox\n            selected={selected}\n            projects={this.state.social.getProjects()}\n            shipSelect={(item) => {\n              this.slotSetFilter(item);\n            }}\n            resetFilters={this.resetFilters}\n          />\n        </SlidingPanel>\n\n        {/* Info panel on the RHS */}\n        <SlidingPanel isOpen={this.state.isInfoPanelOpen} position=\"right\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isInfoPanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <InfoBox\n            item={selected}\n            social={social}\n            emitSelected={(item) => {\n              this.slotSelected(item);\n            }}\n            emitHighlighted={(item) => {\n              this.slotHighlighted(item);\n            }}\n            emitToggleFilter={(item) => {\n              this.slotToggleFilter(item);\n            }}\n          />\n        </SlidingPanel>\n\n        {/* Filter on bottom of page */}\n        <SlidingPanel isOpen={this.state.isFilterPanelOpen} position=\"bottom\" height=\"20%\">\n          <span\n            className={styles.closePanelButton}\n            onClick={() => {\n              this.setState({ isFilterPanelOpen: false });\n            }}\n          >\n            X\n          </span>\n          <FilterBox\n            social={social}\n            emitToggleFilter={(item) => {\n              this.slotToggleFilter(item);\n            }}\n            emitSelected={(item) => {\n              this.slotSelected(item);\n            }}\n            emitHighlighted={(item) => {\n              this.slotHighlighted(item);\n            }}\n            emitClearFilters={() => {\n              this.slotClearFilters();\n            }}\n          />\n        </SlidingPanel>\n\n        {/* This creates the menu on the LHS opened by the hamburger */}\n        <SlidingPanel isOpen={this.state.isHamburgerMenuOpen} position=\"left\" width=\"10%\" height=\"100%\">\n          <BrunelMenu\n            setOverlay={this.setOverlay}\n            clickReset={() => {\n              this.resetAll();\n            }}\n            clickSource={() => {\n              this.viewSource();\n            }}\n            emitClose={() => {\n              this.setState({ isHamburgerMenuOpen: false });\n            }}\n          />\n        </SlidingPanel>\n\n        <div className={styles.shipNameContainer}>\n          <ShipTitle name={this.state.selectedShip} />\n        </div>\n\n        <div className={styles.bottomContainer}>\n          <ShipSelector\n            projects={this.state.social.getProjects()}\n            shipFilter={(item) => this.slotSetFilter(item)}\n            resetFilters={this.resetFilters}\n            selectedShip={this.state.selectedShip}\n          />\n        </div>\n\n        {/* The social graph itself */}\n        <div className={styles.mainContainer}>\n          <div className={styles.graphContainer}>\n            <SocialGraph\n              social={this.state.social}\n              selected={selected}\n              highlighted={highlighted}\n              emitClicked={(id) => this.slotSelected(id)}\n              setOverlay={this.setOverlay}\n              wobble={this.state.wobbleEnabled}\n              selectedShipID={this.state.selectedShipID}\n              indirectLinksVisible={this.state.indirectLinksVisible}\n              physicsEnabled={this.state.physicsEnabled}\n              //   unconnectedNodesVisible={this.state.unconnectedNodesVisible}\n            />\n          </div>\n        </div>\n\n        <div className={styles.rightSidePanel}>\n          <AnalysisButton togglePanel={() => this.toggleAnalysisPanel()} />\n        </div>\n\n        <SlidingPanel isOpen={this.state.isAnalysisOpen} position=\"right\" width=\"10%\">\n          <AnalysisPanel\n            toggleSearchOverlay={() => this.toggleSearchOverlay()}\n            toggleOptionsOverlay={() => this.toggleOptionsOverlay()}\n            toggleFilterPanel={() => this.toggleFilterPanel()}\n            toggleTimeLinePanel={() => this.toggleTimeLinePanel()}\n            togglePanel={() => this.toggleAnalysisPanel()}\n          />\n        </SlidingPanel>\n        {searchOverlay}\n        {optionsOverlay}\n      </div>\n    );\n  }\n}\n\nexport default SocialApp;\n","module.exports = __webpack_public_path__ + \"static/media/Great_Western_maiden_voyage.f85d382e.jpg\";","var map = {\n\t\"./320px-SS_Great_Britain_diagram.jpg\": 77,\n\t\"./320px-SS_Great_Britain_transverse_section.jpg\": 78,\n\t\"./800px-Gutenberg_Bible.jpg\": 123,\n\t\"./A_Specimen_by_William_Caslon.jpg\": 124,\n\t\"./Brunel_letter_GWR.jpg\": 125,\n\t\"./Great_Western_maiden_voyage.jpg\": 75,\n\t\"./IllustriteZeitung_SS_GreatBritain.png\": 79,\n\t\"./RHowlett_IKB.jpg\": 80,\n\t\"./Sumerian_26th_c_Adab.jpg\": 81,\n\t\"./The_Steamer_Great_Western_small.jpg\": 126,\n\t\"./bg-128-168.jpg\": 127,\n\t\"./people/Joshua_field.jpg\": 128,\n\t\"./ssgb_logo.png\": 82\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 76;","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_diagram.898c32f6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/320px-SS_Great_Britain_transverse_section.7767cb60.jpg\";","module.exports = __webpack_public_path__ + \"static/media/IllustriteZeitung_SS_GreatBritain.946104e0.png\";","module.exports = __webpack_public_path__ + \"static/media/RHowlett_IKB.68e88d10.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Sumerian_26th_c_Adab.757d98b8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/ssgb_logo.ee48e16d.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"TextButton_button__2yNkD\",\"verticalSpaceTitle\":\"TextButton_verticalSpaceTitle__2Tk5T\",\"verticalSpace\":\"TextButton_verticalSpace__2Q6Km\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"titleText\":\"AnalysisPanel_titleText__b6UZM\",\"wholePanel\":\"AnalysisPanel_wholePanel__yyW2P\",\"buttonPanel\":\"AnalysisPanel_buttonPanel__1nbYH\",\"button\":\"AnalysisPanel_button__297y3\",\"verticalSpaceTitle\":\"AnalysisPanel_verticalSpaceTitle__zFl5A\",\"verticalSpace\":\"AnalysisPanel_verticalSpace__ZeDzh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"AnalysisButton_button__27DRu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popOver\":\"Popover_popOver__10jzZ\",\"header\":\"Popover_header__2TOZN\",\"bioSection\":\"Popover_bioSection__2BMbS\",\"sourceHeader\":\"Popover_sourceHeader__CJzXo\",\"sourceSection\":\"Popover_sourceSection__Njk1M\",\"readMore\":\"Popover_readMore__2c7rW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BioOverlay_container__JNbgi\",\"closeButton\":\"BioOverlay_closeButton__3kwkz\",\"divider\":\"BioOverlay_divider__3RQPn\",\"textSection\":\"BioOverlay_textSection__1J4B5\",\"header\":\"BioOverlay_header__1tDmE\",\"nameHeader\":\"BioOverlay_nameHeader__cTRJ5\",\"positions\":\"BioOverlay_positions__1UpUj\",\"bio\":\"BioOverlay_bio__1QjHO\",\"sources\":\"BioOverlay_sources__XzlBO\",\"imageSection\":\"BioOverlay_imageSection__2wd2d\",\"imageDescription\":\"BioOverlay_imageDescription__1hLYH\"};","module.exports = __webpack_public_path__ + \"static/media/800px-Gutenberg_Bible.89cc4cbe.jpg\";","module.exports = __webpack_public_path__ + \"static/media/A_Specimen_by_William_Caslon.6240f5ce.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Brunel_letter_GWR.ee7f061c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/The_Steamer_Great_Western_small.8756970f.jpg\";","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAPAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAgACAAwERAAIRAQMRAf/EAFIAAQEAAAAAAAAAAAAAAAAAAAAIAQEAAAAAAAAAAAAAAAAAAAAAEAABBAMAAAAAAAAAAAAAAADwATFBUaECIhEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AppNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwBNG4uQwH//2Q==\"","module.exports = __webpack_public_path__ + \"static/media/Joshua_field.73a0da7c.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SourceOverlay_container__19Q2o\",\"closeButton\":\"SourceOverlay_closeButton__2LDeH\",\"divider\":\"SourceOverlay_divider__3b3gS\",\"nameHeader\":\"SourceOverlay_nameHeader__2hk5a\",\"sourceName\":\"SourceOverlay_sourceName__12n91\",\"body\":\"SourceOverlay_body__3Ilgc\",\"biography\":\"SourceOverlay_biography__rfNz9\",\"imageSection\":\"SourceOverlay_imageSection__2dP8A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Overlay_overlay__3n4WI\",\"container\":\"Overlay_container__Mgt_A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ForceGraph_container__TQtWA\",\"graph\":\"ForceGraph_graph__wst6B\",\"node\":\"ForceGraph_node__27s5W\",\"highlight\":\"ForceGraph_highlight__DhZbw\",\"link\":\"ForceGraph_link__2qaVU\",\"linkWeak\":\"ForceGraph_linkWeak__2lOg3\",\"linkIndirect\":\"ForceGraph_linkIndirect__1hzat\",\"linkInvisible\":\"ForceGraph_linkInvisible__2lF55\",\"node_text\":\"ForceGraph_node_text__3ovHB\",\"tooltip\":\"ForceGraph_tooltip__3ttDG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accordion\":\"Accordion_accordion__34t4_\",\"accordionItem\":\"Accordion_accordionItem__VO6pK\",\"accordionButton\":\"Accordion_accordionButton__hVXWw\",\"accordionPanel\":\"Accordion_accordionPanel__1rZAH\",\"fadein\":\"Accordion_fadein__2cKpJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"DefaultButton_button__1Uv_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkBox\":\"CheckBox_checkBox__36R4T\",\"checkMark\":\"CheckBox_checkMark__2h9Jd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ResponsiveList_list__1-ZoE\",\"item\":\"ResponsiveList_item__3jhI7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"GroupsList_project__1pnkG\",\"projectHeader\":\"GroupsList_projectHeader__1YDl_\",\"projectBody\":\"GroupsList_projectBody__2Joe0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connections\":\"ConnectionList_connections__2QbO3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"project\":\"WeightsList_project__3m0SJ\",\"projectHeader\":\"WeightsList_projectHeader__25IKl\",\"projectBody\":\"WeightsList_projectBody__3JVF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"InfoBox_container__2EWGz\",\"heroImage\":\"InfoBox_heroImage__34BXw\",\"title\":\"InfoBox_title__2rO4Z\",\"button\":\"InfoBox_button__3w2z7\",\"tabs\":\"InfoBox_tabs__32XI5\",\"tablist\":\"InfoBox_tablist__3mBju\",\"tab\":\"InfoBox_tab__qp9XR\",\"tabPanel\":\"InfoBox_tabPanel__3FpOY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TimeLineBox_container__3XwaK\",\"centerContainer\":\"TimeLineBox_centerContainer__16Ujh\",\"tabs\":\"TimeLineBox_tabs__yHSvr\",\"tablist\":\"TimeLineBox_tablist__yB2UA\",\"tab\":\"TimeLineBox_tab__157Wu\",\"tabPanel\":\"TimeLineBox_tabPanel__3u0d3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterContainer\":\"FilterBox_filterContainer__2KAxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SlidingPanel_container__360Fr\",\"leftContainer\":\"SlidingPanel_leftContainer__hQNC6\",\"rightContainer\":\"SlidingPanel_rightContainer__57qYr\",\"topContainer\":\"SlidingPanel_topContainer__YiYRz\",\"bottomContainer\":\"SlidingPanel_bottomContainer__2dEzd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromLeft_enter__jKjRY\",\"enterActive\":\"SlideFromLeft_enterActive__159kE\",\"exit\":\"SlideFromLeft_exit___gRJ9\",\"exitActive\":\"SlideFromLeft_exitActive__YfXDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromRight_enter__3at5G\",\"enterActive\":\"SlideFromRight_enterActive__qhcn3\",\"exit\":\"SlideFromRight_exit__C9Did\",\"exitActive\":\"SlideFromRight_exitActive__2HcMW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromBottom_enter__1iOKm\",\"enterActive\":\"SlideFromBottom_enterActive__248cg\",\"exit\":\"SlideFromBottom_exit__1SBqa\",\"exitActive\":\"SlideFromBottom_exitActive__1TiIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"enter\":\"SlideFromTop_enter__2sGUw\",\"enterActive\":\"SlideFromTop_enterActive__3jElj\",\"exit\":\"SlideFromTop_exit__28rU4\",\"exitActive\":\"SlideFromTop_exitActive__2_Nxz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"OverlayBox_container__2H63R\",\"centerContainer\":\"OverlayBox_centerContainer__bl7gf\",\"button\":\"OverlayBox_button__V4JvO\",\"url\":\"OverlayBox_url__aN8n5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebar\":\"BrunelMenu_sidebar__2yyDb\",\"logo\":\"BrunelMenu_logo__274YW\",\"verticalSpace\":\"BrunelMenu_verticalSpace__1fWiP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ShipSelector_button__1cPR1\",\"disabledButton\":\"ShipSelector_disabledButton__2aQfJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"shipTitle\":\"ShipTitle_shipTitle__3ELcB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchContainer\":\"SearchBar_searchContainer__2xOxT\",\"resultContainer\":\"SearchBar_resultContainer__1_9Lx\",\"searchPending\":\"SearchBar_searchPending__1uhP9\",\"searchResult\":\"SearchBar_searchResult__1iaaf\",\"searchBox\":\"SearchBar_searchBox__3PHmH\",\"disabledButton\":\"SearchBar_disabledButton__2PWwO\",\"searchButton\":\"SearchBar_searchButton__1GItM\",\"magnifier\":\"SearchBar_magnifier__2xBEb\",\"closeResultButton\":\"SearchBar_closeResultButton__MIs2K\",\"hamburgerButton\":\"SearchBar_hamburgerButton__1PuEk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchOverlay_container__oPvtI\",\"smallContainer\":\"SearchOverlay_smallContainer__cokAy\",\"resultsContainer\":\"SearchOverlay_resultsContainer__3qrfB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"optionsContainer\":\"OptionsOverlay_optionsContainer__BBOB-\",\"optionsHeader\":\"OptionsOverlay_optionsHeader__37wDI\",\"indirectTitle\":\"OptionsOverlay_indirectTitle__1q32M\",\"indirectCheckbox\":\"OptionsOverlay_indirectCheckbox__1lTeZ\",\"physicsTitle\":\"OptionsOverlay_physicsTitle__13xM0\",\"physicsCheckbox\":\"OptionsOverlay_physicsCheckbox__3NOMm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"module\":\"SocialApp_module__3Cefy\",\"mainContainer\":\"SocialApp_mainContainer__1mJaw\",\"graphContainer\":\"SocialApp_graphContainer__1fIZ_\",\"shipNameContainer\":\"SocialApp_shipNameContainer__3G7ll\",\"resetButtonContainer\":\"SocialApp_resetButtonContainer__2FOA9\",\"resetButton\":\"SocialApp_resetButton__3Dyys\",\"hamburgerContainer\":\"SocialApp_hamburgerContainer__1snWy\",\"hamburgerButton\":\"SocialApp_hamburgerButton__UDSfq\",\"controlButton\":\"SocialApp_controlButton__dd05U\",\"analysisButtons\":\"SocialApp_analysisButtons__1quBU\",\"bottomContainer\":\"SocialApp_bottomContainer__7teeO\",\"rightSidePanel\":\"SocialApp_rightSidePanel__3D6TX\",\"filterText\":\"SocialApp_filterText__12DDf\",\"citationText\":\"SocialApp_citationText__m100A\",\"closePanelButton\":\"SocialApp_closePanelButton__S0EAB\",\"closeOverlayButton\":\"SocialApp_closeOverlayButton__38BCO\",\"modal\":\"SocialApp_modal__7Dp7u\",\"modalOverlay\":\"SocialApp_modalOverlay__8objV\",\"modalOverlayAfterOpen\":\"SocialApp_modalOverlayAfterOpen__3azyt\",\"modalOverlayBeforeClose\":\"SocialApp_modalOverlayBeforeClose__3K48w\",\"sidebarVis\":\"SocialApp_sidebarVis__eSMUM\",\"sidebarInvis\":\"SocialApp_sidebarInvis__2tJ2j\"};"],"sourceRoot":""}